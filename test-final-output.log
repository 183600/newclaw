
> openclaw@2026.2.2 test /home/runner/work/newclaw/newclaw
> node scripts/test-parallel.mjs


[1m[46m RUN [49m[22m [36mv4.0.18 [39m[90m/home/runner/work/newclaw/newclaw[39m


[1m[46m RUN [49m[22m [36mv4.0.18 [39m[90m/home/runner/work/newclaw/newclaw[39m

[90mstderr[2m | src/agents/pi-embedded-runner.test.ts[2m > [22m[2mrunEmbeddedPiAgent[2m > [22m[2mpersists the first user message before assistant output
[22m[39m[33m[agent/embedded][39m [33mlow context window: openai/mock-1 ctx=16000 (warn<32000) source=modelsConfig[39m

[90mstdout[2m | src/agents/pi-embedded-runner.test.ts[2m > [22m[2mrunEmbeddedPiAgent[2m > [22m[2mpersists the first user message before assistant output
[22m[39mhasHooks: [90mundefined[39m

 [32mâœ“[39m src/config/config.legacy-config-detection.rejects-routing-allowfrom.test.ts [2m([22m[2m30 tests[22m[2m)[22m[33m 16952[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects routing.allowFrom [33m 511[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects routing.groupChat.requireMention [33m 592[2mms[22m[39m
     [33m[2mâœ“[22m[39m migrates routing.allowFrom to channels.whatsapp.allowFrom when whatsapp configured [33m 1060[2mms[22m[39m
     [33m[2mâœ“[22m[39m drops routing.allowFrom when whatsapp missing [33m 688[2mms[22m[39m
     [33m[2mâœ“[22m[39m migrates routing.groupChat.requireMention to channels whatsapp/telegram/imessage groups when whatsapp configured [33m 1025[2mms[22m[39m
     [33m[2mâœ“[22m[39m migrates routing.groupChat.requireMention to telegram/imessage when whatsapp missing [33m 668[2mms[22m[39m
     [33m[2mâœ“[22m[39m migrates routing.groupChat.mentionPatterns to messages.groupChat.mentionPatterns [33m 581[2mms[22m[39m
     [33m[2mâœ“[22m[39m migrates routing agentToAgent/queue/transcribeAudio to tools/messages/media [33m 673[2mms[22m[39m
     [33m[2mâœ“[22m[39m migrates agent config into agents.defaults and tools [33m 801[2mms[22m[39m
     [33m[2mâœ“[22m[39m migrates tools.bash to tools.exec [33m 479[2mms[22m[39m
     [33m[2mâœ“[22m[39m accepts per-agent tools.elevated overrides [33m 633[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects telegram.requireMention [33m 624[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects gateway.token [33m 709[2mms[22m[39m
     [33m[2mâœ“[22m[39m migrates gateway.token to gateway.auth.token [33m 605[2mms[22m[39m
     [33m[2mâœ“[22m[39m keeps gateway.bind tailnet [33m 354[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects telegram.dmPolicy="open" without allowFrom "*" [33m 491[2mms[22m[39m
     [33m[2mâœ“[22m[39m accepts telegram.dmPolicy="open" with allowFrom "*" [33m 435[2mms[22m[39m
     [33m[2mâœ“[22m[39m defaults telegram.dmPolicy to pairing when telegram section exists [33m 484[2mms[22m[39m
     [33m[2mâœ“[22m[39m defaults telegram.groupPolicy to allowlist when telegram section exists [33m 453[2mms[22m[39m
     [33m[2mâœ“[22m[39m defaults telegram.streamMode to partial when telegram section exists [33m 422[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects whatsapp.dmPolicy="open" without allowFrom "*" [33m 373[2mms[22m[39m
     [33m[2mâœ“[22m[39m accepts whatsapp.dmPolicy="open" with allowFrom "*" [33m 466[2mms[22m[39m
     [33m[2mâœ“[22m[39m defaults whatsapp.dmPolicy to pairing when whatsapp section exists [33m 422[2mms[22m[39m
     [33m[2mâœ“[22m[39m defaults whatsapp.groupPolicy to allowlist when whatsapp section exists [33m 484[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects signal.dmPolicy="open" without allowFrom "*" [33m 463[2mms[22m[39m
     [33m[2mâœ“[22m[39m accepts signal.dmPolicy="open" with allowFrom "*" [33m 368[2mms[22m[39m
     [33m[2mâœ“[22m[39m defaults signal.dmPolicy to pairing when signal section exists [33m 411[2mms[22m[39m
     [33m[2mâœ“[22m[39m defaults signal.groupPolicy to allowlist when signal section exists [33m 363[2mms[22m[39m
     [33m[2mâœ“[22m[39m accepts historyLimit overrides per provider and account [33m 748[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects imessage.dmPolicy="open" without allowFrom "*" [33m 562[2mms[22m[39m
[90mstderr[2m | src/agents/pi-embedded-runner.test.ts[2m > [22m[2mrunEmbeddedPiAgent[2m > [22m[2mpersists the user message when prompt fails before assistant output
[22m[39m[33m[agent/embedded][39m [33mlow context window: openai/mock-error ctx=16000 (warn<32000) source=modelsConfig[39m

[90mstdout[2m | src/agents/pi-embedded-runner.test.ts[2m > [22m[2mrunEmbeddedPiAgent[2m > [22m[2mpersists the user message when prompt fails before assistant output
[22m[39mhasHooks: [90mundefined[39m

[90mstderr[2m | src/agents/pi-embedded-runner.test.ts[2m > [22m[2mrunEmbeddedPiAgent[2m > [22m[2mappends new user + assistant after existing transcript entries
[22m[39m[33m[agent/embedded][39m [33mlow context window: openai/mock-1 ctx=16000 (warn<32000) source=modelsConfig[39m

[90mstdout[2m | src/agents/pi-embedded-runner.test.ts[2m > [22m[2mrunEmbeddedPiAgent[2m > [22m[2mappends new user + assistant after existing transcript entries
[22m[39mhasHooks: [90mundefined[39m

[90mstderr[2m | src/agents/pi-embedded-runner.test.ts[2m > [22m[2mrunEmbeddedPiAgent[2m > [22m[2mpersists multi-turn user/assistant ordering across runs
[22m[39m[33m[agent/embedded][39m [33mlow context window: openai/mock-1 ctx=16000 (warn<32000) source=modelsConfig[39m

[90mstdout[2m | src/agents/pi-embedded-runner.test.ts[2m > [22m[2mrunEmbeddedPiAgent[2m > [22m[2mpersists multi-turn user/assistant ordering across runs
[22m[39mhasHooks: [90mundefined[39m

[90mstderr[2m | src/agents/pi-embedded-runner.test.ts[2m > [22m[2mrunEmbeddedPiAgent[2m > [22m[2mpersists multi-turn user/assistant ordering across runs
[22m[39m[33m[agent/embedded][39m [33mlow context window: openai/mock-1 ctx=16000 (warn<32000) source=modelsConfig[39m

[90mstdout[2m | src/agents/pi-embedded-runner.test.ts[2m > [22m[2mrunEmbeddedPiAgent[2m > [22m[2mpersists multi-turn user/assistant ordering across runs
[22m[39mhasHooks: [90mundefined[39m

 [32mâœ“[39m extensions/memory-lancedb/index.test.ts [2m([22m[2m7 tests[22m[2m | [22m[33m2 skipped[39m[2m)[22m[33m 28684[2mms[22m[39m
     [33m[2mâœ“[22m[39m config schema parses valid config [33m 28652[2mms[22m[39m
 [32mâœ“[39m extensions/twitch/src/onboarding.test.ts [2m([22m[2m15 tests[22m[2m)[22m[33m 28636[2mms[22m[39m
       [33m[2mâœ“[22m[39m should return existing token when user confirms to keep it [33m 28564[2mms[22m[39m
[90mstderr[2m | src/agents/pi-embedded-runner.test.ts[2m > [22m[2mrunEmbeddedPiAgent[2m > [22m[2mrepairs orphaned user messages and continues
[22m[39m[33m[agent/embedded][39m [33mlow context window: openai/mock-1 ctx=16000 (warn<32000) source=modelsConfig[39m

[90mstdout[2m | src/agents/pi-embedded-runner.test.ts[2m > [22m[2mrunEmbeddedPiAgent[2m > [22m[2mrepairs orphaned user messages and continues
[22m[39mhasHooks: [90mundefined[39m

[90mstderr[2m | src/agents/pi-embedded-runner.test.ts[2m > [22m[2mrunEmbeddedPiAgent[2m > [22m[2mrepairs orphaned single-user sessions and continues
[22m[39m[33m[agent/embedded][39m [33mlow context window: openai/mock-1 ctx=16000 (warn<32000) source=modelsConfig[39m

[90mstdout[2m | src/agents/pi-embedded-runner.test.ts[2m > [22m[2mrunEmbeddedPiAgent[2m > [22m[2mrepairs orphaned single-user sessions and continues
[22m[39mhasHooks: [90mundefined[39m

 [32mâœ“[39m extensions/nostr/src/nostr-profile.fuzz.test.ts [2m([22m[2m51 tests[22m[2m)[22m[33m 2858[2mms[22m[39m
     [33m[2mâœ“[22m[39m handles rapid sequential events with monotonic timestamps [33m 2428[2mms[22m[39m
 [32mâœ“[39m src/agents/pi-embedded-runner.test.ts [2m([22m[2m7 tests[22m[2m)[22m[33m 31666[2mms[22m[39m
     [33m[2mâœ“[22m[39m persists the first user message before assistant output [33m 2815[2mms[22m[39m
     [33m[2mâœ“[22m[39m persists the user message when prompt fails before assistant output [33m 614[2mms[22m[39m
     [33m[2mâœ“[22m[39m appends new user + assistant after existing transcript entries [33m 3629[2mms[22m[39m
     [33m[2mâœ“[22m[39m persists multi-turn user/assistant ordering across runs [33m 5643[2mms[22m[39m
     [33m[2mâœ“[22m[39m repairs orphaned user messages and continues [33m 1995[2mms[22m[39m
     [33m[2mâœ“[22m[39m repairs orphaned single-user sessions and continues [33m 1810[2mms[22m[39m
 [32mâœ“[39m extensions/matrix/src/matrix/send.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 571[2mms[22m[39m
 [32mâœ“[39m src/config/config.legacy-config-detection.accepts-imessage-dmpolicy.test.ts [2m([22m[2m23 tests[22m[2m)[22m[33m 14561[2mms[22m[39m
     [33m[2mâœ“[22m[39m accepts imessage.dmPolicy="open" with allowFrom "*" [33m 694[2mms[22m[39m
     [33m[2mâœ“[22m[39m defaults imessage.dmPolicy to pairing when imessage section exists [33m 823[2mms[22m[39m
     [33m[2mâœ“[22m[39m defaults imessage.groupPolicy to allowlist when imessage section exists [33m 514[2mms[22m[39m
     [33m[2mâœ“[22m[39m defaults discord.groupPolicy to allowlist when discord section exists [33m 423[2mms[22m[39m
     [33m[2mâœ“[22m[39m defaults slack.groupPolicy to allowlist when slack section exists [33m 510[2mms[22m[39m
     [33m[2mâœ“[22m[39m defaults msteams.groupPolicy to allowlist when msteams section exists [33m 606[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects unsafe executable config values [33m 578[2mms[22m[39m
     [33m[2mâœ“[22m[39m accepts tools audio transcription without cli [33m 548[2mms[22m[39m
     [33m[2mâœ“[22m[39m accepts path-like executable values with spaces [33m 567[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects discord.dm.policy="open" without allowFrom "*" [33m 671[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects slack.dm.policy="open" without allowFrom "*" [33m 643[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects legacy agent.model string [33m 727[2mms[22m[39m
     [33m[2mâœ“[22m[39m migrates telegram.requireMention to channels.telegram.groups.*.requireMention [33m 697[2mms[22m[39m
     [33m[2mâœ“[22m[39m migrates messages.tts.enabled to messages.tts.auto [33m 654[2mms[22m[39m
     [33m[2mâœ“[22m[39m migrates legacy model config to agent.models + model lists [33m 730[2mms[22m[39m
     [33m[2mâœ“[22m[39m flags legacy config in snapshot [33m 499[2mms[22m[39m
     [33m[2mâœ“[22m[39m does not auto-migrate claude-cli auth profile mode on load [33m 789[2mms[22m[39m
     [33m[2mâœ“[22m[39m flags legacy provider sections in snapshot [33m 584[2mms[22m[39m
     [33m[2mâœ“[22m[39m flags routing.allowFrom in snapshot [33m 629[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects bindings[].match.provider on load [33m 652[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects bindings[].match.accountID on load [33m 741[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects session.sendPolicy.rules[].match.provider on load [33m 630[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects messages.queue.byProvider on load [33m 648[2mms[22m[39m
 [32mâœ“[39m extensions/lobster/src/lobster-tool.test.ts [2m([22m[2m9 tests[22m[2m)[22m[33m 770[2mms[22m[39m
 [32mâœ“[39m extensions/msteams/src/attachments.test.ts [2m([22m[2m19 tests[22m[2m)[22m[33m 329[2mms[22m[39m
 [32mâœ“[39m extensions/llm-task/src/llm-task-tool.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 251[2mms[22m[39m
[90mstderr[2m | extensions/bluebubbles/src/monitor.test.ts[2m > [22m[2mBlueBubbles webhook monitor[2m > [22m[2mwebhook parsing + auth handling[2m > [22m[2mrejects requests with invalid JSON
[22m[39m[bluebubbles] webhook rejected: invalid json

[90mstderr[2m | extensions/bluebubbles/src/monitor.test.ts[2m > [22m[2mBlueBubbles webhook monitor[2m > [22m[2mwebhook parsing + auth handling[2m > [22m[2mrejects unauthorized requests with wrong password
[22m[39m[bluebubbles] webhook rejected: unauthorized guid=wr***en

 [32mâœ“[39m extensions/bluebubbles/src/monitor.test.ts [2m([22m[2m50 tests[22m[2m)[22m[33m 695[2mms[22m[39m
 [32mâœ“[39m extensions/twitch/src/probe.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 151[2mms[22m[39m
 [32mâœ“[39m extensions/nostr/src/types.test.ts [2m([22m[2m12 tests[22m[2m)[22m[33m 311[2mms[22m[39m
[90mstderr[2m | src/agents/pi-embedded-runner.run-embedded-pi-agent.auth-profile-rotation.test.ts[2m > [22m[2mrunEmbeddedPiAgent auth profile rotation[2m > [22m[2mrotates for auto-pinned profiles
[22m[39m[33m[agent/embedded][39m [33mlow context window: openai/mock-1 ctx=16000 (warn<32000) source=modelsConfig[39m

[90mstderr[2m | src/agents/pi-embedded-runner.run-embedded-pi-agent.auth-profile-rotation.test.ts[2m > [22m[2mrunEmbeddedPiAgent auth profile rotation[2m > [22m[2mdoes not rotate for user-pinned profiles
[22m[39m[33m[agent/embedded][39m [33mlow context window: openai/mock-1 ctx=16000 (warn<32000) source=modelsConfig[39m

[90mstderr[2m | src/agents/pi-embedded-runner.run-embedded-pi-agent.auth-profile-rotation.test.ts[2m > [22m[2mrunEmbeddedPiAgent auth profile rotation[2m > [22m[2mhonors user-pinned profiles even when in cooldown
[22m[39m[33m[agent/embedded][39m [33mlow context window: openai/mock-1 ctx=16000 (warn<32000) source=modelsConfig[39m

[90mstderr[2m | src/agents/pi-embedded-runner.run-embedded-pi-agent.auth-profile-rotation.test.ts[2m > [22m[2mrunEmbeddedPiAgent auth profile rotation[2m > [22m[2mignores user-locked profile when provider mismatches
[22m[39m[33m[agent/embedded][39m [33mlow context window: openai/mock-1 ctx=16000 (warn<32000) source=modelsConfig[39m

[90mstderr[2m | src/agents/pi-embedded-runner.run-embedded-pi-agent.auth-profile-rotation.test.ts[2m > [22m[2mrunEmbeddedPiAgent auth profile rotation[2m > [22m[2mskips profiles in cooldown during initial selection
[22m[39m[33m[agent/embedded][39m [33mlow context window: openai/mock-1 ctx=16000 (warn<32000) source=modelsConfig[39m

[90mstderr[2m | src/agents/pi-embedded-runner.run-embedded-pi-agent.auth-profile-rotation.test.ts[2m > [22m[2mrunEmbeddedPiAgent auth profile rotation[2m > [22m[2mfails over when all profiles are in cooldown and fallbacks are configured
[22m[39m[33m[agent/embedded][39m [33mlow context window: openai/mock-1 ctx=16000 (warn<32000) source=modelsConfig[39m

[90mstderr[2m | src/agents/pi-embedded-runner.run-embedded-pi-agent.auth-profile-rotation.test.ts[2m > [22m[2mrunEmbeddedPiAgent auth profile rotation[2m > [22m[2mfails over when all profiles are in cooldown and fallbacks are configured
[22m[39m[31m[diagnostic][39m [31mlane task error: lane=main durationMs=0 error="FailoverError: No available auth profile for openai (all in cooldown or unavailable)."[39m

[90mstderr[2m | src/agents/pi-embedded-runner.run-embedded-pi-agent.auth-profile-rotation.test.ts[2m > [22m[2mrunEmbeddedPiAgent auth profile rotation[2m > [22m[2mfails over when all profiles are in cooldown and fallbacks are configured
[22m[39m[31m[diagnostic][39m [31mlane task error: lane=session:agent:test:cooldown-failover durationMs=0 error="FailoverError: No available auth profile for openai (all in cooldown or unavailable)."[39m

[90mstderr[2m | src/agents/pi-embedded-runner.run-embedded-pi-agent.auth-profile-rotation.test.ts[2m > [22m[2mrunEmbeddedPiAgent auth profile rotation[2m > [22m[2mfails over when auth is unavailable and fallbacks are configured
[22m[39m[33m[agent/embedded][39m [33mlow context window: openai/mock-1 ctx=16000 (warn<32000) source=modelsConfig[39m

[90mstderr[2m | src/agents/pi-embedded-runner.run-embedded-pi-agent.auth-profile-rotation.test.ts[2m > [22m[2mrunEmbeddedPiAgent auth profile rotation[2m > [22m[2mfails over when auth is unavailable and fallbacks are configured
[22m[39m[31m[diagnostic][39m [31mlane task error: lane=main durationMs=131 error="FailoverError: No API key found for provider "openai". Auth store: /tmp/openclaw-agent-O2fRlo/auth-profiles.json (agentDir: /tmp/openclaw-agent-O2fRlo). Configure auth for this agent (openclaw agents add <id>) or copy auth-profiles.json from the main agentDir."[39m

[90mstderr[2m | src/agents/pi-embedded-runner.run-embedded-pi-agent.auth-profile-rotation.test.ts[2m > [22m[2mrunEmbeddedPiAgent auth profile rotation[2m > [22m[2mfails over when auth is unavailable and fallbacks are configured
[22m[39m[31m[diagnostic][39m [31mlane task error: lane=session:agent:test:auth-unavailable durationMs=150 error="FailoverError: No API key found for provider "openai". Auth store: /tmp/openclaw-agent-O2fRlo/auth-profiles.json (agentDir: /tmp/openclaw-agent-O2fRlo). Configure auth for this agent (openclaw agents add <id>) or copy auth-profiles.json from the main agentDir."[39m

[90mstdout[2m | src/telegram/bot.media.downloads-media-file-path-no-file-download.test.ts[2m > [22m[2mtelegram inbound media[2m > [22m[2mdownloads media via file_path (no file.download)
[22m[39m[34m[telegram][39m [36mautoSelectFamily=false (default-node22)[39m

[90mstderr[2m | src/agents/pi-embedded-runner.run-embedded-pi-agent.auth-profile-rotation.test.ts[2m > [22m[2mrunEmbeddedPiAgent auth profile rotation[2m > [22m[2mskips profiles in cooldown when rotating after failure
[22m[39m[33m[agent/embedded][39m [33mlow context window: openai/mock-1 ctx=16000 (warn<32000) source=modelsConfig[39m

 [32mâœ“[39m src/agents/pi-embedded-runner.run-embedded-pi-agent.auth-profile-rotation.test.ts [2m([22m[2m8 tests[22m[2m)[22m[33m 20216[2mms[22m[39m
     [33m[2mâœ“[22m[39m rotates for auto-pinned profiles [33m 410[2mms[22m[39m
 [32mâœ“[39m extensions/nostr/src/nostr-profile.test.ts [2m([22m[2m31 tests[22m[2m)[22m[33m 456[2mms[22m[39m
 [32mâœ“[39m src/telegram/bot.media.downloads-media-file-path-no-file-download.test.ts [2m([22m[2m10 tests[22m[2m)[22m[33m 18905[2mms[22m[39m
     [33m[2mâœ“[22m[39m downloads media via file_path (no file.download) [33m 15382[2mms[22m[39m
     [33m[2mâœ“[22m[39m prefers proxyFetch over global fetch [33m 425[2mms[22m[39m
     [33m[2mâœ“[22m[39m logs a handler error when getFile returns no file_path [33m 344[2mms[22m[39m
     [33m[2mâœ“[22m[39m buffers messages with same media_group_id and processes them together [33m 489[2mms[22m[39m
     [33m[2mâœ“[22m[39m processes separate media groups independently [33m 405[2mms[22m[39m
     [33m[2mâœ“[22m[39m downloads static sticker (WEBP) and includes sticker metadata [33m 397[2mms[22m[39m
     [33m[2mâœ“[22m[39m refreshes cached sticker metadata on cache hit [33m 361[2mms[22m[39m
     [33m[2mâœ“[22m[39m skips animated stickers (TGS format) [33m 351[2mms[22m[39m
     [33m[2mâœ“[22m[39m skips video stickers (WEBM format) [33m 423[2mms[22m[39m
     [33m[2mâœ“[22m[39m buffers near-limit text and processes sequential parts as one message [33m 318[2mms[22m[39m
 [32mâœ“[39m extensions/nostr/src/nostr-state-store.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 62[2mms[22m[39m
 [32mâœ“[39m extensions/nostr/src/nostr-bus.test.ts [2m([22m[2m32 tests[22m[2m)[22m[32m 243[2mms[22m[39m
 [32mâœ“[39m extensions/nostr/src/nostr-bus.fuzz.test.ts [2m([22m[2m76 tests[22m[2m)[22m[32m 222[2mms[22m[39m
 [32mâœ“[39m src/infra-retry.test.ts [2m([22m[2m28 tests[22m[2m)[22m[33m 5851[2mms[22m[39m
       [33m[2mâœ“[22m[39m uses default config when options are empty [33m 301[2mms[22m[39m
       [33m[2mâœ“[22m[39m respects custom attempts [33m 4507[2mms[22m[39m
       [33m[2mâœ“[22m[39m respects shouldRetry function [33m 304[2mms[22m[39m
 [32mâœ“[39m extensions/google-gemini-cli-auth/oauth.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 98[2mms[22m[39m
 [32mâœ“[39m extensions/matrix/src/matrix/send/targets.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 67[2mms[22m[39m
[90mstderr[2m | extensions/voice-call/src/webhook-security.test.ts[2m > [22m[2mverifyTwilioWebhook[2m > [22m[2mallows invalid signatures for ngrok free tier only on loopback
[22m[39m[voice-call] Twilio signature validation failed (ngrok free tier compatibility, loopback only)

 [32mâœ“[39m extensions/voice-call/src/webhook-security.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 111[2mms[22m[39m
 [32mâœ“[39m src/discord/monitor.tool-result.accepts-guild-messages-mentionpatterns-match.test.ts [2m([22m[2m6 tests[22m[2m)[22m[33m 9869[2mms[22m[39m
     [33m[2mâœ“[22m[39m accepts guild messages when mentionPatterns match [33m 9806[2mms[22m[39m
 [32mâœ“[39m extensions/zalo/src/monitor.webhook.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 144[2mms[22m[39m
 [32mâœ“[39m extensions/twitch/src/outbound.test.ts [2m([22m[2m21 tests[22m[2m)[22m[32m 71[2mms[22m[39m
 [32mâœ“[39m extensions/bluebubbles/src/actions.test.ts [2m([22m[2m27 tests[22m[2m)[22m[32m 143[2mms[22m[39m
 [32mâœ“[39m src/plugins/install.test.ts [2m([22m[2m7 tests[22m[2m)[22m[33m 12407[2mms[22m[39m
     [33m[2mâœ“[22m[39m installs into ~/.openclaw/extensions and uses unscoped id [33m 2107[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects installing when plugin already exists [33m 1650[2mms[22m[39m
     [33m[2mâœ“[22m[39m allows updates when mode is update [33m 3421[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects traversal-like plugin names [33m 1455[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects reserved plugin ids [33m 1890[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects packages without openclaw.extensions [33m 1792[2mms[22m[39m
 [32mâœ“[39m extensions/msteams/src/conversation-store-fs.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 103[2mms[22m[39m
 [32mâœ“[39m extensions/msteams/src/messenger.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 57[2mms[22m[39m
[90mstdout[2m | extensions/voice-call/src/manager.test.ts[2m > [22m[2mCallManager[2m > [22m[2mupgrades providerCallId mapping when provider ID changes
[22m[39m[voice-call] Starting max duration timer (300s) for call 9aaf4707-8046-494b-84ea-3cfdbf489af0

[90mstdout[2m | extensions/voice-call/src/manager.test.ts[2m > [22m[2mCallManager[2m > [22m[2mspeaks initial message on answered for notify mode (non-Twilio)
[22m[39m[voice-call] Using inline TwiML for notify mode (voice: Polly.Joanna)

[90mstdout[2m | extensions/voice-call/src/manager.test.ts[2m > [22m[2mCallManager[2m > [22m[2mspeaks initial message on answered for notify mode (non-Twilio)
[22m[39m[voice-call] Starting max duration timer (300s) for call f65d167b-0cfc-4ebe-8f40-e8cc877c553f
[voice-call] Speaking initial message for call f65d167b-0cfc-4ebe-8f40-e8cc877c553f (mode: notify)

[90mstdout[2m | extensions/voice-call/src/manager.test.ts[2m > [22m[2mCallManager[2m > [22m[2mspeaks initial message on answered for notify mode (non-Twilio)
[22m[39m[voice-call] Notify mode: auto-hangup in 3s for call f65d167b-0cfc-4ebe-8f40-e8cc877c553f

[90mstdout[2m | extensions/voice-call/src/manager.test.ts[2m > [22m[2mCallManager[2m > [22m[2mrejects inbound calls with missing caller ID when allowlist enabled
[22m[39m[voice-call] Inbound call rejected: missing caller ID

[90mstdout[2m | extensions/voice-call/src/manager.test.ts[2m > [22m[2mCallManager[2m > [22m[2mrejects inbound calls that only match allowlist suffixes
[22m[39m[voice-call] Inbound call rejected: +99915550001234 not in allowlist

[90mstdout[2m | extensions/voice-call/src/manager.test.ts[2m > [22m[2mCallManager[2m > [22m[2maccepts inbound calls that exactly match the allowlist
[22m[39m[voice-call] Inbound call accepted: +15550001234 is in allowlist
[voice-call] Created inbound call record: 2f4dc12e-c31c-4a82-b68b-f8458fcce693 from +15550001234

 [32mâœ“[39m extensions/voice-call/src/manager.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 79[2mms[22m[39m
 [32mâœ“[39m extensions/msteams/src/media-helpers.test.ts [2m([22m[2m36 tests[22m[2m)[22m[32m 75[2mms[22m[39m
 [32mâœ“[39m src/commands/agent.test.ts [2m([22m[2m16 tests[22m[2m)[22m[33m 8250[2mms[22m[39m
     [33m[2mâœ“[22m[39m creates a session entry when deriving from --to [33m 897[2mms[22m[39m
     [33m[2mâœ“[22m[39m persists thinking and verbose overrides [33m 602[2mms[22m[39m
     [33m[2mâœ“[22m[39m resumes when session-id is provided [33m 531[2mms[22m[39m
     [33m[2mâœ“[22m[39m does not duplicate agent events from embedded runs [33m 534[2mms[22m[39m
     [33m[2mâœ“[22m[39m uses provider/model from agents.defaults.model.primary [33m 476[2mms[22m[39m
     [33m[2mâœ“[22m[39m keeps explicit sessionKey even when sessionId exists elsewhere [33m 559[2mms[22m[39m
     [33m[2mâœ“[22m[39m derives session key from --agent when no routing target is provided [33m 642[2mms[22m[39m
     [33m[2mâœ“[22m[39m defaults thinking to low for reasoning-capable models [33m 522[2mms[22m[39m
     [33m[2mâœ“[22m[39m prints JSON payload when requested [33m 417[2mms[22m[39m
     [33m[2mâœ“[22m[39m passes the message through as the agent prompt [33m 374[2mms[22m[39m
     [33m[2mâœ“[22m[39m passes through telegram accountId when delivering [33m 675[2mms[22m[39m
     [33m[2mâœ“[22m[39m uses reply channel as the message channel context [33m 532[2mms[22m[39m
     [33m[2mâœ“[22m[39m prefers runContext for embedded routing [33m 490[2mms[22m[39m
     [33m[2mâœ“[22m[39m forwards accountId to embedded runs [33m 459[2mms[22m[39m
     [33m[2mâœ“[22m[39m logs output when delivery is disabled [33m 497[2mms[22m[39m
 [32mâœ“[39m src/cron/isolated-agent.uses-last-non-empty-agent-text-as.test.ts [2m([22m[2m13 tests[22m[2m)[22m[33m 5828[2mms[22m[39m
     [33m[2mâœ“[22m[39m uses last non-empty agent text as summary [33m 861[2mms[22m[39m
     [33m[2mâœ“[22m[39m appends current time after the cron header line [33m 543[2mms[22m[39m
     [33m[2mâœ“[22m[39m uses agentId for workspace, session key, and store paths [33m 462[2mms[22m[39m
     [33m[2mâœ“[22m[39m uses model override when provided [33m 390[2mms[22m[39m
     [33m[2mâœ“[22m[39m uses hooks.gmail.model for Gmail hook sessions [33m 373[2mms[22m[39m
     [33m[2mâœ“[22m[39m wraps external hook content by default [33m 454[2mms[22m[39m
     [33m[2mâœ“[22m[39m skips external content wrapping when hooks.gmail opts out [33m 384[2mms[22m[39m
     [33m[2mâœ“[22m[39m defaults thinking to low for reasoning-capable models [33m 504[2mms[22m[39m
     [33m[2mâœ“[22m[39m truncates long summaries [33m 486[2mms[22m[39m
     [33m[2mâœ“[22m[39m fails delivery without a WhatsApp recipient when bestEffortDeliver=false [33m 375[2mms[22m[39m
     [33m[2mâœ“[22m[39m starts a fresh session id for each cron run [33m 624[2mms[22m[39m
 [32mâœ“[39m extensions/bluebubbles/src/send.test.ts [2m([22m[2m30 tests[22m[2m)[22m[32m 153[2mms[22m[39m
 [32mâœ“[39m extensions/diagnostics-otel/src/service.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 50[2mms[22m[39m
 [32mâœ“[39m extensions/bluebubbles/src/targets.test.ts [2m([22m[2m24 tests[22m[2m)[22m[32m 49[2mms[22m[39m
 [32mâœ“[39m extensions/msteams/src/file-consent-helpers.test.ts [2m([22m[2m16 tests[22m[2m)[22m[32m 56[2mms[22m[39m
 [32mâœ“[39m extensions/tlon/src/urbit/send.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 66[2mms[22m[39m
 [32mâœ“[39m extensions/msteams/src/polls-store.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 85[2mms[22m[39m
 [32mâœ“[39m extensions/bluebubbles/src/chat.test.ts [2m([22m[2m31 tests[22m[2m)[22m[32m 106[2mms[22m[39m
 [32mâœ“[39m extensions/matrix/src/matrix/format.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 85[2mms[22m[39m
 [32mâœ“[39m extensions/twitch/src/twitch-client.test.ts [2m([22m[2m30 tests[22m[2m)[22m[32m 173[2mms[22m[39m
 [32mâœ“[39m extensions/nostr/src/nostr-profile-http.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 169[2mms[22m[39m
 [32mâœ“[39m src/cli/gateway-cli.coverage.test.ts [2m([22m[2m9 tests[22m[2m)[22m[33m 16099[2mms[22m[39m
     [33m[2mâœ“[22m[39m registers call/health commands and routes to callGateway [33m 12975[2mms[22m[39m
     [33m[2mâœ“[22m[39m uses env/config port when --port is omitted [33m 2797[2mms[22m[39m
 [32mâœ“[39m src/cron/isolated-agent.skips-delivery-without-whatsapp-recipient-besteffortdeliver-true.test.ts [2m([22m[2m10 tests[22m[2m)[22m[33m 6284[2mms[22m[39m
     [33m[2mâœ“[22m[39m skips delivery without a WhatsApp recipient when bestEffortDeliver=true [33m 1023[2mms[22m[39m
     [33m[2mâœ“[22m[39m delivers telegram via channel send [33m 677[2mms[22m[39m
     [33m[2mâœ“[22m[39m auto-delivers when explicit target is set without deliver flag [33m 591[2mms[22m[39m
     [33m[2mâœ“[22m[39m skips auto-delivery when messaging tool already sent to the target [33m 574[2mms[22m[39m
     [33m[2mâœ“[22m[39m delivers telegram topic targets via channel send [33m 529[2mms[22m[39m
     [33m[2mâœ“[22m[39m delivers telegram shorthand topic suffixes via channel send [33m 634[2mms[22m[39m
     [33m[2mâœ“[22m[39m delivers via discord when configured [33m 636[2mms[22m[39m
     [33m[2mâœ“[22m[39m skips delivery when response is exactly HEARTBEAT_OK [33m 531[2mms[22m[39m
     [33m[2mâœ“[22m[39m skips delivery when response has HEARTBEAT_OK with short padding [33m 489[2mms[22m[39m
     [33m[2mâœ“[22m[39m delivers when response has HEARTBEAT_OK but also substantial content [33m 591[2mms[22m[39m
 [32mâœ“[39m extensions/msteams/src/probe.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 50[2mms[22m[39m
 [32mâœ“[39m extensions/bluebubbles/src/attachments.test.ts [2m([22m[2m18 tests[22m[2m)[22m[32m 79[2mms[22m[39m
 [32mâœ“[39m extensions/bluebubbles/src/reactions.test.ts [2m([22m[2m46 tests[22m[2m)[22m[32m 122[2mms[22m[39m
 [32mâœ“[39m extensions/nostr/src/nostr-bus.integration.test.ts [2m([22m[2m26 tests[22m[2m)[22m[32m 100[2mms[22m[39m
 [32mâœ“[39m extensions/twitch/src/send.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 56[2mms[22m[39m
[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mcompresses common formats to jpeg under the cap
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mcompresses common formats to jpeg under the cap
[22m[39m[35m[whatsapp][39m [36mInbound message +1 -> +2 (undefined, 30 chars)[39m

 [32mâœ“[39m extensions/nostr/src/nostr-profile-import.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 41[2mms[22m[39m
 [32mâœ“[39m src/config/config.nix-integration-u3-u5-u9.test.ts [2m([22m[2m17 tests[22m[2m)[22m[33m 12009[2mms[22m[39m
       [33m[2mâœ“[22m[39m isNixMode is false when OPENCLAW_NIX_MODE is not set [33m 699[2mms[22m[39m
       [33m[2mâœ“[22m[39m isNixMode is false when OPENCLAW_NIX_MODE is empty [33m 727[2mms[22m[39m
       [33m[2mâœ“[22m[39m isNixMode is false when OPENCLAW_NIX_MODE is not '1' [33m 839[2mms[22m[39m
       [33m[2mâœ“[22m[39m isNixMode is true when OPENCLAW_NIX_MODE=1 [33m 467[2mms[22m[39m
       [33m[2mâœ“[22m[39m STATE_DIR defaults to ~/.openclaw when env not set [33m 500[2mms[22m[39m
       [33m[2mâœ“[22m[39m STATE_DIR respects OPENCLAW_STATE_DIR override [33m 527[2mms[22m[39m
       [33m[2mâœ“[22m[39m CONFIG_PATH defaults to ~/.openclaw/openclaw.json when env not set [33m 874[2mms[22m[39m
       [33m[2mâœ“[22m[39m CONFIG_PATH respects OPENCLAW_CONFIG_PATH override [33m 673[2mms[22m[39m
       [33m[2mâœ“[22m[39m CONFIG_PATH expands ~ in OPENCLAW_CONFIG_PATH override [33m 696[2mms[22m[39m
       [33m[2mâœ“[22m[39m CONFIG_PATH uses STATE_DIR when only state dir is overridden [33m 607[2mms[22m[39m
       [33m[2mâœ“[22m[39m expands ~ in common path-ish config fields [33m 1257[2mms[22m[39m
       [33m[2mâœ“[22m[39m uses default when env and config are unset [33m 752[2mms[22m[39m
       [33m[2mâœ“[22m[39m prefers OPENCLAW_GATEWAY_PORT over config [33m 661[2mms[22m[39m
       [33m[2mâœ“[22m[39m falls back to config when env is invalid [33m 572[2mms[22m[39m
       [33m[2mâœ“[22m[39m accepts config with only botToken [33m 902[2mms[22m[39m
       [33m[2mâœ“[22m[39m accepts config with only tokenFile [33m 614[2mms[22m[39m
       [33m[2mâœ“[22m[39m accepts config with both botToken and tokenFile [33m 595[2mms[22m[39m
[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mcompresses common formats to jpeg under the cap
[22m[39m[35m[whatsapp][39m [36mSent media reply to +1 (0.74MB)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mcompresses common formats to jpeg under the cap
[22m[39m[35m[whatsapp][39m [36mAuto-replied to +1 (media)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mcompresses common formats to jpeg under the cap
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mcompresses common formats to jpeg under the cap
[22m[39m[35m[whatsapp][39m [36mInbound message +1 -> +2 (undefined, 30 chars)[39m

 [32mâœ“[39m extensions/line/src/channel.sendPayload.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 72[2mms[22m[39m
[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mcompresses common formats to jpeg under the cap
[22m[39m[35m[whatsapp][39m [36mSent media reply to +1 (0.69MB)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mcompresses common formats to jpeg under the cap
[22m[39m[35m[whatsapp][39m [36mAuto-replied to +1 (media)[39m

 [32mâœ“[39m extensions/twitch/src/token.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 35[2mms[22m[39m
[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mcompresses common formats to jpeg under the cap
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mcompresses common formats to jpeg under the cap
[22m[39m[35m[whatsapp][39m [36mInbound message +1 -> +2 (undefined, 30 chars)[39m

 [32mâœ“[39m extensions/tlon/src/urbit/sse-client.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 34[2mms[22m[39m
 [32mâœ“[39m src/agents/openai-responses.reasoning-replay.test.ts [2m([22m[2m2 tests[22m[2m)[22m[33m 2552[2mms[22m[39m
     [33m[2mâœ“[22m[39m replays reasoning for tool-call-only turns (OpenAI requires it) [33m 1314[2mms[22m[39m
     [33m[2mâœ“[22m[39m still replays reasoning when paired with an assistant message [33m 1233[2mms[22m[39m
 [32mâœ“[39m extensions/msteams/src/polls.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 78[2mms[22m[39m
[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mcompresses common formats to jpeg under the cap
[22m[39m[35m[whatsapp][39m [36mSent media reply to +1 (0.69MB)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mcompresses common formats to jpeg under the cap
[22m[39m[35m[whatsapp][39m [36mAuto-replied to +1 (media)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mhonors mediaMaxMb from config
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mhonors mediaMaxMb from config
[22m[39m[35m[whatsapp][39m [36mInbound message +1 -> +2 (undefined, 30 chars)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mhonors mediaMaxMb from config
[22m[39m[35m[whatsapp][39m [36mSent media reply to +1 (0.01MB)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mhonors mediaMaxMb from config
[22m[39m[35m[whatsapp][39m [36mAuto-replied to +1 (media)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mfalls back to text when media is unsupported
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mfalls back to text when media is unsupported
[22m[39m[35m[whatsapp][39m [36mInbound message +1 -> +2 (undefined, 19 chars)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mfalls back to text when media is unsupported
[22m[39m[35m[whatsapp][39m [36mSent media reply to +1 (0.01MB)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mfalls back to text when media is unsupported
[22m[39m[35m[whatsapp][39m [36mAuto-replied to +1 (media)[39m

 [32mâœ“[39m src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 14157[2mms[22m[39m
     [33m[2mâœ“[22m[39m compresses common formats to jpeg under the cap [33m 12929[2mms[22m[39m
     [33m[2mâœ“[22m[39m honors mediaMaxMb from config [33m 1167[2mms[22m[39m
 [32mâœ“[39m extensions/voice-call/src/media-stream.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 33[2mms[22m[39m
 [32mâœ“[39m extensions/matrix/src/channel.directory.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 47[2mms[22m[39m
 [32mâœ“[39m extensions/matrix/src/matrix/monitor/media.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 38[2mms[22m[39m
 [32mâœ“[39m extensions/msteams/src/inbound.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 50[2mms[22m[39m
 [32mâœ“[39m extensions/voice-call/src/config.test.ts [2m([22m[2m14 tests[22m[2m)[22m[32m 52[2mms[22m[39m
 [32mâœ“[39m extensions/googlechat/src/api.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 58[2mms[22m[39m
[90mstdout[2m | src/telegram/bot.create-telegram-bot.installs-grammy-throttler.test.ts[2m > [22m[2mcreateTelegramBot[2m > [22m[2minstalls grammY throttler
[22m[39m[34m[telegram][39m [36mautoSelectFamily=false (default-node22)[39m

 [32mâœ“[39m extensions/nostr/src/channel.test.ts [2m([22m[2m21 tests[22m[2m)[22m[32m 67[2mms[22m[39m
 [32mâœ“[39m src/telegram/bot.create-telegram-bot.installs-grammy-throttler.test.ts [2m([22m[2m10 tests[22m[2m)[22m[33m 3771[2mms[22m[39m
     [33m[2mâœ“[22m[39m installs grammY throttler [33m 893[2mms[22m[39m
     [33m[2mâœ“[22m[39m uses wrapped fetch when global fetch is available [33m 357[2mms[22m[39m
     [33m[2mâœ“[22m[39m passes timeoutSeconds even without a custom fetch [33m 332[2mms[22m[39m
     [33m[2mâœ“[22m[39m prefers per-account timeoutSeconds overrides [33m 319[2mms[22m[39m
     [33m[2mâœ“[22m[39m routes callback_query payloads as messages and answers callbacks [33m 375[2mms[22m[39m
     [33m[2mâœ“[22m[39m wraps inbound message with Telegram envelope [33m 325[2mms[22m[39m
     [33m[2mâœ“[22m[39m triggers typing cue via onReplyStart [33m 366[2mms[22m[39m
 [32mâœ“[39m extensions/twitch/src/access-control.test.ts [2m([22m[2m31 tests[22m[2m)[22m[32m 79[2mms[22m[39m
 [32mâœ“[39m extensions/tlon/src/monitor/processed-messages.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 35[2mms[22m[39m
 [32mâœ“[39m src/commands/onboard-non-interactive.gateway.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 14622[2mms[22m[39m
     [33m[2mâœ“[22m[39m writes gateway token auth into config and gateway enforces it [33m 11611[2mms[22m[39m
     [33m[2mâœ“[22m[39m auto-generates token auth when binding LAN and persists the token [33m 2736[2mms[22m[39m
 [32mâœ“[39m extensions/tlon/src/config-schema.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 20[2mms[22m[39m
 [32mâœ“[39m extensions/line/src/channel.logout.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 42[2mms[22m[39m
 [32mâœ“[39m src/commands/onboard-non-interactive.ai-gateway.test.ts [2m([22m[2m1 test[22m[2m)[22m[33m 11335[2mms[22m[39m
     [33m[2mâœ“[22m[39m stores the API key and configures the default model [33m 11333[2mms[22m[39m
 [32mâœ“[39m extensions/msteams/src/policy.test.ts [2m([22m[2m15 tests[22m[2m)[22m[32m 58[2mms[22m[39m
 [32mâœ“[39m src/commands/onboard-non-interactive.token.test.ts [2m([22m[2m1 test[22m[2m)[22m[33m 10885[2mms[22m[39m
     [33m[2mâœ“[22m[39m writes token profile config and stores the token [33m 10877[2mms[22m[39m
 [32mâœ“[39m extensions/zalouser/src/status-issues.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 41[2mms[22m[39m
 [32mâœ“[39m extensions/zalo/src/channel.directory.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 27[2mms[22m[39m
 [32mâœ“[39m extensions/twitch/src/status.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 48[2mms[22m[39m
 [32mâœ“[39m src/signal/monitor.event-handler.typing-read-receipts.test.ts [2m([22m[2m1 test[22m[2m)[22m[33m 10802[2mms[22m[39m
     [33m[2mâœ“[22m[39m sends typing + read receipt for allowed DMs [33m 10793[2mms[22m[39m
 [32mâœ“[39m extensions/googlechat/src/monitor.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 27[2mms[22m[39m
 [32mâœ“[39m extensions/googlechat/src/targets.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 29[2mms[22m[39m
 [32mâœ“[39m extensions/matrix/src/matrix/poll-types.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 16[2mms[22m[39m
Usage: program models auth [options] [command]

Manage model auth profiles

Options:
  --agent <id>                    Agent id for auth order get/set/clear
  -h, --help                      display help for command

Commands:
  add                             Interactive auth helper (setup-token or paste
                                  token)
  login [options]                 Run a provider plugin auth flow (OAuth/API
                                  key)
  setup-token [options]           Run a provider CLI to create/sync a token (TTY
                                  required)
  paste-token [options]           Paste a token into auth-profiles.json and
                                  update config
  login-github-copilot [options]  Login to GitHub Copilot via GitHub device flow
                                  (TTY required)
  order                           Manage per-agent auth profile order overrides
 [32mâœ“[39m src/cli/models-cli.test.ts [2m([22m[2m4 tests[22m[2m)[22m[33m 10585[2mms[22m[39m
     [33m[2mâœ“[22m[39m registers github-copilot login command [33m 10531[2mms[22m[39m
 [32mâœ“[39m extensions/msteams/src/errors.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 35[2mms[22m[39m
 [32mâœ“[39m extensions/twitch/src/config.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 21[2mms[22m[39m
 [32mâœ“[39m extensions/voice-call/src/providers/plivo.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 33[2mms[22m[39m
 [32mâœ“[39m src/signal/monitor.event-handler.sender-prefix.test.ts [2m([22m[2m1 test[22m[2m)[22m[33m 9534[2mms[22m[39m
     [33m[2mâœ“[22m[39m prefixes group bodies with sender label [33m 9531[2mms[22m[39m
 [32mâœ“[39m extensions/msteams/src/channel.directory.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 33[2mms[22m[39m
 [32mâœ“[39m extensions/voice-call/src/providers/twilio.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 25[2mms[22m[39m
 [32mâœ“[39m src/browser/screenshot.test.ts [2m([22m[2m2 tests[22m[2m)[22m[33m 9805[2mms[22m[39m
     [33m[2mâœ“[22m[39m shrinks oversized images to <=2000x2000 and <=5MB [33m 9754[2mms[22m[39m
 [32mâœ“[39m extensions/mattermost/src/channel.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 32[2mms[22m[39m
 [32mâœ“[39m extensions/matrix/src/resolve-targets.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 34[2mms[22m[39m
 [32mâœ“[39m extensions/matrix/src/matrix/client.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 34[2mms[22m[39m
 [32mâœ“[39m src/agents/sandbox-agent-config.agent-specific-sandbox-config.should-allow-agent-specific-docker-settings-beyond.test.ts [2m([22m[2m4 tests[22m[2m)[22m[33m 9839[2mms[22m[39m
     [33m[2mâœ“[22m[39m should allow agent-specific docker settings beyond setupCommand [33m 5163[2mms[22m[39m
     [33m[2mâœ“[22m[39m should override with agent-specific sandbox mode 'off' [33m 893[2mms[22m[39m
     [33m[2mâœ“[22m[39m should use agent-specific sandbox mode 'all' [33m 1875[2mms[22m[39m
     [33m[2mâœ“[22m[39m should use agent-specific scope [33m 1752[2mms[22m[39m
 [32mâœ“[39m extensions/matrix/src/matrix/monitor/allowlist.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 18[2mms[22m[39m
 [32mâœ“[39m extensions/matrix/src/matrix/accounts.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 40[2mms[22m[39m
[90mstdout[2m | src/telegram/bot.media.includes-location-text-ctx-fields-pins.test.ts[2m > [22m[2mtelegram inbound media[2m > [22m[2mincludes location text and ctx fields for pins
[22m[39m[34m[telegram][39m [36mautoSelectFamily=false (default-node22)[39m

 [32mâœ“[39m src/telegram/bot.media.includes-location-text-ctx-fields-pins.test.ts [2m([22m[2m2 tests[22m[2m)[22m[33m 9558[2mms[22m[39m
     [33m[2mâœ“[22m[39m includes location text and ctx fields for pins [33m 9530[2mms[22m[39m
 [32mâœ“[39m extensions/msteams/src/sent-message-cache.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 22[2mms[22m[39m
 [32mâœ“[39m extensions/zalouser/src/channel.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 35[2mms[22m[39m
 [32mâœ“[39m src/cli/gateway.sigterm.test.ts [2m([22m[2m1 test[22m[2m)[22m[33m 7342[2mms[22m[39m
     [33m[2mâœ“[22m[39m exits 0 on SIGTERM [33m 7324[2mms[22m[39m
 [32mâœ“[39m src/agents/sandbox-agent-config.agent-specific-sandbox-config.should-use-global-sandbox-config-no-agent.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 8339[2mms[22m[39m
     [33m[2mâœ“[22m[39m should use global sandbox config when no agent-specific config exists [33m 4907[2mms[22m[39m
     [33m[2mâœ“[22m[39m should allow agent-specific docker setupCommand overrides [33m 1586[2mms[22m[39m
     [33m[2mâœ“[22m[39m should ignore agent-specific docker overrides when scope is shared [33m 1612[2mms[22m[39m
 [32mâœ“[39m extensions/matrix/src/matrix/monitor/rooms.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 20[2mms[22m[39m
 [32mâœ“[39m extensions/twitch/src/plugin.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 14[2mms[22m[39m

[2m Test Files [22m [1m[32m76 passed[39m[22m[90m (76)[39m
[2m      Tests [22m [1m[32m891 passed[39m[22m[2m | [22m[33m2 skipped[39m[90m (893)[39m
[2m   Start at [22m 23:02:36
[2m   Duration [22m 261.70s[2m (transform 68.68s, setup 347.14s, import 303.01s, tests 68.01s, environment 55ms)[22m

 [32mâœ“[39m src/media-understanding/apply.test.ts [2m([22m[2m22 tests[22m[2m)[22m[33m 2433[2mms[22m[39m
     [33m[2mâœ“[22m[39m sets Transcript and replaces Body when audio transcription succeeds [33m 2347[2mms[22m[39m
 [32mâœ“[39m src/agents/sandbox-agent-config.agent-specific-sandbox-config.should-use-agent-specific-workspaceroot.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 6804[2mms[22m[39m
     [33m[2mâœ“[22m[39m should use agent-specific workspaceRoot [33m 4032[2mms[22m[39m
     [33m[2mâœ“[22m[39m should prefer agent config over global for multiple agents [33m 1380[2mms[22m[39m
     [33m[2mâœ“[22m[39m should prefer agent-specific sandbox tool policy [33m 1306[2mms[22m[39m
 [32mâœ“[39m src/config/config.identity-defaults.test.ts [2m([22m[2m9 tests[22m[2m)[22m[33m 5778[2mms[22m[39m
     [33m[2mâœ“[22m[39m does not derive mentionPatterns when identity is set [33m 764[2mms[22m[39m
     [33m[2mâœ“[22m[39m defaults ackReactionScope without setting ackReaction [33m 858[2mms[22m[39m
     [33m[2mâœ“[22m[39m keeps ackReaction unset when identity is missing [33m 613[2mms[22m[39m
     [33m[2mâœ“[22m[39m does not override explicit values [33m 444[2mms[22m[39m
     [33m[2mâœ“[22m[39m supports provider textChunkLimit config [33m 620[2mms[22m[39m
     [33m[2mâœ“[22m[39m accepts blank model provider apiKey values [33m 661[2mms[22m[39m
     [33m[2mâœ“[22m[39m respects empty responsePrefix to disable identity defaults [33m 636[2mms[22m[39m
     [33m[2mâœ“[22m[39m does not synthesize agent list/session when absent [33m 624[2mms[22m[39m
     [33m[2mâœ“[22m[39m does not derive responsePrefix from identity emoji [33m 555[2mms[22m[39m
 [32mâœ“[39m src/commands/models.list.test.ts [2m([22m[2m8 tests[22m[2m)[22m[33m 6087[2mms[22m[39m
     [33m[2mâœ“[22m[39m models status resolves z.ai alias to canonical zai [33m 6022[2mms[22m[39m
[90mstdout[2m | src/telegram/bot.test.ts[2m > [22m[2mcreateTelegramBot[2m > [22m[2minstalls grammY throttler
[22m[39m[34m[telegram][39m [36mautoSelectFamily=false (default-node22)[39m

[90mstdout[2m | src/telegram/bot.create-telegram-bot.accepts-group-messages-mentionpatterns-match-without-botusername.test.ts[2m > [22m[2mcreateTelegramBot[2m > [22m[2maccepts group messages when mentionPatterns match (without @botUsername)
[22m[39m[34m[telegram][39m [36mautoSelectFamily=false (default-node22)[39m

 [32mâœ“[39m src/telegram/bot.test.ts [2m([22m[2m82 tests[22m[2m)[22m[33m 2487[2mms[22m[39m
     [33m[2mâœ“[22m[39m dedupes duplicate message updates by update_id [33m 344[2mms[22m[39m
 [32mâœ“[39m src/telegram/bot.create-telegram-bot.accepts-group-messages-mentionpatterns-match-without-botusername.test.ts [2m([22m[2m8 tests[22m[2m)[22m[33m 2380[2mms[22m[39m
     [33m[2mâœ“[22m[39m accepts group messages when mentionPatterns match (without @botUsername) [33m 631[2mms[22m[39m
     [33m[2mâœ“[22m[39m accepts group messages when mentionPatterns match even if another user is mentioned [33m 329[2mms[22m[39m
     [33m[2mâœ“[22m[39m reacts to mention-gated group messages when ackReaction is enabled [33m 301[2mms[22m[39m
     [33m[2mâœ“[22m[39m includes reply-to context when a Telegram reply is received [33m 393[2mms[22m[39m
 [32mâœ“[39m src/agents/bash-tools.test.ts [2m([22m[2m17 tests[22m[2m)[22m[33m 1624[2mms[22m[39m
     [33m[2mâœ“[22m[39m uses default timeout when timeout is omitted [33m 1025[2mms[22m[39m
 [32mâœ“[39m src/discord/monitor.slash.test.ts [2m([22m[2m1 test[22m[2m)[22m[33m 5054[2mms[22m[39m
     [33m[2mâœ“[22m[39m skips tool results for native slash commands [33m 5052[2mms[22m[39m
 [32mâœ“[39m src/commands/doctor.runs-legacy-state-migrations-yes-mode-without.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 3647[2mms[22m[39m
     [33m[2mâœ“[22m[39m runs legacy state migrations in yes mode without prompting [33m 3556[2mms[22m[39m
 [32mâœ“[39m src/memory/index.test.ts [2m([22m[2m10 tests[22m[2m)[22m[33m 1257[2mms[22m[39m
 [32mâœ“[39m src/commands/doctor.warns-per-agent-sandbox-docker-browser-prune.test.ts [2m([22m[2m2 tests[22m[2m)[22m[33m 3706[2mms[22m[39m
     [33m[2mâœ“[22m[39m warns when per-agent sandbox docker/browser/prune overrides are ignored under shared scope [33m 3680[2mms[22m[39m
 [32mâœ“[39m src/commands/doctor.falls-back-legacy-sandbox-image-missing.test.ts [2m([22m[2m1 test[22m[2m)[22m[33m 3102[2mms[22m[39m
     [33m[2mâœ“[22m[39m runs legacy state migrations in non-interactive mode without prompting [33m 3099[2mms[22m[39m
