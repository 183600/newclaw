
> openclaw@2026.2.2 test /home/runner/work/newclaw/newclaw
> node scripts/test-parallel.mjs


[1m[46m RUN [49m[22m [36mv4.0.18 [39m[90m/home/runner/work/newclaw/newclaw[39m


[1m[46m RUN [49m[22m [36mv4.0.18 [39m[90m/home/runner/work/newclaw/newclaw[39m

 [32mâœ“[39m src/config/config.legacy-config-detection.rejects-routing-allowfrom.test.ts [2m([22m[2m30 tests[22m[2m)[22m[33m 27323[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects routing.allowFrom [33m 1489[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects routing.groupChat.requireMention [33m 955[2mms[22m[39m
     [33m[2mâœ“[22m[39m migrates routing.allowFrom to channels.whatsapp.allowFrom when whatsapp configured [33m 1395[2mms[22m[39m
     [33m[2mâœ“[22m[39m drops routing.allowFrom when whatsapp missing [33m 1332[2mms[22m[39m
     [33m[2mâœ“[22m[39m migrates routing.groupChat.requireMention to channels whatsapp/telegram/imessage groups when whatsapp configured [33m 1100[2mms[22m[39m
     [33m[2mâœ“[22m[39m migrates routing.groupChat.requireMention to telegram/imessage when whatsapp missing [33m 1403[2mms[22m[39m
     [33m[2mâœ“[22m[39m migrates routing.groupChat.mentionPatterns to messages.groupChat.mentionPatterns [33m 979[2mms[22m[39m
     [33m[2mâœ“[22m[39m migrates routing agentToAgent/queue/transcribeAudio to tools/messages/media [33m 1051[2mms[22m[39m
     [33m[2mâœ“[22m[39m migrates agent config into agents.defaults and tools [33m 1039[2mms[22m[39m
     [33m[2mâœ“[22m[39m migrates tools.bash to tools.exec [33m 960[2mms[22m[39m
     [33m[2mâœ“[22m[39m accepts per-agent tools.elevated overrides [33m 757[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects telegram.requireMention [33m 867[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects gateway.token [33m 1099[2mms[22m[39m
     [33m[2mâœ“[22m[39m migrates gateway.token to gateway.auth.token [33m 1072[2mms[22m[39m
     [33m[2mâœ“[22m[39m keeps gateway.bind tailnet [33m 1046[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects telegram.dmPolicy="open" without allowFrom "*" [33m 733[2mms[22m[39m
     [33m[2mâœ“[22m[39m accepts telegram.dmPolicy="open" with allowFrom "*" [33m 708[2mms[22m[39m
     [33m[2mâœ“[22m[39m defaults telegram.dmPolicy to pairing when telegram section exists [33m 738[2mms[22m[39m
     [33m[2mâœ“[22m[39m defaults telegram.groupPolicy to allowlist when telegram section exists [33m 627[2mms[22m[39m
     [33m[2mâœ“[22m[39m defaults telegram.streamMode to partial when telegram section exists [33m 643[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects whatsapp.dmPolicy="open" without allowFrom "*" [33m 752[2mms[22m[39m
     [33m[2mâœ“[22m[39m accepts whatsapp.dmPolicy="open" with allowFrom "*" [33m 1015[2mms[22m[39m
     [33m[2mâœ“[22m[39m defaults whatsapp.dmPolicy to pairing when whatsapp section exists [33m 663[2mms[22m[39m
     [33m[2mâœ“[22m[39m defaults whatsapp.groupPolicy to allowlist when whatsapp section exists [33m 714[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects signal.dmPolicy="open" without allowFrom "*" [33m 730[2mms[22m[39m
     [33m[2mâœ“[22m[39m accepts signal.dmPolicy="open" with allowFrom "*" [33m 659[2mms[22m[39m
     [33m[2mâœ“[22m[39m defaults signal.dmPolicy to pairing when signal section exists [33m 668[2mms[22m[39m
     [33m[2mâœ“[22m[39m defaults signal.groupPolicy to allowlist when signal section exists [33m 879[2mms[22m[39m
     [33m[2mâœ“[22m[39m accepts historyLimit overrides per provider and account [33m 553[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects imessage.dmPolicy="open" without allowFrom "*" [33m 694[2mms[22m[39m
â€‰ELIFECYCLEâ€‰ Test failed. See above for more details.
