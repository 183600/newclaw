
> openclaw@2026.2.2 test /home/runner/work/newclaw/newclaw
> node scripts/test-parallel.mjs


[1m[46m RUN [49m[22m [36mv4.0.18 [39m[90m/home/runner/work/newclaw/newclaw[39m


[1m[46m RUN [49m[22m [36mv4.0.18 [39m[90m/home/runner/work/newclaw/newclaw[39m

 [32mâœ“[39m src/config/config.legacy-config-detection.rejects-routing-allowfrom.test.ts [2m([22m[2m30 tests[22m[2m)[22m[33m 28489[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects routing.allowFrom [33m 1064[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects routing.groupChat.requireMention [33m 1142[2mms[22m[39m
     [33m[2mâœ“[22m[39m migrates routing.allowFrom to channels.whatsapp.allowFrom when whatsapp configured [33m 1422[2mms[22m[39m
     [33m[2mâœ“[22m[39m drops routing.allowFrom when whatsapp missing [33m 1401[2mms[22m[39m
     [33m[2mâœ“[22m[39m migrates routing.groupChat.requireMention to channels whatsapp/telegram/imessage groups when whatsapp configured [33m 1087[2mms[22m[39m
     [33m[2mâœ“[22m[39m migrates routing.groupChat.requireMention to telegram/imessage when whatsapp missing [33m 1095[2mms[22m[39m
     [33m[2mâœ“[22m[39m migrates routing.groupChat.mentionPatterns to messages.groupChat.mentionPatterns [33m 1354[2mms[22m[39m
     [33m[2mâœ“[22m[39m migrates routing agentToAgent/queue/transcribeAudio to tools/messages/media [33m 1324[2mms[22m[39m
     [33m[2mâœ“[22m[39m migrates agent config into agents.defaults and tools [33m 1025[2mms[22m[39m
     [33m[2mâœ“[22m[39m migrates tools.bash to tools.exec [33m 915[2mms[22m[39m
     [33m[2mâœ“[22m[39m accepts per-agent tools.elevated overrides [33m 1120[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects telegram.requireMention [33m 1050[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects gateway.token [33m 825[2mms[22m[39m
     [33m[2mâœ“[22m[39m migrates gateway.token to gateway.auth.token [33m 774[2mms[22m[39m
     [33m[2mâœ“[22m[39m keeps gateway.bind tailnet [33m 925[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects telegram.dmPolicy="open" without allowFrom "*" [33m 833[2mms[22m[39m
     [33m[2mâœ“[22m[39m accepts telegram.dmPolicy="open" with allowFrom "*" [33m 799[2mms[22m[39m
     [33m[2mâœ“[22m[39m defaults telegram.dmPolicy to pairing when telegram section exists [33m 931[2mms[22m[39m
     [33m[2mâœ“[22m[39m defaults telegram.groupPolicy to allowlist when telegram section exists [33m 676[2mms[22m[39m
     [33m[2mâœ“[22m[39m defaults telegram.streamMode to partial when telegram section exists [33m 768[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects whatsapp.dmPolicy="open" without allowFrom "*" [33m 930[2mms[22m[39m
     [33m[2mâœ“[22m[39m accepts whatsapp.dmPolicy="open" with allowFrom "*" [33m 1025[2mms[22m[39m
     [33m[2mâœ“[22m[39m defaults whatsapp.dmPolicy to pairing when whatsapp section exists [33m 778[2mms[22m[39m
     [33m[2mâœ“[22m[39m defaults whatsapp.groupPolicy to allowlist when whatsapp section exists [33m 732[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects signal.dmPolicy="open" without allowFrom "*" [33m 672[2mms[22m[39m
     [33m[2mâœ“[22m[39m accepts signal.dmPolicy="open" with allowFrom "*" [33m 759[2mms[22m[39m
     [33m[2mâœ“[22m[39m defaults signal.dmPolicy to pairing when signal section exists [33m 649[2mms[22m[39m
     [33m[2mâœ“[22m[39m defaults signal.groupPolicy to allowlist when signal section exists [33m 790[2mms[22m[39m
     [33m[2mâœ“[22m[39m accepts historyLimit overrides per provider and account [33m 915[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects imessage.dmPolicy="open" without allowFrom "*" [33m 678[2mms[22m[39m
 [32mâœ“[39m extensions/memory-lancedb/index.test.ts [2m([22m[2m7 tests[22m[2m | [22m[33m1 skipped[39m[2m)[22m[33m 46765[2mms[22m[39m
     [33m[2mâœ“[22m[39m memory plugin registers and initializes correctly [33m 46683[2mms[22m[39m
 [32mâœ“[39m extensions/twitch/src/onboarding.test.ts [2m([22m[2m15 tests[22m[2m)[22m[33m 46958[2mms[22m[39m
       [33m[2mâœ“[22m[39m should return existing token when user confirms to keep it [33m 46818[2mms[22m[39m
 [32mâœ“[39m src/cli/gateway-cli.coverage.test.ts [2m([22m[2m9 tests[22m[2m)[22m[33m 47071[2mms[22m[39m
     [33m[2mâœ“[22m[39m registers call/health commands and routes to callGateway [33m 41917[2mms[22m[39m
     [33m[2mâœ“[22m[39m prints stop hints on GatewayLockError when service is loaded [33m 343[2mms[22m[39m
     [33m[2mâœ“[22m[39m uses env/config port when --port is omitted [33m 4662[2mms[22m[39m
 [32mâœ“[39m extensions/nostr/src/nostr-profile.fuzz.test.ts [2m([22m[2m51 tests[22m[2m)[22m[33m 4811[2mms[22m[39m
     [33m[2mâœ“[22m[39m handles profile with all fields at max length [33m 485[2mms[22m[39m
     [33m[2mâœ“[22m[39m handles rapid sequential events with monotonic timestamps [33m 4017[2mms[22m[39m
[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mcompresses common formats to jpeg under the cap
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mcompresses common formats to jpeg under the cap
[22m[39m[35m[whatsapp][39m [36mInbound message +1 -> +2 (undefined, 30 chars)[39m

 [32mâœ“[39m extensions/lobster/src/lobster-tool.test.ts [2m([22m[2m9 tests[22m[2m)[22m[33m 1180[2mms[22m[39m
     [33m[2mâœ“[22m[39m runs lobster and returns parsed envelope in details [33m 322[2mms[22m[39m
 [32mâœ“[39m extensions/matrix/src/matrix/send.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 949[2mms[22m[39m
[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mcompresses common formats to jpeg under the cap
[22m[39m[35m[whatsapp][39m [36mSent media reply to +1 (0.74MB)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mcompresses common formats to jpeg under the cap
[22m[39m[35m[whatsapp][39m [36mAuto-replied to +1 (media)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mcompresses common formats to jpeg under the cap
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mcompresses common formats to jpeg under the cap
[22m[39m[35m[whatsapp][39m [36mInbound message +1 -> +2 (undefined, 30 chars)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mcompresses common formats to jpeg under the cap
[22m[39m[35m[whatsapp][39m [36mSent media reply to +1 (0.69MB)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mcompresses common formats to jpeg under the cap
[22m[39m[35m[whatsapp][39m [36mAuto-replied to +1 (media)[39m

 [32mâœ“[39m extensions/llm-task/src/llm-task-tool.test.ts [2m([22m[2m8 tests[22m[2m)[22m[33m 463[2mms[22m[39m
[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mcompresses common formats to jpeg under the cap
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mcompresses common formats to jpeg under the cap
[22m[39m[35m[whatsapp][39m [36mInbound message +1 -> +2 (undefined, 30 chars)[39m

 [32mâœ“[39m extensions/bluebubbles/src/monitor.test.ts [2m([22m[2m50 tests[22m[2m)[22m[33m 1415[2mms[22m[39m
[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mcompresses common formats to jpeg under the cap
[22m[39m[35m[whatsapp][39m [36mSent media reply to +1 (0.69MB)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mcompresses common formats to jpeg under the cap
[22m[39m[35m[whatsapp][39m [36mAuto-replied to +1 (media)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mhonors mediaMaxMb from config
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mhonors mediaMaxMb from config
[22m[39m[35m[whatsapp][39m [36mInbound message +1 -> +2 (undefined, 30 chars)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mhonors mediaMaxMb from config
[22m[39m[35m[whatsapp][39m [36mSent media reply to +1 (0.01MB)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mhonors mediaMaxMb from config
[22m[39m[35m[whatsapp][39m [36mAuto-replied to +1 (media)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mfalls back to text when media is unsupported
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mfalls back to text when media is unsupported
[22m[39m[35m[whatsapp][39m [36mInbound message +1 -> +2 (undefined, 19 chars)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mfalls back to text when media is unsupported
[22m[39m[35m[whatsapp][39m [36mSent media reply to +1 (0.01MB)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mfalls back to text when media is unsupported
[22m[39m[35m[whatsapp][39m [36mAuto-replied to +1 (media)[39m

 [32mâœ“[39m src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 25173[2mms[22m[39m
     [33m[2mâœ“[22m[39m compresses common formats to jpeg under the cap [33m 22722[2mms[22m[39m
     [33m[2mâœ“[22m[39m honors mediaMaxMb from config [33m 2344[2mms[22m[39m
 [32mâœ“[39m src/commands/onboard-non-interactive.gateway.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 23646[2mms[22m[39m
     [33m[2mâœ“[22m[39m writes gateway token auth into config and gateway enforces it [33m 19004[2mms[22m[39m
     [33m[2mâœ“[22m[39m auto-generates token auth when binding LAN and persists the token [33m 4495[2mms[22m[39m
 [32mâœ“[39m extensions/nostr/src/nostr-profile.test.ts [2m([22m[2m31 tests[22m[2m)[22m[33m 748[2mms[22m[39m
 [32mâœ“[39m extensions/msteams/src/attachments.test.ts [2m([22m[2m19 tests[22m[2m)[22m[33m 422[2mms[22m[39m
 [32mâœ“[39m extensions/nostr/src/nostr-bus.test.ts [2m([22m[2m32 tests[22m[2m)[22m[33m 538[2mms[22m[39m
     [33m[2mâœ“[22m[39m derives public key from hex private key [33m 377[2mms[22m[39m
 [32mâœ“[39m extensions/nostr/src/types.test.ts [2m([22m[2m12 tests[22m[2m)[22m[33m 457[2mms[22m[39m
     [33m[2mâœ“[22m[39m resolves configured account [33m 347[2mms[22m[39m
 [32mâœ“[39m extensions/zalo/src/monitor.webhook.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 287[2mms[22m[39m
[90mstdout[2m | src/telegram/bot.media.downloads-media-file-path-no-file-download.test.ts[2m > [22m[2mtelegram inbound media[2m > [22m[2mdownloads media via file_path (no file.download)
[22m[39m[34m[telegram][39m [36mautoSelectFamily=false (default-node22)[39m

 [32mâœ“[39m extensions/bluebubbles/src/send.test.ts [2m([22m[2m30 tests[22m[2m)[22m[32m 276[2mms[22m[39m
 [32mâœ“[39m extensions/twitch/src/probe.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 199[2mms[22m[39m
 [32mâœ“[39m src/telegram/bot.media.downloads-media-file-path-no-file-download.test.ts [2m([22m[2m10 tests[22m[2m)[22m[33m 24211[2mms[22m[39m
     [33m[2mâœ“[22m[39m downloads media via file_path (no file.download) [33m 18315[2mms[22m[39m
     [33m[2mâœ“[22m[39m prefers proxyFetch over global fetch [33m 716[2mms[22m[39m
     [33m[2mâœ“[22m[39m logs a handler error when getFile returns no file_path [33m 697[2mms[22m[39m
     [33m[2mâœ“[22m[39m buffers messages with same media_group_id and processes them together [33m 691[2mms[22m[39m
     [33m[2mâœ“[22m[39m processes separate media groups independently [33m 631[2mms[22m[39m
     [33m[2mâœ“[22m[39m downloads static sticker (WEBP) and includes sticker metadata [33m 608[2mms[22m[39m
     [33m[2mâœ“[22m[39m refreshes cached sticker metadata on cache hit [33m 533[2mms[22m[39m
     [33m[2mâœ“[22m[39m skips animated stickers (TGS format) [33m 607[2mms[22m[39m
     [33m[2mâœ“[22m[39m skips video stickers (WEBM format) [33m 638[2mms[22m[39m
     [33m[2mâœ“[22m[39m buffers near-limit text and processes sequential parts as one message [33m 753[2mms[22m[39m
 [32mâœ“[39m src/config/config.legacy-config-detection.accepts-imessage-dmpolicy.test.ts [2m([22m[2m23 tests[22m[2m)[22m[33m 24502[2mms[22m[39m
     [33m[2mâœ“[22m[39m accepts imessage.dmPolicy="open" with allowFrom "*" [33m 1356[2mms[22m[39m
     [33m[2mâœ“[22m[39m defaults imessage.dmPolicy to pairing when imessage section exists [33m 1346[2mms[22m[39m
     [33m[2mâœ“[22m[39m defaults imessage.groupPolicy to allowlist when imessage section exists [33m 1223[2mms[22m[39m
     [33m[2mâœ“[22m[39m defaults discord.groupPolicy to allowlist when discord section exists [33m 1098[2mms[22m[39m
     [33m[2mâœ“[22m[39m defaults slack.groupPolicy to allowlist when slack section exists [33m 1133[2mms[22m[39m
     [33m[2mâœ“[22m[39m defaults msteams.groupPolicy to allowlist when msteams section exists [33m 1156[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects unsafe executable config values [33m 1110[2mms[22m[39m
     [33m[2mâœ“[22m[39m accepts tools audio transcription without cli [33m 901[2mms[22m[39m
     [33m[2mâœ“[22m[39m accepts path-like executable values with spaces [33m 853[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects discord.dm.policy="open" without allowFrom "*" [33m 926[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects slack.dm.policy="open" without allowFrom "*" [33m 879[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects legacy agent.model string [33m 838[2mms[22m[39m
     [33m[2mâœ“[22m[39m migrates telegram.requireMention to channels.telegram.groups.*.requireMention [33m 1601[2mms[22m[39m
     [33m[2mâœ“[22m[39m migrates messages.tts.enabled to messages.tts.auto [33m 1361[2mms[22m[39m
     [33m[2mâœ“[22m[39m migrates legacy model config to agent.models + model lists [33m 994[2mms[22m[39m
     [33m[2mâœ“[22m[39m flags legacy config in snapshot [33m 880[2mms[22m[39m
     [33m[2mâœ“[22m[39m does not auto-migrate claude-cli auth profile mode on load [33m 936[2mms[22m[39m
     [33m[2mâœ“[22m[39m flags legacy provider sections in snapshot [33m 1043[2mms[22m[39m
     [33m[2mâœ“[22m[39m flags routing.allowFrom in snapshot [33m 853[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects bindings[].match.provider on load [33m 988[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects bindings[].match.accountID on load [33m 1141[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects session.sendPolicy.rules[].match.provider on load [33m 840[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects messages.queue.byProvider on load [33m 1043[2mms[22m[39m
 [32mâœ“[39m extensions/twitch/src/twitch-client.test.ts [2m([22m[2m30 tests[22m[2m)[22m[32m 251[2mms[22m[39m
 [32mâœ“[39m extensions/google-gemini-cli-auth/oauth.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 262[2mms[22m[39m
 [32mâœ“[39m extensions/nostr/src/nostr-bus.fuzz.test.ts [2m([22m[2m76 tests[22m[2m)[22m[33m 465[2mms[22m[39m
 [32mâœ“[39m extensions/bluebubbles/src/reactions.test.ts [2m([22m[2m46 tests[22m[2m)[22m[32m 249[2mms[22m[39m
 [32mâœ“[39m extensions/matrix/src/matrix/send/targets.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 161[2mms[22m[39m
 [32mâœ“[39m extensions/msteams/src/file-consent-helpers.test.ts [2m([22m[2m16 tests[22m[2m)[22m[32m 143[2mms[22m[39m
 [32mâœ“[39m extensions/nostr/src/nostr-bus.integration.test.ts [2m([22m[2m26 tests[22m[2m)[22m[32m 145[2mms[22m[39m
 [32mâœ“[39m src/plugins/install.test.ts [2m([22m[2m7 tests[22m[2m)[22m[33m 22654[2mms[22m[39m
     [33m[2mâœ“[22m[39m installs into ~/.openclaw/extensions and uses unscoped id [33m 3434[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects installing when plugin already exists [33m 3044[2mms[22m[39m
     [33m[2mâœ“[22m[39m allows updates when mode is update [33m 6761[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects traversal-like plugin names [33m 3131[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects reserved plugin ids [33m 3250[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects packages without openclaw.extensions [33m 2870[2mms[22m[39m
 [32mâœ“[39m src/agents/pi-embedded-runner.run-embedded-pi-agent.auth-profile-rotation.test.ts [2m([22m[2m8 tests[22m[2m)[22m[33m 23990[2mms[22m[39m
     [33m[2mâœ“[22m[39m rotates for auto-pinned profiles [33m 775[2mms[22m[39m
     [33m[2mâœ“[22m[39m does not rotate for user-pinned profiles [33m 546[2mms[22m[39m
     [33m[2mâœ“[22m[39m honors user-pinned profiles even when in cooldown [33m 446[2mms[22m[39m
     [33m[2mâœ“[22m[39m ignores user-locked profile when provider mismatches [33m 401[2mms[22m[39m
     [33m[2mâœ“[22m[39m skips profiles in cooldown during initial selection [33m 310[2mms[22m[39m
     [33m[2mâœ“[22m[39m fails over when all profiles are in cooldown and fallbacks are configured [33m 315[2mms[22m[39m
     [33m[2mâœ“[22m[39m fails over when auth is unavailable and fallbacks are configured [33m 332[2mms[22m[39m
     [33m[2mâœ“[22m[39m skips profiles in cooldown when rotating after failure [33m 367[2mms[22m[39m
 [32mâœ“[39m extensions/matrix/src/matrix/format.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 130[2mms[22m[39m
 [32mâœ“[39m extensions/bluebubbles/src/actions.test.ts [2m([22m[2m27 tests[22m[2m)[22m[32m 239[2mms[22m[39m
 [32mâœ“[39m extensions/bluebubbles/src/chat.test.ts [2m([22m[2m31 tests[22m[2m)[22m[32m 194[2mms[22m[39m
 [32mâœ“[39m extensions/msteams/src/polls-store.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 100[2mms[22m[39m
 [32mâœ“[39m extensions/msteams/src/polls.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 173[2mms[22m[39m
 [32mâœ“[39m extensions/twitch/src/outbound.test.ts [2m([22m[2m21 tests[22m[2m)[22m[32m 143[2mms[22m[39m
 [32mâœ“[39m extensions/nostr/src/nostr-profile-http.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 220[2mms[22m[39m
 [32mâœ“[39m src/signal/monitor.event-handler.typing-read-receipts.test.ts [2m([22m[2m1 test[22m[2m)[22m[33m 19623[2mms[22m[39m
     [33m[2mâœ“[22m[39m sends typing + read receipt for allowed DMs [33m 19601[2mms[22m[39m
 [32mâœ“[39m src/commands/onboard-non-interactive.ai-gateway.test.ts [2m([22m[2m1 test[22m[2m)[22m[33m 20050[2mms[22m[39m
     [33m[2mâœ“[22m[39m stores the API key and configures the default model [33m 20048[2mms[22m[39m
 [32mâœ“[39m extensions/voice-call/src/webhook-security.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 199[2mms[22m[39m
 [32mâœ“[39m extensions/bluebubbles/src/attachments.test.ts [2m([22m[2m18 tests[22m[2m)[22m[32m 181[2mms[22m[39m
 [32mâœ“[39m extensions/twitch/src/send.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 106[2mms[22m[39m
 [32mâœ“[39m extensions/tlon/src/urbit/send.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 99[2mms[22m[39m
 [32mâœ“[39m extensions/voice-call/src/config.test.ts [2m([22m[2m14 tests[22m[2m)[22m[32m 111[2mms[22m[39m
 [32mâœ“[39m extensions/line/src/channel.sendPayload.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 147[2mms[22m[39m
 [32mâœ“[39m src/commands/onboard-non-interactive.token.test.ts [2m([22m[2m1 test[22m[2m)[22m[33m 20987[2mms[22m[39m
     [33m[2mâœ“[22m[39m writes token profile config and stores the token [33m 20971[2mms[22m[39m
Usage: program models auth [options] [command]

Manage model auth profiles

Options:
  --agent <id>                    Agent id for auth order get/set/clear
  -h, --help                      display help for command

Commands:
  add                             Interactive auth helper (setup-token or paste
                                  token)
  login [options]                 Run a provider plugin auth flow (OAuth/API
                                  key)
  setup-token [options]           Run a provider CLI to create/sync a token (TTY
                                  required)
  paste-token [options]           Paste a token into auth-profiles.json and
                                  update config
  login-github-copilot [options]  Login to GitHub Copilot via GitHub device flow
                                  (TTY required)
  order                           Manage per-agent auth profile order overrides
 [32mâœ“[39m src/cli/models-cli.test.ts [2m([22m[2m4 tests[22m[2m)[22m[33m 20354[2mms[22m[39m
     [33m[2mâœ“[22m[39m registers github-copilot login command [33m 20288[2mms[22m[39m
 [32mâœ“[39m extensions/nostr/src/nostr-state-store.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 106[2mms[22m[39m
 [32mâœ“[39m extensions/msteams/src/conversation-store-fs.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 107[2mms[22m[39m
 [32mâœ“[39m extensions/msteams/src/policy.test.ts [2m([22m[2m15 tests[22m[2m)[22m[32m 126[2mms[22m[39m
 [32mâœ“[39m extensions/googlechat/src/api.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 93[2mms[22m[39m
 [32mâœ“[39m extensions/bluebubbles/src/targets.test.ts [2m([22m[2m24 tests[22m[2m)[22m[32m 117[2mms[22m[39m
[90mstdout[2m | extensions/voice-call/src/manager.test.ts[2m > [22m[2mCallManager[2m > [22m[2mupgrades providerCallId mapping when provider ID changes
[22m[39m[voice-call] Starting max duration timer (300s) for call a7b5fe75-1f05-489c-a097-7412c3246350

[90mstdout[2m | extensions/voice-call/src/manager.test.ts[2m > [22m[2mCallManager[2m > [22m[2mspeaks initial message on answered for notify mode (non-Twilio)
[22m[39m[voice-call] Using inline TwiML for notify mode (voice: Polly.Joanna)

[90mstdout[2m | extensions/voice-call/src/manager.test.ts[2m > [22m[2mCallManager[2m > [22m[2mspeaks initial message on answered for notify mode (non-Twilio)
[22m[39m[voice-call] Starting max duration timer (300s) for call 105f92fa-f971-4738-8b1f-3cbb708ca312
[voice-call] Speaking initial message for call 105f92fa-f971-4738-8b1f-3cbb708ca312 (mode: notify)

[90mstdout[2m | extensions/voice-call/src/manager.test.ts[2m > [22m[2mCallManager[2m > [22m[2mspeaks initial message on answered for notify mode (non-Twilio)
[22m[39m[voice-call] Notify mode: auto-hangup in 3s for call 105f92fa-f971-4738-8b1f-3cbb708ca312

[90mstdout[2m | extensions/voice-call/src/manager.test.ts[2m > [22m[2mCallManager[2m > [22m[2mrejects inbound calls with missing caller ID when allowlist enabled
[22m[39m[voice-call] Inbound call rejected: missing caller ID

[90mstdout[2m | extensions/voice-call/src/manager.test.ts[2m > [22m[2mCallManager[2m > [22m[2mrejects inbound calls that only match allowlist suffixes
[22m[39m[voice-call] Inbound call rejected: +99915550001234 not in allowlist

[90mstdout[2m | extensions/voice-call/src/manager.test.ts[2m > [22m[2mCallManager[2m > [22m[2maccepts inbound calls that exactly match the allowlist
[22m[39m[voice-call] Inbound call accepted: +15550001234 is in allowlist
[voice-call] Created inbound call record: 14efb3a9-1a19-40d1-b772-a09a5e31586e from +15550001234

 [32mâœ“[39m extensions/voice-call/src/manager.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 131[2mms[22m[39m
[90mstdout[2m | src/telegram/bot.media.includes-location-text-ctx-fields-pins.test.ts[2m > [22m[2mtelegram inbound media[2m > [22m[2mincludes location text and ctx fields for pins
[22m[39m[34m[telegram][39m [36mautoSelectFamily=false (default-node22)[39m

 [32mâœ“[39m src/telegram/bot.media.includes-location-text-ctx-fields-pins.test.ts [2m([22m[2m2 tests[22m[2m)[22m[33m 15923[2mms[22m[39m
     [33m[2mâœ“[22m[39m includes location text and ctx fields for pins [33m 15888[2mms[22m[39m
 [32mâœ“[39m extensions/nostr/src/channel.test.ts [2m([22m[2m21 tests[22m[2m)[22m[32m 108[2mms[22m[39m
 [32mâœ“[39m extensions/twitch/src/access-control.test.ts [2m([22m[2m31 tests[22m[2m)[22m[32m 118[2mms[22m[39m
 [32mâœ“[39m src/config/config.nix-integration-u3-u5-u9.test.ts [2m([22m[2m17 tests[22m[2m)[22m[33m 21396[2mms[22m[39m
       [33m[2mâœ“[22m[39m isNixMode is false when OPENCLAW_NIX_MODE is not set [33m 1483[2mms[22m[39m
       [33m[2mâœ“[22m[39m isNixMode is false when OPENCLAW_NIX_MODE is empty [33m 1397[2mms[22m[39m
       [33m[2mâœ“[22m[39m isNixMode is false when OPENCLAW_NIX_MODE is not '1' [33m 1290[2mms[22m[39m
       [33m[2mâœ“[22m[39m isNixMode is true when OPENCLAW_NIX_MODE=1 [33m 1306[2mms[22m[39m
       [33m[2mâœ“[22m[39m STATE_DIR defaults to ~/.openclaw when env not set [33m 1203[2mms[22m[39m
       [33m[2mâœ“[22m[39m STATE_DIR respects OPENCLAW_STATE_DIR override [33m 1274[2mms[22m[39m
       [33m[2mâœ“[22m[39m CONFIG_PATH defaults to ~/.openclaw/openclaw.json when env not set [33m 1256[2mms[22m[39m
       [33m[2mâœ“[22m[39m CONFIG_PATH respects OPENCLAW_CONFIG_PATH override [33m 1276[2mms[22m[39m
       [33m[2mâœ“[22m[39m CONFIG_PATH expands ~ in OPENCLAW_CONFIG_PATH override [33m 1067[2mms[22m[39m
       [33m[2mâœ“[22m[39m CONFIG_PATH uses STATE_DIR when only state dir is overridden [33m 1487[2mms[22m[39m
       [33m[2mâœ“[22m[39m expands ~ in common path-ish config fields [33m 1482[2mms[22m[39m
       [33m[2mâœ“[22m[39m uses default when env and config are unset [33m 1154[2mms[22m[39m
       [33m[2mâœ“[22m[39m prefers OPENCLAW_GATEWAY_PORT over config [33m 1056[2mms[22m[39m
       [33m[2mâœ“[22m[39m falls back to config when env is invalid [33m 1069[2mms[22m[39m
       [33m[2mâœ“[22m[39m accepts config with only botToken [33m 1229[2mms[22m[39m
       [33m[2mâœ“[22m[39m accepts config with only tokenFile [33m 1025[2mms[22m[39m
       [33m[2mâœ“[22m[39m accepts config with both botToken and tokenFile [33m 1338[2mms[22m[39m
 [32mâœ“[39m extensions/twitch/src/token.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 77[2mms[22m[39m
[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mcreates memory file with session content on /new command
[22m[39m[session-memory] Hook triggered for /new command

[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mcreates memory file with session content on /new command
[22m[39m[session-memory] Current sessionId: test-123
[session-memory] Current sessionFile: /tmp/openclaw-session-memory-p7kozX/sessions/test-session.jsonl
[session-memory] cfg present: [33mtrue[39m

[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mcreates memory file with session content on /new command
[22m[39m[session-memory] sessionContent length: [33m91[39m
[session-memory] Calling generateSlugViaLLM...

 [32mâœ“[39m extensions/twitch/src/config.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 60[2mms[22m[39m
 [32mâœ“[39m extensions/zalouser/src/status-issues.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 76[2mms[22m[39m
 [32mâœ“[39m extensions/matrix/src/matrix/accounts.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 62[2mms[22m[39m
 [32mâœ“[39m extensions/tlon/src/config-schema.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 45[2mms[22m[39m
 [32mâœ“[39m extensions/msteams/src/errors.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 52[2mms[22m[39m
â€‰ELIFECYCLEâ€‰ Test failed. See above for more details.
