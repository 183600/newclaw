
> openclaw@2026.2.2 test /home/runner/work/newclaw/newclaw
> node scripts/test-parallel.mjs


[1m[46m RUN [49m[22m [36mv4.0.18 [39m[90m/home/runner/work/newclaw/newclaw[39m


[1m[46m RUN [49m[22m [36mv4.0.18 [39m[90m/home/runner/work/newclaw/newclaw[39m

[90mstdout[2m | src/telegram/bot.media.downloads-media-file-path-no-file-download.test.ts[2m > [22m[2mtelegram inbound media[2m > [22m[2mdownloads media via file_path (no file.download)
[22m[39m[34m[telegram][39m [36mautoSelectFamily=false (default-node22)[39m

 [32mâœ“[39m extensions/memory-lancedb/index.test.ts [2m([22m[2m7 tests[22m[2m | [22m[33m1 skipped[39m[2m)[22m[33m 35692[2mms[22m[39m
     [33m[2mâœ“[22m[39m memory plugin registers and initializes correctly [33m 35614[2mms[22m[39m
 [32mâœ“[39m extensions/twitch/src/onboarding.test.ts [2m([22m[2m15 tests[22m[2m)[22m[33m 35726[2mms[22m[39m
       [33m[2mâœ“[22m[39m should return existing token when user confirms to keep it [33m 35662[2mms[22m[39m
 [32mâœ“[39m src/telegram/bot.media.downloads-media-file-path-no-file-download.test.ts [2m([22m[2m10 tests[22m[2m)[22m[33m 34650[2mms[22m[39m
     [33m[2mâœ“[22m[39m downloads media via file_path (no file.download) [33m 31675[2mms[22m[39m
     [33m[2mâœ“[22m[39m prefers proxyFetch over global fetch [33m 309[2mms[22m[39m
     [33m[2mâœ“[22m[39m logs a handler error when getFile returns no file_path [33m 304[2mms[22m[39m
     [33m[2mâœ“[22m[39m buffers messages with same media_group_id and processes them together [33m 375[2mms[22m[39m
     [33m[2mâœ“[22m[39m downloads static sticker (WEBP) and includes sticker metadata [33m 346[2mms[22m[39m
     [33m[2mâœ“[22m[39m skips animated stickers (TGS format) [33m 339[2mms[22m[39m
     [33m[2mâœ“[22m[39m skips video stickers (WEBM format) [33m 380[2mms[22m[39m
     [33m[2mâœ“[22m[39m buffers near-limit text and processes sequential parts as one message [33m 418[2mms[22m[39m
 [32mâœ“[39m extensions/nostr/src/nostr-profile.fuzz.test.ts [2m([22m[2m51 tests[22m[2m)[22m[33m 2479[2mms[22m[39m
     [33m[2mâœ“[22m[39m handles rapid sequential events with monotonic timestamps [33m 2051[2mms[22m[39m
 [32mâœ“[39m src/cli/gateway-cli.coverage.test.ts [2m([22m[2m9 tests[22m[2m)[22m[33m 37132[2mms[22m[39m
     [33m[2mâœ“[22m[39m registers call/health commands and routes to callGateway [33m 34463[2mms[22m[39m
     [33m[2mâœ“[22m[39m prints stop hints on GatewayLockError when service is loaded [33m 303[2mms[22m[39m
     [33m[2mâœ“[22m[39m uses env/config port when --port is omitted [33m 2231[2mms[22m[39m
 [32mâœ“[39m extensions/lobster/src/lobster-tool.test.ts [2m([22m[2m9 tests[22m[2m)[22m[33m 739[2mms[22m[39m
 [32mâœ“[39m extensions/matrix/src/matrix/send.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 627[2mms[22m[39m
[90mstderr[2m | extensions/bluebubbles/src/monitor.test.ts[2m > [22m[2mBlueBubbles webhook monitor[2m > [22m[2mwebhook parsing + auth handling[2m > [22m[2mrejects requests with invalid JSON
[22m[39m[bluebubbles] webhook rejected: invalid json

[90mstderr[2m | extensions/bluebubbles/src/monitor.test.ts[2m > [22m[2mBlueBubbles webhook monitor[2m > [22m[2mwebhook parsing + auth handling[2m > [22m[2mrejects unauthorized requests with wrong password
[22m[39m[bluebubbles] webhook rejected: unauthorized guid=wr***en

 [32mâœ“[39m extensions/bluebubbles/src/monitor.test.ts [2m([22m[2m50 tests[22m[2m)[22m[33m 785[2mms[22m[39m
 [32mâœ“[39m src/config/config.legacy-config-detection.accepts-imessage-dmpolicy.test.ts [2m([22m[2m23 tests[22m[2m)[22m[33m 13612[2mms[22m[39m
     [33m[2mâœ“[22m[39m accepts imessage.dmPolicy="open" with allowFrom "*" [33m 632[2mms[22m[39m
     [33m[2mâœ“[22m[39m defaults imessage.dmPolicy to pairing when imessage section exists [33m 759[2mms[22m[39m
     [33m[2mâœ“[22m[39m defaults imessage.groupPolicy to allowlist when imessage section exists [33m 553[2mms[22m[39m
     [33m[2mâœ“[22m[39m defaults discord.groupPolicy to allowlist when discord section exists [33m 685[2mms[22m[39m
     [33m[2mâœ“[22m[39m defaults slack.groupPolicy to allowlist when slack section exists [33m 586[2mms[22m[39m
     [33m[2mâœ“[22m[39m defaults msteams.groupPolicy to allowlist when msteams section exists [33m 743[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects unsafe executable config values [33m 664[2mms[22m[39m
     [33m[2mâœ“[22m[39m accepts tools audio transcription without cli [33m 555[2mms[22m[39m
     [33m[2mâœ“[22m[39m accepts path-like executable values with spaces [33m 645[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects discord.dm.policy="open" without allowFrom "*" [33m 397[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects slack.dm.policy="open" without allowFrom "*" [33m 629[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects legacy agent.model string [33m 722[2mms[22m[39m
     [33m[2mâœ“[22m[39m migrates telegram.requireMention to channels.telegram.groups.*.requireMention [33m 614[2mms[22m[39m
     [33m[2mâœ“[22m[39m migrates messages.tts.enabled to messages.tts.auto [33m 556[2mms[22m[39m
     [33m[2mâœ“[22m[39m migrates legacy model config to agent.models + model lists [33m 568[2mms[22m[39m
     [33m[2mâœ“[22m[39m flags legacy config in snapshot [33m 459[2mms[22m[39m
     [33m[2mâœ“[22m[39m does not auto-migrate claude-cli auth profile mode on load [33m 506[2mms[22m[39m
     [33m[2mâœ“[22m[39m flags legacy provider sections in snapshot [33m 500[2mms[22m[39m
     [33m[2mâœ“[22m[39m flags routing.allowFrom in snapshot [33m 567[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects bindings[].match.provider on load [33m 584[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects bindings[].match.accountID on load [33m 841[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects session.sendPolicy.rules[].match.provider on load [33m 426[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects messages.queue.byProvider on load [33m 417[2mms[22m[39m
 [32mâœ“[39m extensions/llm-task/src/llm-task-tool.test.ts [2m([22m[2m8 tests[22m[2m)[22m[33m 306[2mms[22m[39m
 [32mâœ“[39m extensions/nostr/src/nostr-profile.test.ts [2m([22m[2m31 tests[22m[2m)[22m[33m 477[2mms[22m[39m
 [32mâœ“[39m extensions/nostr/src/nostr-bus.test.ts [2m([22m[2m32 tests[22m[2m)[22m[33m 348[2mms[22m[39m
 [32mâœ“[39m src/config/config.legacy-config-detection.rejects-routing-allowfrom.test.ts [2m([22m[2m30 tests[22m[2m)[22m[33m 18635[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects routing.allowFrom [33m 634[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects routing.groupChat.requireMention [33m 649[2mms[22m[39m
     [33m[2mâœ“[22m[39m migrates routing.allowFrom to channels.whatsapp.allowFrom when whatsapp configured [33m 930[2mms[22m[39m
     [33m[2mâœ“[22m[39m drops routing.allowFrom when whatsapp missing [33m 959[2mms[22m[39m
     [33m[2mâœ“[22m[39m migrates routing.groupChat.requireMention to channels whatsapp/telegram/imessage groups when whatsapp configured [33m 694[2mms[22m[39m
     [33m[2mâœ“[22m[39m migrates routing.groupChat.requireMention to telegram/imessage when whatsapp missing [33m 571[2mms[22m[39m
     [33m[2mâœ“[22m[39m migrates routing.groupChat.mentionPatterns to messages.groupChat.mentionPatterns [33m 819[2mms[22m[39m
     [33m[2mâœ“[22m[39m migrates routing agentToAgent/queue/transcribeAudio to tools/messages/media [33m 719[2mms[22m[39m
     [33m[2mâœ“[22m[39m migrates agent config into agents.defaults and tools [33m 689[2mms[22m[39m
     [33m[2mâœ“[22m[39m migrates tools.bash to tools.exec [33m 585[2mms[22m[39m
     [33m[2mâœ“[22m[39m accepts per-agent tools.elevated overrides [33m 603[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects telegram.requireMention [33m 512[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects gateway.token [33m 595[2mms[22m[39m
     [33m[2mâœ“[22m[39m migrates gateway.token to gateway.auth.token [33m 558[2mms[22m[39m
     [33m[2mâœ“[22m[39m keeps gateway.bind tailnet [33m 529[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects telegram.dmPolicy="open" without allowFrom "*" [33m 647[2mms[22m[39m
     [33m[2mâœ“[22m[39m accepts telegram.dmPolicy="open" with allowFrom "*" [33m 549[2mms[22m[39m
     [33m[2mâœ“[22m[39m defaults telegram.dmPolicy to pairing when telegram section exists [33m 606[2mms[22m[39m
     [33m[2mâœ“[22m[39m defaults telegram.groupPolicy to allowlist when telegram section exists [33m 560[2mms[22m[39m
     [33m[2mâœ“[22m[39m defaults telegram.streamMode to partial when telegram section exists [33m 513[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects whatsapp.dmPolicy="open" without allowFrom "*" [33m 546[2mms[22m[39m
     [33m[2mâœ“[22m[39m accepts whatsapp.dmPolicy="open" with allowFrom "*" [33m 564[2mms[22m[39m
     [33m[2mâœ“[22m[39m defaults whatsapp.dmPolicy to pairing when whatsapp section exists [33m 587[2mms[22m[39m
     [33m[2mâœ“[22m[39m defaults whatsapp.groupPolicy to allowlist when whatsapp section exists [33m 498[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects signal.dmPolicy="open" without allowFrom "*" [33m 565[2mms[22m[39m
     [33m[2mâœ“[22m[39m accepts signal.dmPolicy="open" with allowFrom "*" [33m 671[2mms[22m[39m
     [33m[2mâœ“[22m[39m defaults signal.dmPolicy to pairing when signal section exists [33m 451[2mms[22m[39m
     [33m[2mâœ“[22m[39m defaults signal.groupPolicy to allowlist when signal section exists [33m 576[2mms[22m[39m
     [33m[2mâœ“[22m[39m accepts historyLimit overrides per provider and account [33m 665[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects imessage.dmPolicy="open" without allowFrom "*" [33m 578[2mms[22m[39m
 [32mâœ“[39m extensions/msteams/src/attachments.test.ts [2m([22m[2m19 tests[22m[2m)[22m[32m 254[2mms[22m[39m
 [32mâœ“[39m extensions/twitch/src/probe.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 162[2mms[22m[39m
 [32mâœ“[39m src/commands/onboard-non-interactive.gateway.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 13927[2mms[22m[39m
     [33m[2mâœ“[22m[39m writes gateway token auth into config and gateway enforces it [33m 11535[2mms[22m[39m
     [33m[2mâœ“[22m[39m auto-generates token auth when binding LAN and persists the token [33m 2314[2mms[22m[39m
 [32mâœ“[39m extensions/nostr/src/types.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 290[2mms[22m[39m
 [32mâœ“[39m extensions/nostr/src/nostr-bus.fuzz.test.ts [2m([22m[2m76 tests[22m[2m)[22m[32m 247[2mms[22m[39m
[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mcompresses common formats to jpeg under the cap
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mcompresses common formats to jpeg under the cap
[22m[39m[35m[whatsapp][39m [36mInbound message +1 -> +2 (undefined, 30 chars)[39m

 [32mâœ“[39m extensions/zalo/src/monitor.webhook.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 173[2mms[22m[39m
 [32mâœ“[39m extensions/bluebubbles/src/reactions.test.ts [2m([22m[2m46 tests[22m[2m)[22m[32m 145[2mms[22m[39m
[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mcompresses common formats to jpeg under the cap
[22m[39m[35m[whatsapp][39m [36mSent media reply to +1 (0.74MB)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mcompresses common formats to jpeg under the cap
[22m[39m[35m[whatsapp][39m [36mAuto-replied to +1 (media)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mcompresses common formats to jpeg under the cap
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mcompresses common formats to jpeg under the cap
[22m[39m[35m[whatsapp][39m [36mInbound message +1 -> +2 (undefined, 30 chars)[39m

 [32mâœ“[39m extensions/google-gemini-cli-auth/oauth.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 135[2mms[22m[39m
[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mcompresses common formats to jpeg under the cap
[22m[39m[35m[whatsapp][39m [36mSent media reply to +1 (0.69MB)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mcompresses common formats to jpeg under the cap
[22m[39m[35m[whatsapp][39m [36mAuto-replied to +1 (media)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mcompresses common formats to jpeg under the cap
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mcompresses common formats to jpeg under the cap
[22m[39m[35m[whatsapp][39m [36mInbound message +1 -> +2 (undefined, 30 chars)[39m

 [32mâœ“[39m extensions/nostr/src/nostr-bus.integration.test.ts [2m([22m[2m26 tests[22m[2m)[22m[32m 123[2mms[22m[39m
 [32mâœ“[39m src/config/config.nix-integration-u3-u5-u9.test.ts [2m([22m[2m17 tests[22m[2m)[22m[33m 11124[2mms[22m[39m
       [33m[2mâœ“[22m[39m isNixMode is false when OPENCLAW_NIX_MODE is not set [33m 523[2mms[22m[39m
       [33m[2mâœ“[22m[39m isNixMode is false when OPENCLAW_NIX_MODE is empty [33m 615[2mms[22m[39m
       [33m[2mâœ“[22m[39m isNixMode is false when OPENCLAW_NIX_MODE is not '1' [33m 689[2mms[22m[39m
       [33m[2mâœ“[22m[39m isNixMode is true when OPENCLAW_NIX_MODE=1 [33m 475[2mms[22m[39m
       [33m[2mâœ“[22m[39m STATE_DIR defaults to ~/.openclaw when env not set [33m 515[2mms[22m[39m
       [33m[2mâœ“[22m[39m STATE_DIR respects OPENCLAW_STATE_DIR override [33m 685[2mms[22m[39m
       [33m[2mâœ“[22m[39m CONFIG_PATH defaults to ~/.openclaw/openclaw.json when env not set [33m 651[2mms[22m[39m
       [33m[2mâœ“[22m[39m CONFIG_PATH respects OPENCLAW_CONFIG_PATH override [33m 724[2mms[22m[39m
       [33m[2mâœ“[22m[39m CONFIG_PATH expands ~ in OPENCLAW_CONFIG_PATH override [33m 738[2mms[22m[39m
       [33m[2mâœ“[22m[39m CONFIG_PATH uses STATE_DIR when only state dir is overridden [33m 590[2mms[22m[39m
       [33m[2mâœ“[22m[39m expands ~ in common path-ish config fields [33m 1089[2mms[22m[39m
       [33m[2mâœ“[22m[39m uses default when env and config are unset [33m 604[2mms[22m[39m
       [33m[2mâœ“[22m[39m prefers OPENCLAW_GATEWAY_PORT over config [33m 674[2mms[22m[39m
       [33m[2mâœ“[22m[39m falls back to config when env is invalid [33m 415[2mms[22m[39m
       [33m[2mâœ“[22m[39m accepts config with only botToken [33m 673[2mms[22m[39m
       [33m[2mâœ“[22m[39m accepts config with only tokenFile [33m 705[2mms[22m[39m
       [33m[2mâœ“[22m[39m accepts config with both botToken and tokenFile [33m 755[2mms[22m[39m
[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mcompresses common formats to jpeg under the cap
[22m[39m[35m[whatsapp][39m [36mSent media reply to +1 (0.69MB)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mcompresses common formats to jpeg under the cap
[22m[39m[35m[whatsapp][39m [36mAuto-replied to +1 (media)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mhonors mediaMaxMb from config
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mhonors mediaMaxMb from config
[22m[39m[35m[whatsapp][39m [36mInbound message +1 -> +2 (undefined, 30 chars)[39m

 [32mâœ“[39m extensions/bluebubbles/src/actions.test.ts [2m([22m[2m27 tests[22m[2m)[22m[32m 191[2mms[22m[39m
[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mhonors mediaMaxMb from config
[22m[39m[35m[whatsapp][39m [36mSent media reply to +1 (0.01MB)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mhonors mediaMaxMb from config
[22m[39m[35m[whatsapp][39m [36mAuto-replied to +1 (media)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mfalls back to text when media is unsupported
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mfalls back to text when media is unsupported
[22m[39m[35m[whatsapp][39m [36mInbound message +1 -> +2 (undefined, 19 chars)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mfalls back to text when media is unsupported
[22m[39m[35m[whatsapp][39m [36mSent media reply to +1 (0.01MB)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mfalls back to text when media is unsupported
[22m[39m[35m[whatsapp][39m [36mAuto-replied to +1 (media)[39m

 [32mâœ“[39m src/web/auto-reply.web-auto-reply.compresses-common-formats-jpeg-cap.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 16441[2mms[22m[39m
     [33m[2mâœ“[22m[39m compresses common formats to jpeg under the cap [33m 14860[2mms[22m[39m
     [33m[2mâœ“[22m[39m honors mediaMaxMb from config [33m 1529[2mms[22m[39m
 [32mâœ“[39m extensions/twitch/src/twitch-client.test.ts [2m([22m[2m30 tests[22m[2m)[22m[32m 181[2mms[22m[39m
 [32mâœ“[39m extensions/nostr/src/nostr-profile-http.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 124[2mms[22m[39m
 [32mâœ“[39m extensions/bluebubbles/src/chat.test.ts [2m([22m[2m31 tests[22m[2m)[22m[32m 112[2mms[22m[39m
 [32mâœ“[39m extensions/msteams/src/polls.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 100[2mms[22m[39m
[90mstderr[2m | extensions/voice-call/src/webhook-security.test.ts[2m > [22m[2mverifyTwilioWebhook[2m > [22m[2mallows invalid signatures for ngrok free tier only on loopback
[22m[39m[voice-call] Twilio signature validation failed (ngrok free tier compatibility, loopback only)

 [32mâœ“[39m extensions/voice-call/src/webhook-security.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 102[2mms[22m[39m
[90mstderr[2m | src/agents/pi-embedded-runner.test.ts[2m > [22m[2mrunEmbeddedPiAgent[2m > [22m[2mpersists the first user message before assistant output
[22m[39m[33m[agent/embedded][39m [33mlow context window: openai/mock-1 ctx=16000 (warn<32000) source=modelsConfig[39m

[90mstderr[2m | src/agents/pi-embedded-runner.test.ts[2m > [22m[2mrunEmbeddedPiAgent[2m > [22m[2mpersists the user message when prompt fails before assistant output
[22m[39m[33m[agent/embedded][39m [33mlow context window: openai/mock-error ctx=16000 (warn<32000) source=modelsConfig[39m

[90mstdout[2m | extensions/voice-call/src/manager.test.ts[2m > [22m[2mCallManager[2m > [22m[2mupgrades providerCallId mapping when provider ID changes
[22m[39m[voice-call] Starting max duration timer (300s) for call 15d926ca-3b85-4256-a2e1-ad408b459d19

[90mstdout[2m | extensions/voice-call/src/manager.test.ts[2m > [22m[2mCallManager[2m > [22m[2mspeaks initial message on answered for notify mode (non-Twilio)
[22m[39m[voice-call] Using inline TwiML for notify mode (voice: Polly.Joanna)

[90mstdout[2m | extensions/voice-call/src/manager.test.ts[2m > [22m[2mCallManager[2m > [22m[2mspeaks initial message on answered for notify mode (non-Twilio)
[22m[39m[voice-call] Starting max duration timer (300s) for call f6649305-c8d4-44d3-9d0b-047485f3774d
[voice-call] Speaking initial message for call f6649305-c8d4-44d3-9d0b-047485f3774d (mode: notify)

[90mstdout[2m | extensions/voice-call/src/manager.test.ts[2m > [22m[2mCallManager[2m > [22m[2mspeaks initial message on answered for notify mode (non-Twilio)
[22m[39m[voice-call] Notify mode: auto-hangup in 3s for call f6649305-c8d4-44d3-9d0b-047485f3774d

[90mstdout[2m | extensions/voice-call/src/manager.test.ts[2m > [22m[2mCallManager[2m > [22m[2mrejects inbound calls with missing caller ID when allowlist enabled
[22m[39m[voice-call] Inbound call rejected: missing caller ID

[90mstdout[2m | extensions/voice-call/src/manager.test.ts[2m > [22m[2mCallManager[2m > [22m[2mrejects inbound calls that only match allowlist suffixes
[22m[39m[voice-call] Inbound call rejected: +99915550001234 not in allowlist

[90mstdout[2m | extensions/voice-call/src/manager.test.ts[2m > [22m[2mCallManager[2m > [22m[2maccepts inbound calls that exactly match the allowlist
[22m[39m[voice-call] Inbound call accepted: +15550001234 is in allowlist
[voice-call] Created inbound call record: c563a674-dfb8-4e9f-ac87-460ed480f936 from +15550001234

 [32mâœ“[39m extensions/voice-call/src/manager.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 97[2mms[22m[39m
[90mstderr[2m | src/agents/pi-embedded-runner.test.ts[2m > [22m[2mrunEmbeddedPiAgent[2m > [22m[2mappends new user + assistant after existing transcript entries
[22m[39m[33m[agent/embedded][39m [33mlow context window: openai/mock-1 ctx=16000 (warn<32000) source=modelsConfig[39m

[90mstderr[2m | src/agents/pi-embedded-runner.test.ts[2m > [22m[2mrunEmbeddedPiAgent[2m > [22m[2mpersists multi-turn user/assistant ordering across runs
[22m[39m[33m[agent/embedded][39m [33mlow context window: openai/mock-1 ctx=16000 (warn<32000) source=modelsConfig[39m

[90mstderr[2m | src/agents/pi-embedded-runner.test.ts[2m > [22m[2mrunEmbeddedPiAgent[2m > [22m[2mpersists multi-turn user/assistant ordering across runs
[22m[39m[33m[agent/embedded][39m [33mlow context window: openai/mock-1 ctx=16000 (warn<32000) source=modelsConfig[39m

[90mstderr[2m | src/agents/pi-embedded-runner.test.ts[2m > [22m[2mrunEmbeddedPiAgent[2m > [22m[2mrepairs orphaned user messages and continues
[22m[39m[33m[agent/embedded][39m [33mlow context window: openai/mock-1 ctx=16000 (warn<32000) source=modelsConfig[39m

[90mstderr[2m | src/agents/pi-embedded-runner.test.ts[2m > [22m[2mrunEmbeddedPiAgent[2m > [22m[2mrepairs orphaned single-user sessions and continues
[22m[39m[33m[agent/embedded][39m [33mlow context window: openai/mock-1 ctx=16000 (warn<32000) source=modelsConfig[39m

 [32mâœ“[39m src/agents/pi-embedded-runner.test.ts [2m([22m[2m7 tests[22m[2m)[22m[33m 11694[2mms[22m[39m
     [33m[2mâœ“[22m[39m persists the first user message before assistant output [33m 1562[2mms[22m[39m
     [33m[2mâœ“[22m[39m persists the user message when prompt fails before assistant output [33m 618[2mms[22m[39m
     [33m[2mâœ“[22m[39m appends new user + assistant after existing transcript entries [33m 698[2mms[22m[39m
     [33m[2mâœ“[22m[39m persists multi-turn user/assistant ordering across runs [33m 1316[2mms[22m[39m
     [33m[2mâœ“[22m[39m repairs orphaned user messages and continues [33m 512[2mms[22m[39m
     [33m[2mâœ“[22m[39m repairs orphaned single-user sessions and continues [33m 681[2mms[22m[39m
 [32mâœ“[39m extensions/matrix/src/matrix/monitor/media.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 38[2mms[22m[39m
 [32mâœ“[39m src/plugins/install.test.ts [2m([22m[2m7 tests[22m[2m)[22m[33m 12547[2mms[22m[39m
     [33m[2mâœ“[22m[39m installs into ~/.openclaw/extensions and uses unscoped id [33m 1866[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects installing when plugin already exists [33m 2059[2mms[22m[39m
     [33m[2mâœ“[22m[39m allows updates when mode is update [33m 3581[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects traversal-like plugin names [33m 1713[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects reserved plugin ids [33m 1725[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects packages without openclaw.extensions [33m 1516[2mms[22m[39m
 [32mâœ“[39m extensions/nostr/src/nostr-profile-import.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 35[2mms[22m[39m
 [32mâœ“[39m extensions/msteams/src/file-consent-helpers.test.ts [2m([22m[2m16 tests[22m[2m)[22m[32m 60[2mms[22m[39m
 [32mâœ“[39m extensions/line/src/channel.sendPayload.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 82[2mms[22m[39m
 [32mâœ“[39m extensions/msteams/src/polls-store.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 91[2mms[22m[39m
 [32mâœ“[39m extensions/bluebubbles/src/send.test.ts [2m([22m[2m30 tests[22m[2m)[22m[32m 159[2mms[22m[39m
 [32mâœ“[39m src/signal/monitor.event-handler.typing-read-receipts.test.ts [2m([22m[2m1 test[22m[2m)[22m[33m 11853[2mms[22m[39m
     [33m[2mâœ“[22m[39m sends typing + read receipt for allowed DMs [33m 11840[2mms[22m[39m
Usage: program models auth [options] [command]

Manage model auth profiles

Options:
  --agent <id>                    Agent id for auth order get/set/clear
  -h, --help                      display help for command

Commands:
  add                             Interactive auth helper (setup-token or paste
                                  token)
  login [options]                 Run a provider plugin auth flow (OAuth/API
                                  key)
  setup-token [options]           Run a provider CLI to create/sync a token (TTY
                                  required)
  paste-token [options]           Paste a token into auth-profiles.json and
                                  update config
  login-github-copilot [options]  Login to GitHub Copilot via GitHub device flow
                                  (TTY required)
  order                           Manage per-agent auth profile order overrides
 [32mâœ“[39m src/cli/models-cli.test.ts [2m([22m[2m4 tests[22m[2m)[22m[33m 12469[2mms[22m[39m
     [33m[2mâœ“[22m[39m registers github-copilot login command [33m 12403[2mms[22m[39m
 [32mâœ“[39m extensions/msteams/src/policy.test.ts [2m([22m[2m15 tests[22m[2m)[22m[32m 62[2mms[22m[39m
 [32mâœ“[39m extensions/msteams/src/media-helpers.test.ts [2m([22m[2m36 tests[22m[2m)[22m[32m 78[2mms[22m[39m
 [32mâœ“[39m extensions/line/src/channel.logout.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 52[2mms[22m[39m
 [32mâœ“[39m extensions/nostr/src/nostr-state-store.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 80[2mms[22m[39m
 [32mâœ“[39m src/signal/monitor.event-handler.sender-prefix.test.ts [2m([22m[2m1 test[22m[2m)[22m[33m 11035[2mms[22m[39m
     [33m[2mâœ“[22m[39m prefixes group bodies with sender label [33m 11026[2mms[22m[39m
 [32mâœ“[39m extensions/bluebubbles/src/attachments.test.ts [2m([22m[2m18 tests[22m[2m)[22m[32m 105[2mms[22m[39m
 [32mâœ“[39m extensions/twitch/src/send.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 66[2mms[22m[39m
[90mstderr[2m | src/agents/pi-embedded-runner.run-embedded-pi-agent.auth-profile-rotation.test.ts[2m > [22m[2mrunEmbeddedPiAgent auth profile rotation[2m > [22m[2mrotates for auto-pinned profiles
[22m[39m[33m[agent/embedded][39m [33mlow context window: openai/mock-1 ctx=16000 (warn<32000) source=modelsConfig[39m

[90mstderr[2m | src/agents/pi-embedded-runner.run-embedded-pi-agent.auth-profile-rotation.test.ts[2m > [22m[2mrunEmbeddedPiAgent auth profile rotation[2m > [22m[2mdoes not rotate for user-pinned profiles
[22m[39m[33m[agent/embedded][39m [33mlow context window: openai/mock-1 ctx=16000 (warn<32000) source=modelsConfig[39m

[90mstderr[2m | src/agents/pi-embedded-runner.run-embedded-pi-agent.auth-profile-rotation.test.ts[2m > [22m[2mrunEmbeddedPiAgent auth profile rotation[2m > [22m[2mhonors user-pinned profiles even when in cooldown
[22m[39m[33m[agent/embedded][39m [33mlow context window: openai/mock-1 ctx=16000 (warn<32000) source=modelsConfig[39m

[90mstderr[2m | src/agents/pi-embedded-runner.run-embedded-pi-agent.auth-profile-rotation.test.ts[2m > [22m[2mrunEmbeddedPiAgent auth profile rotation[2m > [22m[2mignores user-locked profile when provider mismatches
[22m[39m[33m[agent/embedded][39m [33mlow context window: openai/mock-1 ctx=16000 (warn<32000) source=modelsConfig[39m

[90mstderr[2m | src/agents/pi-embedded-runner.run-embedded-pi-agent.auth-profile-rotation.test.ts[2m > [22m[2mrunEmbeddedPiAgent auth profile rotation[2m > [22m[2mskips profiles in cooldown during initial selection
[22m[39m[33m[agent/embedded][39m [33mlow context window: openai/mock-1 ctx=16000 (warn<32000) source=modelsConfig[39m

 [32mâœ“[39m extensions/googlechat/src/api.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 74[2mms[22m[39m
[90mstderr[2m | src/agents/pi-embedded-runner.run-embedded-pi-agent.auth-profile-rotation.test.ts[2m > [22m[2mrunEmbeddedPiAgent auth profile rotation[2m > [22m[2mfails over when all profiles are in cooldown and fallbacks are configured
[22m[39m[33m[agent/embedded][39m [33mlow context window: openai/mock-1 ctx=16000 (warn<32000) source=modelsConfig[39m

[90mstderr[2m | src/agents/pi-embedded-runner.run-embedded-pi-agent.auth-profile-rotation.test.ts[2m > [22m[2mrunEmbeddedPiAgent auth profile rotation[2m > [22m[2mfails over when all profiles are in cooldown and fallbacks are configured
[22m[39m[31m[diagnostic][39m [31mlane task error: lane=main durationMs=0 error="FailoverError: No available auth profile for openai (all in cooldown or unavailable)."[39m

[90mstderr[2m | src/agents/pi-embedded-runner.run-embedded-pi-agent.auth-profile-rotation.test.ts[2m > [22m[2mrunEmbeddedPiAgent auth profile rotation[2m > [22m[2mfails over when all profiles are in cooldown and fallbacks are configured
[22m[39m[31m[diagnostic][39m [31mlane task error: lane=session:agent:test:cooldown-failover durationMs=0 error="FailoverError: No available auth profile for openai (all in cooldown or unavailable)."[39m

[90mstderr[2m | src/agents/pi-embedded-runner.run-embedded-pi-agent.auth-profile-rotation.test.ts[2m > [22m[2mrunEmbeddedPiAgent auth profile rotation[2m > [22m[2mfails over when auth is unavailable and fallbacks are configured
[22m[39m[33m[agent/embedded][39m [33mlow context window: openai/mock-1 ctx=16000 (warn<32000) source=modelsConfig[39m

[90mstderr[2m | src/agents/pi-embedded-runner.run-embedded-pi-agent.auth-profile-rotation.test.ts[2m > [22m[2mrunEmbeddedPiAgent auth profile rotation[2m > [22m[2mfails over when auth is unavailable and fallbacks are configured
[22m[39m[31m[diagnostic][39m [31mlane task error: lane=main durationMs=146 error="FailoverError: No API key found for provider "openai". Auth store: /tmp/openclaw-agent-sefmem/auth-profiles.json (agentDir: /tmp/openclaw-agent-sefmem). Configure auth for this agent (openclaw agents add <id>) or copy auth-profiles.json from the main agentDir."[39m

[90mstderr[2m | src/agents/pi-embedded-runner.run-embedded-pi-agent.auth-profile-rotation.test.ts[2m > [22m[2mrunEmbeddedPiAgent auth profile rotation[2m > [22m[2mfails over when auth is unavailable and fallbacks are configured
[22m[39m[31m[diagnostic][39m [31mlane task error: lane=session:agent:test:auth-unavailable durationMs=156 error="FailoverError: No API key found for provider "openai". Auth store: /tmp/openclaw-agent-sefmem/auth-profiles.json (agentDir: /tmp/openclaw-agent-sefmem). Configure auth for this agent (openclaw agents add <id>) or copy auth-profiles.json from the main agentDir."[39m

[90mstderr[2m | src/agents/pi-embedded-runner.run-embedded-pi-agent.auth-profile-rotation.test.ts[2m > [22m[2mrunEmbeddedPiAgent auth profile rotation[2m > [22m[2mskips profiles in cooldown when rotating after failure
[22m[39m[33m[agent/embedded][39m [33mlow context window: openai/mock-1 ctx=16000 (warn<32000) source=modelsConfig[39m

 [32mâœ“[39m src/agents/pi-embedded-runner.run-embedded-pi-agent.auth-profile-rotation.test.ts [2m([22m[2m8 tests[22m[2m)[22m[33m 12678[2mms[22m[39m
     [33m[2mâœ“[22m[39m rotates for auto-pinned profiles [33m 415[2mms[22m[39m
     [33m[2mâœ“[22m[39m does not rotate for user-pinned profiles [33m 322[2mms[22m[39m
 [32mâœ“[39m extensions/twitch/src/access-control.test.ts [2m([22m[2m31 tests[22m[2m)[22m[32m 76[2mms[22m[39m
 [32mâœ“[39m extensions/msteams/src/conversation-store-fs.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 89[2mms[22m[39m
 [32mâœ“[39m extensions/tlon/src/urbit/sse-client.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 33[2mms[22m[39m
 [32mâœ“[39m extensions/msteams/src/inbound.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 36[2mms[22m[39m
 [32mâœ“[39m extensions/matrix/src/matrix/send/targets.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 75[2mms[22m[39m
 [32mâœ“[39m extensions/twitch/src/config.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 44[2mms[22m[39m
 [32mâœ“[39m src/commands/onboard-non-interactive.token.test.ts [2m([22m[2m1 test[22m[2m)[22m[33m 12001[2mms[22m[39m
     [33m[2mâœ“[22m[39m writes token profile config and stores the token [33m 11989[2mms[22m[39m
 [32mâœ“[39m extensions/matrix/src/resolve-targets.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 22[2mms[22m[39m
 [32mâœ“[39m extensions/voice-call/src/config.test.ts [2m([22m[2m14 tests[22m[2m)[22m[32m 49[2mms[22m[39m
 [32mâœ“[39m src/commands/onboard-non-interactive.ai-gateway.test.ts [2m([22m[2m1 test[22m[2m)[22m[33m 11748[2mms[22m[39m
     [33m[2mâœ“[22m[39m stores the API key and configures the default model [33m 11738[2mms[22m[39m
 [32mâœ“[39m extensions/matrix/src/matrix/monitor/allowlist.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 40[2mms[22m[39m
 [32mâœ“[39m extensions/nostr/src/channel.test.ts [2m([22m[2m21 tests[22m[2m)[22m[32m 79[2mms[22m[39m
[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mcreates memory file with session content on /new command
[22m[39m[session-memory] Hook triggered for /new command

[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mcreates memory file with session content on /new command
[22m[39m[session-memory] Current sessionId: test-123
[session-memory] Current sessionFile: /tmp/openclaw-session-memory-DTWOSw/sessions/test-session.jsonl
[session-memory] cfg present: [33mtrue[39m

[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mcreates memory file with session content on /new command
[22m[39m[session-memory] sessionContent length: [33m91[39m
[session-memory] Calling generateSlugViaLLM...

 [32mâœ“[39m src/agents/sandbox-agent-config.agent-specific-sandbox-config.should-allow-agent-specific-docker-settings-beyond.test.ts [2m([22m[2m4 tests[22m[2m)[22m[33m 9392[2mms[22m[39m
     [33m[2mâœ“[22m[39m should allow agent-specific docker settings beyond setupCommand [33m 4895[2mms[22m[39m
     [33m[2mâœ“[22m[39m should override with agent-specific sandbox mode 'off' [33m 865[2mms[22m[39m
     [33m[2mâœ“[22m[39m should use agent-specific sandbox mode 'all' [33m 1810[2mms[22m[39m
     [33m[2mâœ“[22m[39m should use agent-specific scope [33m 1700[2mms[22m[39m
 [32mâœ“[39m extensions/twitch/src/outbound.test.ts [2m([22m[2m21 tests[22m[2m)[22m[32m 79[2mms[22m[39m
 [32mâœ“[39m extensions/diagnostics-otel/src/service.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 58[2mms[22m[39m
[90mstderr[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mcreates memory file with session content on /new command
[22m[39m[31m[diagnostic][39m [31mlane task error: lane=main durationMs=24 error="Error: No API key found for provider "anthropic". Auth store: /tmp/openclaw-test-home-7cnigI/.openclaw/agents/main/agent/auth-profiles.json (agentDir: /tmp/openclaw-test-home-7cnigI/.openclaw/agents/main/agent). Configure auth for this agent (openclaw agents add <id>) or copy auth-profiles.json from the main agentDir."[39m

[90mstderr[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mcreates memory file with session content on /new command
[22m[39m[31m[diagnostic][39m [31mlane task error: lane=session:temp:slug-generator durationMs=57 error="Error: No API key found for provider "anthropic". Auth store: /tmp/openclaw-test-home-7cnigI/.openclaw/agents/main/agent/auth-profiles.json (agentDir: /tmp/openclaw-test-home-7cnigI/.openclaw/agents/main/agent). Configure auth for this agent (openclaw agents add <id>) or copy auth-profiles.json from the main agentDir."[39m

[90mstderr[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mcreates memory file with session content on /new command
[22m[39m[llm-slug-generator] Failed to generate slug: Error: No API key found for provider "anthropic". Auth store: /tmp/openclaw-test-home-7cnigI/.openclaw/agents/main/agent/auth-profiles.json (agentDir: /tmp/openclaw-test-home-7cnigI/.openclaw/agents/main/agent). Configure auth for this agent (openclaw agents add <id>) or copy auth-profiles.json from the main agentDir.
    at resolveApiKeyForProvider [90m(/home/runner/work/newclaw/newclaw/[39msrc/agents/model-auth.ts:223:9[90m)[39m
    at getApiKeyForModel [90m(/home/runner/work/newclaw/newclaw/[39msrc/agents/model-auth.ts:375:10[90m)[39m
    at resolveApiKeyForCandidate [90m(/home/runner/work/newclaw/newclaw/[39msrc/agents/pi-embedded-runner/run.ts:215:16[90m)[39m
    at applyApiKeyInfo [90m(/home/runner/work/newclaw/newclaw/[39msrc/agents/pi-embedded-runner/run.ts:225:28[90m)[39m
    at [90m/home/runner/work/newclaw/newclaw/[39msrc/agents/pi-embedded-runner/run.ts:287:17
    at [90m/home/runner/work/newclaw/newclaw/[39msrc/process/command-queue.ts:66:26

[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mcreates memory file with session content on /new command
[22m[39m[session-memory] Generated slug: [1mnull[22m
[session-memory] Using fallback timestamp slug: 1850
[session-memory] Generated filename: 2026-02-08-1850.md
[session-memory] Full path: /tmp/openclaw-session-memory-DTWOSw/memory/2026-02-08-1850.md

[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mcreates memory file with session content on /new command
[22m[39m[session-memory] Memory file written successfully
[session-memory] Session context saved to /tmp/openclaw-session-memory-DTWOSw/memory/2026-02-08-1850.md

[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mfilters out non-message entries (tool calls, system)
[22m[39m[session-memory] Hook triggered for /new command

[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mfilters out non-message entries (tool calls, system)
[22m[39m[session-memory] Current sessionId: test-123
[session-memory] Current sessionFile: /tmp/openclaw-session-memory-BycKsH/sessions/test-session.jsonl
[session-memory] cfg present: [33mtrue[39m

[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mfilters out non-message entries (tool calls, system)
[22m[39m[session-memory] sessionContent length: [33m41[39m
[session-memory] Calling generateSlugViaLLM...

[90mstderr[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mfilters out non-message entries (tool calls, system)
[22m[39m[31m[diagnostic][39m [31mlane task error: lane=main durationMs=7 error="Error: No API key found for provider "anthropic". Auth store: /tmp/openclaw-test-home-7cnigI/.openclaw/agents/main/agent/auth-profiles.json (agentDir: /tmp/openclaw-test-home-7cnigI/.openclaw/agents/main/agent). Configure auth for this agent (openclaw agents add <id>) or copy auth-profiles.json from the main agentDir."[39m

[90mstderr[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mfilters out non-message entries (tool calls, system)
[22m[39m[31m[diagnostic][39m [31mlane task error: lane=session:temp:slug-generator durationMs=33 error="Error: No API key found for provider "anthropic". Auth store: /tmp/openclaw-test-home-7cnigI/.openclaw/agents/main/agent/auth-profiles.json (agentDir: /tmp/openclaw-test-home-7cnigI/.openclaw/agents/main/agent). Configure auth for this agent (openclaw agents add <id>) or copy auth-profiles.json from the main agentDir."[39m

[90mstderr[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mfilters out non-message entries (tool calls, system)
[22m[39m[llm-slug-generator] Failed to generate slug: Error: No API key found for provider "anthropic". Auth store: /tmp/openclaw-test-home-7cnigI/.openclaw/agents/main/agent/auth-profiles.json (agentDir: /tmp/openclaw-test-home-7cnigI/.openclaw/agents/main/agent). Configure auth for this agent (openclaw agents add <id>) or copy auth-profiles.json from the main agentDir.
    at resolveApiKeyForProvider [90m(/home/runner/work/newclaw/newclaw/[39msrc/agents/model-auth.ts:223:9[90m)[39m
    at getApiKeyForModel [90m(/home/runner/work/newclaw/newclaw/[39msrc/agents/model-auth.ts:375:10[90m)[39m
    at resolveApiKeyForCandidate [90m(/home/runner/work/newclaw/newclaw/[39msrc/agents/pi-embedded-runner/run.ts:215:16[90m)[39m
    at applyApiKeyInfo [90m(/home/runner/work/newclaw/newclaw/[39msrc/agents/pi-embedded-runner/run.ts:225:28[90m)[39m
    at [90m/home/runner/work/newclaw/newclaw/[39msrc/agents/pi-embedded-runner/run.ts:287:17
    at [90m/home/runner/work/newclaw/newclaw/[39msrc/process/command-queue.ts:66:26

[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mfilters out non-message entries (tool calls, system)
[22m[39m[session-memory] Generated slug: [1mnull[22m
[session-memory] Using fallback timestamp slug: 1850
[session-memory] Generated filename: 2026-02-08-1850.md
[session-memory] Full path: /tmp/openclaw-session-memory-BycKsH/memory/2026-02-08-1850.md

[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mfilters out non-message entries (tool calls, system)
[22m[39m[session-memory] Memory file written successfully
[session-memory] Session context saved to /tmp/openclaw-session-memory-BycKsH/memory/2026-02-08-1850.md

[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mfilters out command messages starting with /
[22m[39m[session-memory] Hook triggered for /new command

[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mfilters out command messages starting with /
[22m[39m[session-memory] Current sessionId: test-123
[session-memory] Current sessionFile: /tmp/openclaw-session-memory-d0Sm40/sessions/test-session.jsonl
[session-memory] cfg present: [33mtrue[39m

[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mfilters out command messages starting with /
[22m[39m[session-memory] sessionContent length: [33m49[39m
[session-memory] Calling generateSlugViaLLM...

[90mstderr[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mfilters out command messages starting with /
[22m[39m[31m[diagnostic][39m [31mlane task error: lane=main durationMs=14 error="Error: No API key found for provider "anthropic". Auth store: /tmp/openclaw-test-home-7cnigI/.openclaw/agents/main/agent/auth-profiles.json (agentDir: /tmp/openclaw-test-home-7cnigI/.openclaw/agents/main/agent). Configure auth for this agent (openclaw agents add <id>) or copy auth-profiles.json from the main agentDir."[39m

[90mstderr[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mfilters out command messages starting with /
[22m[39m[31m[diagnostic][39m [31mlane task error: lane=session:temp:slug-generator durationMs=40 error="Error: No API key found for provider "anthropic". Auth store: /tmp/openclaw-test-home-7cnigI/.openclaw/agents/main/agent/auth-profiles.json (agentDir: /tmp/openclaw-test-home-7cnigI/.openclaw/agents/main/agent). Configure auth for this agent (openclaw agents add <id>) or copy auth-profiles.json from the main agentDir."[39m

[90mstderr[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mfilters out command messages starting with /
[22m[39m[llm-slug-generator] Failed to generate slug: Error: No API key found for provider "anthropic". Auth store: /tmp/openclaw-test-home-7cnigI/.openclaw/agents/main/agent/auth-profiles.json (agentDir: /tmp/openclaw-test-home-7cnigI/.openclaw/agents/main/agent). Configure auth for this agent (openclaw agents add <id>) or copy auth-profiles.json from the main agentDir.
    at resolveApiKeyForProvider [90m(/home/runner/work/newclaw/newclaw/[39msrc/agents/model-auth.ts:223:9[90m)[39m
    at getApiKeyForModel [90m(/home/runner/work/newclaw/newclaw/[39msrc/agents/model-auth.ts:375:10[90m)[39m
    at resolveApiKeyForCandidate [90m(/home/runner/work/newclaw/newclaw/[39msrc/agents/pi-embedded-runner/run.ts:215:16[90m)[39m
    at applyApiKeyInfo [90m(/home/runner/work/newclaw/newclaw/[39msrc/agents/pi-embedded-runner/run.ts:225:28[90m)[39m
    at [90m/home/runner/work/newclaw/newclaw/[39msrc/agents/pi-embedded-runner/run.ts:287:17
    at [90m/home/runner/work/newclaw/newclaw/[39msrc/process/command-queue.ts:66:26

[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mfilters out command messages starting with /
[22m[39m[session-memory] Generated slug: [1mnull[22m
[session-memory] Using fallback timestamp slug: 1850
[session-memory] Generated filename: 2026-02-08-1850.md
[session-memory] Full path: /tmp/openclaw-session-memory-d0Sm40/memory/2026-02-08-1850.md

[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mfilters out command messages starting with /
[22m[39m[session-memory] Memory file written successfully
[session-memory] Session context saved to /tmp/openclaw-session-memory-d0Sm40/memory/2026-02-08-1850.md

[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mrespects custom messages config (limits to N messages)
[22m[39m[session-memory] Hook triggered for /new command

[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mrespects custom messages config (limits to N messages)
[22m[39m[session-memory] Current sessionId: test-123
[session-memory] Current sessionFile: /tmp/openclaw-session-memory-QWMEeg/sessions/test-session.jsonl
[session-memory] cfg present: [33mtrue[39m

[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mrespects custom messages config (limits to N messages)
[22m[39m[session-memory] sessionContent length: [33m48[39m
[session-memory] Calling generateSlugViaLLM...

[90mstderr[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mrespects custom messages config (limits to N messages)
[22m[39m[31m[diagnostic][39m [31mlane task error: lane=main durationMs=7 error="Error: No API key found for provider "anthropic". Auth store: /tmp/openclaw-test-home-7cnigI/.openclaw/agents/main/agent/auth-profiles.json (agentDir: /tmp/openclaw-test-home-7cnigI/.openclaw/agents/main/agent). Configure auth for this agent (openclaw agents add <id>) or copy auth-profiles.json from the main agentDir."[39m

[90mstderr[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mrespects custom messages config (limits to N messages)
[22m[39m[31m[diagnostic][39m [31mlane task error: lane=session:temp:slug-generator durationMs=11 error="Error: No API key found for provider "anthropic". Auth store: /tmp/openclaw-test-home-7cnigI/.openclaw/agents/main/agent/auth-profiles.json (agentDir: /tmp/openclaw-test-home-7cnigI/.openclaw/agents/main/agent). Configure auth for this agent (openclaw agents add <id>) or copy auth-profiles.json from the main agentDir."[39m

[90mstderr[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mrespects custom messages config (limits to N messages)
[22m[39m[llm-slug-generator] Failed to generate slug: Error: No API key found for provider "anthropic". Auth store: /tmp/openclaw-test-home-7cnigI/.openclaw/agents/main/agent/auth-profiles.json (agentDir: /tmp/openclaw-test-home-7cnigI/.openclaw/agents/main/agent). Configure auth for this agent (openclaw agents add <id>) or copy auth-profiles.json from the main agentDir.
    at resolveApiKeyForProvider [90m(/home/runner/work/newclaw/newclaw/[39msrc/agents/model-auth.ts:223:9[90m)[39m
    at getApiKeyForModel [90m(/home/runner/work/newclaw/newclaw/[39msrc/agents/model-auth.ts:375:10[90m)[39m
    at resolveApiKeyForCandidate [90m(/home/runner/work/newclaw/newclaw/[39msrc/agents/pi-embedded-runner/run.ts:215:16[90m)[39m
    at applyApiKeyInfo [90m(/home/runner/work/newclaw/newclaw/[39msrc/agents/pi-embedded-runner/run.ts:225:28[90m)[39m
    at [90m/home/runner/work/newclaw/newclaw/[39msrc/agents/pi-embedded-runner/run.ts:287:17
    at [90m/home/runner/work/newclaw/newclaw/[39msrc/process/command-queue.ts:66:26

[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mrespects custom messages config (limits to N messages)
[22m[39m[session-memory] Generated slug: [1mnull[22m
[session-memory] Using fallback timestamp slug: 1850
[session-memory] Generated filename: 2026-02-08-1850.md
[session-memory] Full path: /tmp/openclaw-session-memory-QWMEeg/memory/2026-02-08-1850.md

[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mrespects custom messages config (limits to N messages)
[22m[39m[session-memory] Memory file written successfully
[session-memory] Session context saved to /tmp/openclaw-session-memory-QWMEeg/memory/2026-02-08-1850.md

[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mfilters messages before slicing (fix for #2681)
[22m[39m[session-memory] Hook triggered for /new command

[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mfilters messages before slicing (fix for #2681)
[22m[39m[session-memory] Current sessionId: test-123
[session-memory] Current sessionFile: /tmp/openclaw-session-memory-NR1SAW/sessions/test-session.jsonl
[session-memory] cfg present: [33mtrue[39m

[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mfilters messages before slicing (fix for #2681)
[22m[39m[session-memory] sessionContent length: [33m71[39m
[session-memory] Calling generateSlugViaLLM...

[90mstderr[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mfilters messages before slicing (fix for #2681)
[22m[39m[31m[diagnostic][39m [31mlane task error: lane=main durationMs=3 error="Error: No API key found for provider "anthropic". Auth store: /tmp/openclaw-test-home-7cnigI/.openclaw/agents/main/agent/auth-profiles.json (agentDir: /tmp/openclaw-test-home-7cnigI/.openclaw/agents/main/agent). Configure auth for this agent (openclaw agents add <id>) or copy auth-profiles.json from the main agentDir."[39m

[90mstderr[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mfilters messages before slicing (fix for #2681)
[22m[39m[31m[diagnostic][39m [31mlane task error: lane=session:temp:slug-generator durationMs=26 error="Error: No API key found for provider "anthropic". Auth store: /tmp/openclaw-test-home-7cnigI/.openclaw/agents/main/agent/auth-profiles.json (agentDir: /tmp/openclaw-test-home-7cnigI/.openclaw/agents/main/agent). Configure auth for this agent (openclaw agents add <id>) or copy auth-profiles.json from the main agentDir."[39m

[90mstderr[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mfilters messages before slicing (fix for #2681)
[22m[39m[llm-slug-generator] Failed to generate slug: Error: No API key found for provider "anthropic". Auth store: /tmp/openclaw-test-home-7cnigI/.openclaw/agents/main/agent/auth-profiles.json (agentDir: /tmp/openclaw-test-home-7cnigI/.openclaw/agents/main/agent). Configure auth for this agent (openclaw agents add <id>) or copy auth-profiles.json from the main agentDir.
    at resolveApiKeyForProvider [90m(/home/runner/work/newclaw/newclaw/[39msrc/agents/model-auth.ts:223:9[90m)[39m
    at getApiKeyForModel [90m(/home/runner/work/newclaw/newclaw/[39msrc/agents/model-auth.ts:375:10[90m)[39m
    at resolveApiKeyForCandidate [90m(/home/runner/work/newclaw/newclaw/[39msrc/agents/pi-embedded-runner/run.ts:215:16[90m)[39m
    at applyApiKeyInfo [90m(/home/runner/work/newclaw/newclaw/[39msrc/agents/pi-embedded-runner/run.ts:225:28[90m)[39m
    at [90m/home/runner/work/newclaw/newclaw/[39msrc/agents/pi-embedded-runner/run.ts:287:17
    at [90m/home/runner/work/newclaw/newclaw/[39msrc/process/command-queue.ts:66:26

[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mfilters messages before slicing (fix for #2681)
[22m[39m[session-memory] Generated slug: [1mnull[22m
[session-memory] Using fallback timestamp slug: 1850
[session-memory] Generated filename: 2026-02-08-1850.md
[session-memory] Full path: /tmp/openclaw-session-memory-NR1SAW/memory/2026-02-08-1850.md

[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mfilters messages before slicing (fix for #2681)
[22m[39m[session-memory] Memory file written successfully
[session-memory] Session context saved to /tmp/openclaw-session-memory-NR1SAW/memory/2026-02-08-1850.md

[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mhandles empty session files gracefully
[22m[39m[session-memory] Hook triggered for /new command

[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mhandles empty session files gracefully
[22m[39m[session-memory] Current sessionId: test-123
[session-memory] Current sessionFile: /tmp/openclaw-session-memory-iT7EMd/sessions/test-session.jsonl
[session-memory] cfg present: [33mtrue[39m

[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mhandles empty session files gracefully
[22m[39m[session-memory] sessionContent length: [33m0[39m
[session-memory] Using fallback timestamp slug: 1850
[session-memory] Generated filename: 2026-02-08-1850.md
[session-memory] Full path: /tmp/openclaw-session-memory-iT7EMd/memory/2026-02-08-1850.md

[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mhandles empty session files gracefully
[22m[39m[session-memory] Memory file written successfully
[session-memory] Session context saved to /tmp/openclaw-session-memory-iT7EMd/memory/2026-02-08-1850.md

[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mhandles session files with fewer messages than requested
[22m[39m[session-memory] Hook triggered for /new command

[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mhandles session files with fewer messages than requested
[22m[39m[session-memory] Current sessionId: test-123
[session-memory] Current sessionFile: /tmp/openclaw-session-memory-WVQwvv/sessions/test-session.jsonl
[session-memory] cfg present: [33mtrue[39m

[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mhandles session files with fewer messages than requested
[22m[39m[session-memory] sessionContent length: [33m46[39m
[session-memory] Calling generateSlugViaLLM...

[90mstderr[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mhandles session files with fewer messages than requested
[22m[39m[31m[diagnostic][39m [31mlane task error: lane=main durationMs=1 error="Error: No API key found for provider "anthropic". Auth store: /tmp/openclaw-test-home-7cnigI/.openclaw/agents/main/agent/auth-profiles.json (agentDir: /tmp/openclaw-test-home-7cnigI/.openclaw/agents/main/agent). Configure auth for this agent (openclaw agents add <id>) or copy auth-profiles.json from the main agentDir."[39m

[90mstderr[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mhandles session files with fewer messages than requested
[22m[39m[31m[diagnostic][39m [31mlane task error: lane=session:temp:slug-generator durationMs=18 error="Error: No API key found for provider "anthropic". Auth store: /tmp/openclaw-test-home-7cnigI/.openclaw/agents/main/agent/auth-profiles.json (agentDir: /tmp/openclaw-test-home-7cnigI/.openclaw/agents/main/agent). Configure auth for this agent (openclaw agents add <id>) or copy auth-profiles.json from the main agentDir."[39m

[90mstderr[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mhandles session files with fewer messages than requested
[22m[39m[llm-slug-generator] Failed to generate slug: Error: No API key found for provider "anthropic". Auth store: /tmp/openclaw-test-home-7cnigI/.openclaw/agents/main/agent/auth-profiles.json (agentDir: /tmp/openclaw-test-home-7cnigI/.openclaw/agents/main/agent). Configure auth for this agent (openclaw agents add <id>) or copy auth-profiles.json from the main agentDir.
    at resolveApiKeyForProvider [90m(/home/runner/work/newclaw/newclaw/[39msrc/agents/model-auth.ts:223:9[90m)[39m
    at getApiKeyForModel [90m(/home/runner/work/newclaw/newclaw/[39msrc/agents/model-auth.ts:375:10[90m)[39m
    at resolveApiKeyForCandidate [90m(/home/runner/work/newclaw/newclaw/[39msrc/agents/pi-embedded-runner/run.ts:215:16[90m)[39m
    at applyApiKeyInfo [90m(/home/runner/work/newclaw/newclaw/[39msrc/agents/pi-embedded-runner/run.ts:225:28[90m)[39m
    at [90m/home/runner/work/newclaw/newclaw/[39msrc/agents/pi-embedded-runner/run.ts:287:17
    at [90m/home/runner/work/newclaw/newclaw/[39msrc/process/command-queue.ts:66:26

[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mhandles session files with fewer messages than requested
[22m[39m[session-memory] Generated slug: [1mnull[22m
[session-memory] Using fallback timestamp slug: 1850
[session-memory] Generated filename: 2026-02-08-1850.md
[session-memory] Full path: /tmp/openclaw-session-memory-WVQwvv/memory/2026-02-08-1850.md

[90mstdout[2m | src/hooks/bundled/session-memory/handler.test.ts[2m > [22m[2msession-memory hook[2m > [22m[2mhandles session files with fewer messages than requested
[22m[39m[session-memory] Memory file written successfully
[session-memory] Session context saved to /tmp/openclaw-session-memory-WVQwvv/memory/2026-02-08-1850.md

 [32mâœ“[39m src/hooks/bundled/session-memory/handler.test.ts [2m([22m[2m9 tests[22m[2m)[22m[33m 10766[2mms[22m[39m
     [33m[2mâœ“[22m[39m creates memory file with session content on /new command [33m 10408[2mms[22m[39m
 [32mâœ“[39m extensions/googlechat/src/targets.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 29[2mms[22m[39m
 [32mâœ“[39m extensions/msteams/src/channel.directory.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 42[2mms[22m[39m
 [32mâœ“[39m extensions/voice-call/src/media-stream.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 34[2mms[22m[39m
[90mstdout[2m | src/telegram/bot.media.includes-location-text-ctx-fields-pins.test.ts[2m > [22m[2mtelegram inbound media[2m > [22m[2mincludes location text and ctx fields for pins
[22m[39m[34m[telegram][39m [36mautoSelectFamily=false (default-node22)[39m

 [32mâœ“[39m src/telegram/bot.media.includes-location-text-ctx-fields-pins.test.ts [2m([22m[2m2 tests[22m[2m)[22m[33m 10699[2mms[22m[39m
     [33m[2mâœ“[22m[39m includes location text and ctx fields for pins [33m 10679[2mms[22m[39m
 [32mâœ“[39m extensions/tlon/src/monitor/processed-messages.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 21[2mms[22m[39m
 [32mâœ“[39m extensions/zalouser/src/channel.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 22[2mms[22m[39m
 [32mâœ“[39m src/discord/monitor.tool-result.accepts-guild-messages-mentionpatterns-match.test.ts [2m([22m[2m6 tests[22m[2m)[22m[33m 11158[2mms[22m[39m
     [33m[2mâœ“[22m[39m accepts guild messages when mentionPatterns match [33m 11011[2mms[22m[39m
 [32mâœ“[39m extensions/matrix/src/matrix/format.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 83[2mms[22m[39m
 [32mâœ“[39m src/cli/gateway.sigterm.test.ts [2m([22m[2m1 test[22m[2m)[22m[33m 7600[2mms[22m[39m
     [33m[2mâœ“[22m[39m exits 0 on SIGTERM [33m 7597[2mms[22m[39m
 [32mâœ“[39m extensions/mattermost/src/channel.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 41[2mms[22m[39m
 [32mâœ“[39m extensions/tlon/src/urbit/send.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 58[2mms[22m[39m
 [32mâœ“[39m extensions/zalo/src/channel.directory.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 28[2mms[22m[39m
 [32mâœ“[39m extensions/voice-call/src/providers/plivo.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 18[2mms[22m[39m
 [32mâœ“[39m extensions/msteams/src/probe.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 64[2mms[22m[39m
 [32mâœ“[39m extensions/twitch/src/status.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 23[2mms[22m[39m
 [32mâœ“[39m extensions/msteams/src/errors.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 34[2mms[22m[39m
 [32mâœ“[39m src/browser/screenshot.test.ts [2m([22m[2m2 tests[22m[2m)[22m[33m 10179[2mms[22m[39m
     [33m[2mâœ“[22m[39m shrinks oversized images to <=2000x2000 and <=5MB [33m 10115[2mms[22m[39m
 [32mâœ“[39m extensions/voice-call/src/providers/twilio.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 33[2mms[22m[39m
 [32mâœ“[39m src/commands/agent.test.ts [2m([22m[2m16 tests[22m[2m)[22m[33m 8794[2mms[22m[39m
     [33m[2mâœ“[22m[39m creates a session entry when deriving from --to [33m 892[2mms[22m[39m
     [33m[2mâœ“[22m[39m persists thinking and verbose overrides [33m 638[2mms[22m[39m
     [33m[2mâœ“[22m[39m resumes when session-id is provided [33m 528[2mms[22m[39m
     [33m[2mâœ“[22m[39m does not duplicate agent events from embedded runs [33m 687[2mms[22m[39m
     [33m[2mâœ“[22m[39m uses provider/model from agents.defaults.model.primary [33m 552[2mms[22m[39m
     [33m[2mâœ“[22m[39m keeps explicit sessionKey even when sessionId exists elsewhere [33m 528[2mms[22m[39m
     [33m[2mâœ“[22m[39m derives session key from --agent when no routing target is provided [33m 441[2mms[22m[39m
     [33m[2mâœ“[22m[39m defaults thinking to low for reasoning-capable models [33m 676[2mms[22m[39m
     [33m[2mâœ“[22m[39m prints JSON payload when requested [33m 540[2mms[22m[39m
     [33m[2mâœ“[22m[39m passes the message through as the agent prompt [33m 662[2mms[22m[39m
     [33m[2mâœ“[22m[39m passes through telegram accountId when delivering [33m 603[2mms[22m[39m
     [33m[2mâœ“[22m[39m uses reply channel as the message channel context [33m 555[2mms[22m[39m
     [33m[2mâœ“[22m[39m prefers runContext for embedded routing [33m 479[2mms[22m[39m
     [33m[2mâœ“[22m[39m forwards accountId to embedded runs [33m 480[2mms[22m[39m
     [33m[2mâœ“[22m[39m logs output when delivery is disabled [33m 506[2mms[22m[39m
 [32mâœ“[39m extensions/msteams/src/messenger.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 72[2mms[22m[39m
 [32mâœ“[39m extensions/twitch/src/token.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 70[2mms[22m[39m
 [32mâœ“[39m extensions/matrix/src/channel.directory.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 53[2mms[22m[39m
 [32mâœ“[39m src/agents/sandbox-agent-config.agent-specific-sandbox-config.should-use-agent-specific-workspaceroot.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 9008[2mms[22m[39m
     [33m[2mâœ“[22m[39m should use agent-specific workspaceRoot [33m 5227[2mms[22m[39m
     [33m[2mâœ“[22m[39m should prefer agent config over global for multiple agents [33m 1806[2mms[22m[39m
     [33m[2mâœ“[22m[39m should prefer agent-specific sandbox tool policy [33m 1851[2mms[22m[39m
 [32mâœ“[39m extensions/bluebubbles/src/targets.test.ts [2m([22m[2m24 tests[22m[2m)[22m[32m 55[2mms[22m[39m
 [32mâœ“[39m src/agents/sandbox-agent-config.agent-specific-sandbox-config.should-use-global-sandbox-config-no-agent.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 9931[2mms[22m[39m
     [33m[2mâœ“[22m[39m should use global sandbox config when no agent-specific config exists [33m 5478[2mms[22m[39m
     [33m[2mâœ“[22m[39m should allow agent-specific docker setupCommand overrides [33m 2230[2mms[22m[39m
     [33m[2mâœ“[22m[39m should ignore agent-specific docker overrides when scope is shared [33m 2093[2mms[22m[39m
 [32mâœ“[39m extensions/matrix/src/matrix/accounts.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 40[2mms[22m[39m
 [32mâœ“[39m extensions/matrix/src/matrix/poll-types.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 23[2mms[22m[39m
 [32mâœ“[39m extensions/zalouser/src/status-issues.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 44[2mms[22m[39m
 [32mâœ“[39m src/commands/models.list.test.ts [2m([22m[2m8 tests[22m[2m)[22m[33m 9631[2mms[22m[39m
     [33m[2mâœ“[22m[39m models status resolves z.ai alias to canonical zai [33m 9544[2mms[22m[39m
 [32mâœ“[39m extensions/tlon/src/config-schema.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 34[2mms[22m[39m
 [32mâœ“[39m src/config/config.identity-defaults.test.ts [2m([22m[2m9 tests[22m[2m)[22m[33m 7228[2mms[22m[39m
     [33m[2mâœ“[22m[39m does not derive mentionPatterns when identity is set [33m 812[2mms[22m[39m
     [33m[2mâœ“[22m[39m defaults ackReactionScope without setting ackReaction [33m 1161[2mms[22m[39m
     [33m[2mâœ“[22m[39m keeps ackReaction unset when identity is missing [33m 751[2mms[22m[39m
     [33m[2mâœ“[22m[39m does not override explicit values [33m 852[2mms[22m[39m
     [33m[2mâœ“[22m[39m supports provider textChunkLimit config [33m 628[2mms[22m[39m
     [33m[2mâœ“[22m[39m accepts blank model provider apiKey values [33m 759[2mms[22m[39m
     [33m[2mâœ“[22m[39m respects empty responsePrefix to disable identity defaults [33m 739[2mms[22m[39m
     [33m[2mâœ“[22m[39m does not synthesize agent list/session when absent [33m 773[2mms[22m[39m
     [33m[2mâœ“[22m[39m does not derive responsePrefix from identity emoji [33m 750[2mms[22m[39m
 [32mâœ“[39m extensions/matrix/src/matrix/client.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 38[2mms[22m[39m
 [32mâœ“[39m extensions/msteams/src/sent-message-cache.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 22[2mms[22m[39m
 [32mâœ“[39m extensions/googlechat/src/monitor.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 34[2mms[22m[39m
 [32mâœ“[39m extensions/matrix/src/matrix/monitor/rooms.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 19[2mms[22m[39m
 [32mâœ“[39m src/discord/monitor.slash.test.ts [2m([22m[2m1 test[22m[2m)[22m[33m 7564[2mms[22m[39m
     [33m[2mâœ“[22m[39m skips tool results for native slash commands [33m 7555[2mms[22m[39m
 [32mâœ“[39m src/cron/isolated-agent.uses-last-non-empty-agent-text-as.test.ts [2m([22m[2m13 tests[22m[2m)[22m[33m 6636[2mms[22m[39m
     [33m[2mâœ“[22m[39m uses last non-empty agent text as summary [33m 1174[2mms[22m[39m
     [33m[2mâœ“[22m[39m appends current time after the cron header line [33m 551[2mms[22m[39m
     [33m[2mâœ“[22m[39m uses agentId for workspace, session key, and store paths [33m 568[2mms[22m[39m
     [33m[2mâœ“[22m[39m uses model override when provided [33m 598[2mms[22m[39m
     [33m[2mâœ“[22m[39m uses hooks.gmail.model for Gmail hook sessions [33m 531[2mms[22m[39m
     [33m[2mâœ“[22m[39m wraps external hook content by default [33m 521[2mms[22m[39m
     [33m[2mâœ“[22m[39m skips external content wrapping when hooks.gmail opts out [33m 442[2mms[22m[39m
     [33m[2mâœ“[22m[39m ignores hooks.gmail.model when not in the allowlist [33m 329[2mms[22m[39m
     [33m[2mâœ“[22m[39m defaults thinking to low for reasoning-capable models [33m 446[2mms[22m[39m
     [33m[2mâœ“[22m[39m truncates long summaries [33m 356[2mms[22m[39m
     [33m[2mâœ“[22m[39m fails delivery without a WhatsApp recipient when bestEffortDeliver=false [33m 518[2mms[22m[39m
     [33m[2mâœ“[22m[39m starts a fresh session id for each cron run [33m 497[2mms[22m[39m
 [32mâœ“[39m src/agents/openai-responses.reasoning-replay.test.ts [2m([22m[2m2 tests[22m[2m)[22m[33m 3012[2mms[22m[39m
     [33m[2mâœ“[22m[39m replays reasoning for tool-call-only turns (OpenAI requires it) [33m 1534[2mms[22m[39m
     [33m[2mâœ“[22m[39m still replays reasoning when paired with an assistant message [33m 1463[2mms[22m[39m
 [32mâœ“[39m extensions/twitch/src/plugin.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 12[2mms[22m[39m

[2m Test Files [22m [1m[32m76 passed[39m[22m[90m (76)[39m
[2m      Tests [22m [1m[32m892 passed[39m[22m[2m | [22m[33m1 skipped[39m[90m (893)[39m
[2m   Start at [22m 18:47:01
[2m   Duration [22m 288.27s[2m (transform 84.40s, setup 376.68s, import 328.01s, tests 82.32s, environment 46ms)[22m

 [32mâœ“[39m src/infra/outbound/message.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 5056[2mms[22m[39m
     [33m[2mâœ“[22m[39m normalizes Teams alias [33m 3734[2mms[22m[39m
     [33m[2mâœ“[22m[39m normalizes iMessage alias [33m 706[2mms[22m[39m
     [33m[2mâœ“[22m[39m normalizes Teams alias for polls [33m 613[2mms[22m[39m
 [32mâœ“[39m src/agents/sandbox.resolveSandboxContext.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 4575[2mms[22m[39m
     [33m[2mâœ“[22m[39m does not sandbox the agent main session in non-main mode [33m 3110[2mms[22m[39m
     [33m[2mâœ“[22m[39m does not create a sandbox workspace for the agent main session in non-main mode [33m 700[2mms[22m[39m
     [33m[2mâœ“[22m[39m treats main session aliases as main in non-main mode [33m 758[2mms[22m[39m
 [32mâœ“[39m src/agents/bash-tools.test.ts [2m([22m[2m17 tests[22m[2m)[22m[33m 1698[2mms[22m[39m
     [33m[2mâœ“[22m[39m uses default timeout when timeout is omitted [33m 1044[2mms[22m[39m
 [32mâœ“[39m src/commands/doctor.falls-back-legacy-sandbox-image-missing.test.ts [2m([22m[2m1 test[22m[2m)[22m[33m 4545[2mms[22m[39m
     [33m[2mâœ“[22m[39m runs legacy state migrations in non-interactive mode without prompting [33m 4540[2mms[22m[39m
[90mstdout[2m | src/telegram/bot.test.ts[2m > [22m[2mcreateTelegramBot[2m > [22m[2minstalls grammY throttler
[22m[39m[34m[telegram][39m [36mautoSelectFamily=false (default-node22)[39m

 [32mâœ“[39m src/telegram/bot.test.ts [2m([22m[2m82 tests[22m[2m)[22m[33m 2800[2mms[22m[39m
     [33m[2mâœ“[22m[39m dedupes duplicate message updates by update_id [33m 355[2mms[22m[39m
 [32mâœ“[39m src/config/config.plugin-validation.test.ts [2m([22m[2m7 tests[22m[2m)[22m[33m 4760[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects missing plugin load paths [33m 632[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects missing plugin ids in entries [33m 774[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects missing plugin ids in allow/deny/slots [33m 654[2mms[22m[39m
     [33m[2mâœ“[22m[39m surfaces plugin config diagnostics [33m 762[2mms[22m[39m
     [33m[2mâœ“[22m[39m accepts known plugin ids [33m 575[2mms[22m[39m
     [33m[2mâœ“[22m[39m accepts plugin heartbeat targets [33m 684[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects unknown heartbeat targets [33m 673[2mms[22m[39m
 [32mâœ“[39m src/cron/isolated-agent.skips-delivery-without-whatsapp-recipient-besteffortdeliver-true.test.ts [2m([22m[2m10 tests[22m[2m)[22m[33m 5140[2mms[22m[39m
     [33m[2mâœ“[22m[39m skips delivery without a WhatsApp recipient when bestEffortDeliver=true [33m 906[2mms[22m[39m
     [33m[2mâœ“[22m[39m delivers telegram via channel send [33m 509[2mms[22m[39m
     [33m[2mâœ“[22m[39m auto-delivers when explicit target is set without deliver flag [33m 675[2mms[22m[39m
     [33m[2mâœ“[22m[39m skips auto-delivery when messaging tool already sent to the target [33m 457[2mms[22m[39m
     [33m[2mâœ“[22m[39m delivers telegram topic targets via channel send [33m 486[2mms[22m[39m
     [33m[2mâœ“[22m[39m delivers telegram shorthand topic suffixes via channel send [33m 461[2mms[22m[39m
     [33m[2mâœ“[22m[39m delivers via discord when configured [33m 471[2mms[22m[39m
     [33m[2mâœ“[22m[39m skips delivery when response is exactly HEARTBEAT_OK [33m 463[2mms[22m[39m
     [33m[2mâœ“[22m[39m skips delivery when response has HEARTBEAT_OK with short padding [33m 359[2mms[22m[39m
     [33m[2mâœ“[22m[39m delivers when response has HEARTBEAT_OK but also substantial content [33m 349[2mms[22m[39m
 [32mâœ“[39m src/commands/message.test.ts [2m([22m[2m4 tests[22m[2m)[22m[33m 4920[2mms[22m[39m
     [33m[2mâœ“[22m[39m defaults channel when only one configured [33m 4289[2mms[22m[39m
 [32mâœ“[39m src/web/media.test.ts [2m([22m[2m10 tests[22m[2m)[22m[33m 4337[2mms[22m[39m
     [33m[2mâœ“[22m[39m compresses large local images under the provided cap [33m 809[2mms[22m[39m
     [33m[2mâœ“[22m[39m falls back to JPEG when PNG alpha cannot fit under cap [33m 3459[2mms[22m[39m
 [32mâœ“[39m src/agents/sandbox-skills.test.ts [2m([22m[2m2 tests[22m[2m)[22m[33m 3366[2mms[22m[39m
     [33m[2mâœ“[22m[39m copies skills into the sandbox when workspaceAccess is ro [33m 2768[2mms[22m[39m
     [33m[2mâœ“[22m[39m copies skills into the sandbox when workspaceAccess is none [33m 595[2mms[22m[39m
[90mstdout[2m | src/signal/monitor.tool-result.pairs-uuid-only-senders-uuid-allowlist-entry.test.ts[2m > [22m[2mmonitorSignalProvider tool results[2m > [22m[2mreconnects after stream errors until aborted
[22m[39mSignal SSE connection lost, reconnecting in 1s...

[90mstderr[2m | src/signal/monitor.tool-result.pairs-uuid-only-senders-uuid-allowlist-entry.test.ts[2m > [22m[2mmonitorSignalProvider tool results[2m > [22m[2mreconnects after stream errors until aborted
[22m[39mSignal SSE stream error: Error: stream dropped

 [32mâœ“[39m src/signal/monitor.tool-result.pairs-uuid-only-senders-uuid-allowlist-entry.test.ts [2m([22m[2m2 tests[22m[2m)[22m[33m 1090[2mms[22m[39m
     [33m[2mâœ“[22m[39m reconnects after stream errors until aborted [33m 1017[2mms[22m[39m
 [32mâœ“[39m src/hooks/gmail-setup-utils.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 3539[2mms[22m[39m
     [33m[2mâœ“[22m[39m resolves a working python path and caches the result [33m 2540[2mms[22m[39m
     [33m[2mâœ“[22m[39m includes stdout and exit code when tailscale serve fails [33m 605[2mms[22m[39m
     [33m[2mâœ“[22m[39m includes JSON parse failure details with stdout [33m 385[2mms[22m[39m
 [32mâœ“[39m src/cli/program.smoke.test.ts [2m([22m[2m13 tests[22m[2m | [22m[33m2 skipped[39m[2m)[22m[33m 881[2mms[22m[39m
     [33m[2mâœ“[22m[39m runs channels login [33m 387[2mms[22m[39m
 [32mâœ“[39m src/commands/doctor.migrates-routing-allowfrom-channels-whatsapp-allowfrom.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 3061[2mms[22m[39m
     [33m[2mâœ“[22m[39m migrates routing.allowFrom to channels.whatsapp.allowFrom [33m 3012[2mms[22m[39m
 [32mâœ“[39m src/commands/doctor.runs-legacy-state-migrations-yes-mode-without.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 2814[2mms[22m[39m
     [33m[2mâœ“[22m[39m runs legacy state migrations in yes mode without prompting [33m 2782[2mms[22m[39m
 [32mâœ“[39m src/commands/doctor.warns-state-directory-is-missing.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 2764[2mms[22m[39m
     [33m[2mâœ“[22m[39m warns when the state directory is missing [33m 2674[2mms[22m[39m
 [32mâœ“[39m src/commands/doctor.warns-per-agent-sandbox-docker-browser-prune.test.ts [2m([22m[2m2 tests[22m[2m)[22m[33m 2347[2mms[22m[39m
     [33m[2mâœ“[22m[39m warns when per-agent sandbox docker/browser/prune overrides are ignored under shared scope [33m 2324[2mms[22m[39m
[90mstdout[2m | src/telegram/bot.create-telegram-bot.installs-grammy-throttler.test.ts[2m > [22m[2mcreateTelegramBot[2m > [22m[2minstalls grammY throttler
[22m[39m[34m[telegram][39m [36mautoSelectFamily=false (default-node22)[39m

 [32mâœ“[39m src/agents/subagent-registry.persistence.test.ts [2m([22m[2m4 tests[22m[2m)[22m[33m 2714[2mms[22m[39m
     [33m[2mâœ“[22m[39m persists runs to disk and resumes after restart [33m 1030[2mms[22m[39m
     [33m[2mâœ“[22m[39m skips cleanup when cleanupHandled was persisted [33m 577[2mms[22m[39m
     [33m[2mâœ“[22m[39m retries cleanup announce after a failed announce [33m 1064[2mms[22m[39m
 [32mâœ“[39m src/telegram/bot.create-telegram-bot.installs-grammy-throttler.test.ts [2m([22m[2m10 tests[22m[2m)[22m[33m 3611[2mms[22m[39m
     [33m[2mâœ“[22m[39m installs grammY throttler [33m 823[2mms[22m[39m
     [33m[2mâœ“[22m[39m uses wrapped fetch when global fetch is available [33m 438[2mms[22m[39m
     [33m[2mâœ“[22m[39m passes timeoutSeconds even without a custom fetch [33m 369[2mms[22m[39m
     [33m[2mâœ“[22m[39m routes callback_query payloads as messages and answers callbacks [33m 340[2mms[22m[39m
 [32mâœ“[39m src/agents/bash-tools.exec.background-abort.test.ts [2m([22m[2m4 tests[22m[2m)[22m[33m 900[2mms[22m[39m
[90mstdout[2m | src/web/auto-reply.web-auto-reply.reconnects-after-connection-close.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mreconnects after a connection close
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.reconnects-after-connection-close.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mreconnects after a connection close
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.reconnects-after-connection-close.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mforces reconnect when watchdog closes without onClose
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.reconnects-after-connection-close.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mforces reconnect when watchdog closes without onClose
[22m[39m[35m[whatsapp][39m [36mInbound message +1 -> +2 (undefined, 16 chars)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.reconnects-after-connection-close.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mforces reconnect when watchdog closes without onClose
[22m[39m[35m[whatsapp][39m [36mAuto-replied to +1[39m

 [32mâœ“[39m src/memory/index.test.ts [2m([22m[2m10 tests[22m[2m)[22m[33m 2095[2mms[22m[39m
     [33m[2mâœ“[22m[39m indexes memory files and searches by vector [33m 395[2mms[22m[39m
     [33m[2mâœ“[22m[39m reindexes when the embedding model changes [33m 345[2mms[22m[39m
[90mstderr[2m | src/web/auto-reply.web-auto-reply.reconnects-after-connection-close.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mforces reconnect when watchdog closes without onClose
[22m[39m[35m[whatsapp][39m [33mNo messages received in 31m - restarting connection[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.reconnects-after-connection-close.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mforces reconnect when watchdog closes without onClose
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.reconnects-after-connection-close.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mstops after hitting max reconnect attempts
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.reconnects-after-connection-close.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mstops after hitting max reconnect attempts
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.reconnects-after-connection-close.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mprocesses inbound messages without batching and preserves timestamps
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.reconnects-after-connection-close.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mprocesses inbound messages without batching and preserves timestamps
[22m[39m[35m[whatsapp][39m [36mInbound message +1 -> +2 (undefined, 48 chars)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.reconnects-after-connection-close.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mprocesses inbound messages without batching and preserves timestamps
[22m[39m[35m[whatsapp][39m [36mAuto-replied to +1[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.reconnects-after-connection-close.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mprocesses inbound messages without batching and preserves timestamps
[22m[39m[35m[whatsapp][39m [36mInbound message +1 -> +2 (undefined, 49 chars)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.reconnects-after-connection-close.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mprocesses inbound messages without batching and preserves timestamps
[22m[39m[35m[whatsapp][39m [36mAuto-replied to +1[39m

 [32mâœ“[39m src/web/auto-reply.web-auto-reply.reconnects-after-connection-close.test.ts [2m([22m[2m4 tests[22m[2m)[22m[33m 2959[2mms[22m[39m
     [33m[2mâœ“[22m[39m forces reconnect when watchdog closes without onClose [33m 2648[2mms[22m[39m
 [32mâœ“[39m src/agents/subagent-announce.format.test.ts [2m([22m[2m9 tests[22m[2m)[22m[33m 2912[2mms[22m[39m
     [33m[2mâœ“[22m[39m sends instructional message to main agent with status and findings [33m 2742[2mms[22m[39m
[90mstdout[2m | src/telegram/bot.create-telegram-bot.sends-replies-without-native-reply-threading.test.ts[2m > [22m[2mcreateTelegramBot[2m > [22m[2msends replies without native reply threading
[22m[39m[34m[telegram][39m [36mautoSelectFamily=false (default-node22)[39m

 [32mâœ“[39m src/telegram/bot.create-telegram-bot.sends-replies-without-native-reply-threading.test.ts [2m([22m[2m7 tests[22m[2m)[22m[33m 2888[2mms[22m[39m
     [33m[2mâœ“[22m[39m sends replies without native reply threading [33m 793[2mms[22m[39m
     [33m[2mâœ“[22m[39m honors replyToMode=first for threaded replies [33m 359[2mms[22m[39m
     [33m[2mâœ“[22m[39m honors replyToMode=all for threaded replies [33m 405[2mms[22m[39m
     [33m[2mâœ“[22m[39m blocks group messages when telegram.groups is set without a wildcard [33m 346[2mms[22m[39m
     [33m[2mâœ“[22m[39m skips group messages without mention when requireMention is enabled [33m 341[2mms[22m[39m
     [33m[2mâœ“[22m[39m honors routed group activation from session store [33m 355[2mms[22m[39m
[90mstdout[2m | src/telegram/bot.create-telegram-bot.matches-usernames-case-insensitively-grouppolicy-is.test.ts[2m > [22m[2mcreateTelegramBot[2m > [22m[2mmatches usernames case-insensitively when groupPolicy is 'allowlist'
[22m[39m[34m[telegram][39m [36mautoSelectFamily=false (default-node22)[39m

 [32mâœ“[39m src/telegram/bot.create-telegram-bot.matches-usernames-case-insensitively-grouppolicy-is.test.ts [2m([22m[2m7 tests[22m[2m)[22m[33m 2871[2mms[22m[39m
     [33m[2mâœ“[22m[39m matches usernames case-insensitively when groupPolicy is 'allowlist' [33m 793[2mms[22m[39m
     [33m[2mâœ“[22m[39m allows direct messages regardless of groupPolicy [33m 453[2mms[22m[39m
     [33m[2mâœ“[22m[39m allows direct messages with tg/Telegram-prefixed allowFrom entries [33m 431[2mms[22m[39m
     [33m[2mâœ“[22m[39m allows direct messages with telegram:-prefixed allowFrom entries [33m 437[2mms[22m[39m
 [32mâœ“[39m src/cli/daemon-cli.coverage.test.ts [2m([22m[2m7 tests[22m[2m)[22m[33m 3112[2mms[22m[39m
     [33m[2mâœ“[22m[39m probes gateway status by default [33m 2445[2mms[22m[39m
     [33m[2mâœ“[22m[39m installs the daemon when requested [33m 321[2mms[22m[39m
     [33m[2mâœ“[22m[39m installs the daemon with json output [33m 302[2mms[22m[39m
 [32mâœ“[39m src/agents/sandbox-merge.test.ts [2m([22m[2m7 tests[22m[2m)[22m[33m 2667[2mms[22m[39m
     [33m[2mâœ“[22m[39m resolves sandbox scope deterministically [33m 2645[2mms[22m[39m
 [32mâœ“[39m src/media-understanding/apply.test.ts [2m([22m[2m22 tests[22m[2m)[22m[33m 3172[2mms[22m[39m
     [33m[2mâœ“[22m[39m sets Transcript and replaces Body when audio transcription succeeds [33m 3000[2mms[22m[39m
 [32mâœ“[39m src/commands/agent.delivery.test.ts [2m([22m[2m7 tests[22m[2m)[22m[33m 2919[2mms[22m[39m
     [33m[2mâœ“[22m[39m prefers explicit accountId for outbound delivery [33m 2885[2mms[22m[39m
[90mstdout[2m | src/telegram/bot.create-telegram-bot.accepts-group-messages-mentionpatterns-match-without-botusername.test.ts[2m > [22m[2mcreateTelegramBot[2m > [22m[2maccepts group messages when mentionPatterns match (without @botUsername)
[22m[39m[34m[telegram][39m [36mautoSelectFamily=false (default-node22)[39m

 [32mâœ“[39m src/telegram/bot.create-telegram-bot.accepts-group-messages-mentionpatterns-match-without-botusername.test.ts [2m([22m[2m8 tests[22m[2m)[22m[33m 3230[2mms[22m[39m
     [33m[2mâœ“[22m[39m accepts group messages when mentionPatterns match (without @botUsername) [33m 873[2mms[22m[39m
     [33m[2mâœ“[22m[39m accepts group messages when mentionPatterns match even if another user is mentioned [33m 428[2mms[22m[39m
     [33m[2mâœ“[22m[39m keeps group envelope headers stable (sender identity is separate) [33m 390[2mms[22m[39m
     [33m[2mâœ“[22m[39m reacts to mention-gated group messages when ackReaction is enabled [33m 353[2mms[22m[39m
     [33m[2mâœ“[22m[39m skips group messages when requireMention is enabled and no mention matches [33m 341[2mms[22m[39m
     [33m[2mâœ“[22m[39m allows group messages when requireMention is enabled but mentions cannot be detected [33m 325[2mms[22m[39m
     [33m[2mâœ“[22m[39m includes reply-to context when a Telegram reply is received [33m 501[2mms[22m[39m
[90mstdout[2m | src/telegram/bot.create-telegram-bot.routes-dms-by-telegram-accountid-binding.test.ts[2m > [22m[2mcreateTelegramBot[2m > [22m[2mroutes DMs by telegram accountId binding
[22m[39m[34m[telegram][39m [36mautoSelectFamily=false (default-node22)[39m

 [32mâœ“[39m src/telegram/bot.create-telegram-bot.routes-dms-by-telegram-accountid-binding.test.ts [2m([22m[2m6 tests[22m[2m)[22m[33m 2534[2mms[22m[39m
     [33m[2mâœ“[22m[39m allows per-group requireMention override [33m 711[2mms[22m[39m
     [33m[2mâœ“[22m[39m allows per-topic requireMention override [33m 304[2mms[22m[39m
     [33m[2mâœ“[22m[39m honors groups default when no explicit group override exists [33m 327[2mms[22m[39m
     [33m[2mâœ“[22m[39m does not block group messages when bot username is unknown [33m 424[2mms[22m[39m
     [33m[2mâœ“[22m[39m sends GIF replies as animations [33m 540[2mms[22m[39m
 [32mâœ“[39m src/config/config.pruning-defaults.test.ts [2m([22m[2m4 tests[22m[2m)[22m[33m 2627[2mms[22m[39m
     [33m[2mâœ“[22m[39m does not enable contextPruning by default [33m 637[2mms[22m[39m
     [33m[2mâœ“[22m[39m enables cache-ttl pruning + 1h heartbeat for Anthropic OAuth [33m 856[2mms[22m[39m
     [33m[2mâœ“[22m[39m enables cache-ttl pruning + 1h cache TTL for Anthropic API keys [33m 541[2mms[22m[39m
     [33m[2mâœ“[22m[39m does not override explicit contextPruning mode [33m 591[2mms[22m[39m
[90mstdout[2m | src/telegram/bot.create-telegram-bot.blocks-all-group-messages-grouppolicy-is.test.ts[2m > [22m[2mcreateTelegramBot[2m > [22m[2mblocks all group messages when groupPolicy is 'disabled'
[22m[39m[34m[telegram][39m [36mautoSelectFamily=false (default-node22)[39m

 [32mâœ“[39m src/telegram/bot.create-telegram-bot.blocks-all-group-messages-grouppolicy-is.test.ts [2m([22m[2m7 tests[22m[2m)[22m[33m 2701[2mms[22m[39m
     [33m[2mâœ“[22m[39m blocks all group messages when groupPolicy is 'disabled' [33m 706[2mms[22m[39m
     [33m[2mâœ“[22m[39m blocks group messages from senders not in allowFrom when groupPolicy is 'allowlist' [33m 359[2mms[22m[39m
     [33m[2mâœ“[22m[39m allows group messages from senders in allowFrom (by ID) when groupPolicy is 'allowlist' [33m 323[2mms[22m[39m
     [33m[2mâœ“[22m[39m allows group messages from senders in allowFrom (by username) when groupPolicy is 'allowlist' [33m 319[2mms[22m[39m
     [33m[2mâœ“[22m[39m allows group messages from telegram:-prefixed allowFrom entries when groupPolicy is 'allowlist' [33m 342[2mms[22m[39m
     [33m[2mâœ“[22m[39m allows group messages from tg:-prefixed allowFrom entries case-insensitively when groupPolicy is 'allowlist' [33m 344[2mms[22m[39m
     [33m[2mâœ“[22m[39m allows all group messages when groupPolicy is 'open' [33m 304[2mms[22m[39m
 [32mâœ“[39m src/commands/sandbox-explain.test.ts [2m([22m[2m1 test[22m[2m)[22m[33m 2845[2mms[22m[39m
     [33m[2mâœ“[22m[39m prints JSON shape + fix-it keys [33m 2834[2mms[22m[39m
 [32mâœ“[39m src/agents/sandbox-agent-config.agent-specific-sandbox-config.includes-session-status-default-sandbox-allowlist.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 2905[2mms[22m[39m
     [33m[2mâœ“[22m[39m includes session_status in default sandbox allowlist [33m 2891[2mms[22m[39m
[90mstdout[2m | src/telegram/bot.create-telegram-bot.applies-topic-skill-filters-system-prompts.test.ts[2m > [22m[2mcreateTelegramBot[2m > [22m[2mapplies topic skill filters and system prompts
[22m[39m[34m[telegram][39m [36mautoSelectFamily=false (default-node22)[39m

 [32mâœ“[39m src/telegram/bot.create-telegram-bot.applies-topic-skill-filters-system-prompts.test.ts [2m([22m[2m5 tests[22m[2m)[22m[33m 2379[2mms[22m[39m
     [33m[2mâœ“[22m[39m applies topic skill filters and system prompts [33m 827[2mms[22m[39m
     [33m[2mâœ“[22m[39m passes message_thread_id to topic replies [33m 471[2mms[22m[39m
     [33m[2mâœ“[22m[39m threads native command replies inside topics [33m 380[2mms[22m[39m
     [33m[2mâœ“[22m[39m skips tool summaries for native slash commands [33m 342[2mms[22m[39m
     [33m[2mâœ“[22m[39m dedupes duplicate message updates by update_id [33m 356[2mms[22m[39m
 [32mâœ“[39m src/auto-reply/reply.raw-body.test.ts [2m([22m[2m5 tests[22m[2m)[22m[33m 2819[2mms[22m[39m
     [33m[2mâœ“[22m[39m /model, /think, /verbose directives detected from RawBody even when Body has structural wrapper [33m 720[2mms[22m[39m
     [33m[2mâœ“[22m[39m /model status detected from RawBody [33m 481[2mms[22m[39m
     [33m[2mâœ“[22m[39m CommandBody is honored when RawBody is missing [33m 384[2mms[22m[39m
     [33m[2mâœ“[22m[39m Integration: WhatsApp group message with structural wrapper and RawBody command [33m 456[2mms[22m[39m
     [33m[2mâœ“[22m[39m preserves history when RawBody is provided for command parsing [33m 776[2mms[22m[39m
[90mstdout[2m | src/web/login.test.ts[2m > [22m[2mweb login[2m > [22m[2mloginWeb waits for connection and closes
[22m[39mWaiting for WhatsApp connection...

[90mstdout[2m | src/web/login.test.ts[2m > [22m[2mweb login[2m > [22m[2mloginWeb waits for connection and closes
[22m[39mâœ… Linked! Credentials saved for future sends.

 [32mâœ“[39m src/web/login.test.ts [2m([22m[2m1 test[22m[2m)[22m[33m 624[2mms[22m[39m
     [33m[2mâœ“[22m[39m loginWeb waits for connection and closes [33m 607[2mms[22m[39m
 [32mâœ“[39m src/agents/models-config.skips-writing-models-json-no-env-token.test.ts [2m([22m[2m4 tests[22m[2m)[22m[33m 2546[2mms[22m[39m
     [33m[2mâœ“[22m[39m skips writing models.json when no env token or profile exists [33m 566[2mms[22m[39m
     [33m[2mâœ“[22m[39m writes models.json for configured providers [33m 540[2mms[22m[39m
     [33m[2mâœ“[22m[39m adds minimax provider when MINIMAX_API_KEY is set [33m 699[2mms[22m[39m
     [33m[2mâœ“[22m[39m adds synthetic provider when SYNTHETIC_API_KEY is set [33m 736[2mms[22m[39m
 [32mâœ“[39m src/auto-reply/reply.block-streaming.test.ts [2m([22m[2m5 tests[22m[2m)[22m[33m 2370[2mms[22m[39m
     [33m[2mâœ“[22m[39m waits for block replies before returning final payloads [33m 931[2mms[22m[39m
     [33m[2mâœ“[22m[39m preserves block reply ordering when typing start is slow [33m 409[2mms[22m[39m
     [33m[2mâœ“[22m[39m drops final payloads when block replies streamed [33m 390[2mms[22m[39m
     [33m[2mâœ“[22m[39m falls back to final payloads when block reply send times out [33m 396[2mms[22m[39m
[90mstderr[2m | src/memory/manager.embedding-batches.test.ts[2m > [22m[2mmemory embedding batches[2m > [22m[2mretries embeddings on rate limit errors
[22m[39m[31m[memory][39m [33membeddings rate limited; retrying in 527ms[39m

[90mstderr[2m | src/memory/manager.embedding-batches.test.ts[2m > [22m[2mmemory embedding batches[2m > [22m[2mretries embeddings on rate limit errors
[22m[39m[31m[memory][39m [33membeddings rate limited; retrying in 1011ms[39m

[90mstderr[2m | src/memory/manager.embedding-batches.test.ts[2m > [22m[2mmemory embedding batches[2m > [22m[2mretries embeddings on transient 5xx errors
[22m[39m[31m[memory][39m [33membeddings rate limited; retrying in 594ms[39m

[90mstderr[2m | src/memory/manager.embedding-batches.test.ts[2m > [22m[2mmemory embedding batches[2m > [22m[2mretries embeddings on transient 5xx errors
[22m[39m[31m[memory][39m [33membeddings rate limited; retrying in 1140ms[39m

 [32mâœ“[39m src/memory/manager.embedding-batches.test.ts [2m([22m[2m6 tests[22m[2m)[22m[33m 1174[2mms[22m[39m
     [33m[2mâœ“[22m[39m splits large files across multiple embedding batches [33m 558[2mms[22m[39m
[90mstdout[2m | src/telegram/bot.create-telegram-bot.matches-tg-prefixed-allowfrom-entries-case-insensitively.test.ts[2m > [22m[2mcreateTelegramBot[2m > [22m[2mmatches tg:-prefixed allowFrom entries case-insensitively in group allowlist
[22m[39m[34m[telegram][39m [36mautoSelectFamily=false (default-node22)[39m

 [32mâœ“[39m src/telegram/bot.create-telegram-bot.matches-tg-prefixed-allowfrom-entries-case-insensitively.test.ts [2m([22m[2m6 tests[22m[2m)[22m[33m 2250[2mms[22m[39m
     [33m[2mâœ“[22m[39m matches tg:-prefixed allowFrom entries case-insensitively in group allowlist [33m 853[2mms[22m[39m
     [33m[2mâœ“[22m[39m blocks group messages when groupPolicy allowlist has no groupAllowFrom [33m 346[2mms[22m[39m
     [33m[2mâœ“[22m[39m routes General topic replies using thread id 1 [33m 322[2mms[22m[39m
 [32mâœ“[39m src/infra/transport-ready.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 541[2mms[22m[39m
     [33m[2mâœ“[22m[39m returns when the check succeeds and logs after the delay [33m 331[2mms[22m[39m
 [32mâœ“[39m src/config/config.env-vars.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 2354[2mms[22m[39m
     [33m[2mâœ“[22m[39m applies env vars from env block when missing [33m 742[2mms[22m[39m
     [33m[2mâœ“[22m[39m does not override existing env vars [33m 1001[2mms[22m[39m
     [33m[2mâœ“[22m[39m applies env vars from env.vars when missing [33m 607[2mms[22m[39m
[90mstdout[2m | src/canvas-host/server.test.ts[2m > [22m[2mcanvas host[2m > [22m[2mcreates a default index.html when missing
[22m[39mcanvas host listening on http://127.0.0.1:35871 (root /tmp/openclaw-canvas-5cMXAE)

[90mstdout[2m | src/canvas-host/server.test.ts[2m > [22m[2mcanvas host[2m > [22m[2mskips live reload injection when disabled
[22m[39mcanvas host listening on http://127.0.0.1:33693 (root /tmp/openclaw-canvas-cyupFX)

[90mstdout[2m | src/canvas-host/server.test.ts[2m > [22m[2mcanvas host[2m > [22m[2mreuses a handler without closing it twice
[22m[39mcanvas host listening on http://127.0.0.1:33667 (root /tmp/openclaw-canvas-SnjzjR)

[90mstdout[2m | src/canvas-host/server.test.ts[2m > [22m[2mcanvas host[2m > [22m[2mserves HTML with injection and broadcasts reload on file changes
[22m[39mcanvas host listening on http://127.0.0.1:38379 (root /tmp/openclaw-canvas-dbSYgR)

[90mstdout[2m | src/canvas-host/server.test.ts[2m > [22m[2mcanvas host[2m > [22m[2mserves the gateway-hosted A2UI scaffold
[22m[39mcanvas host listening on http://127.0.0.1:34181 (root /tmp/openclaw-canvas-JsMam5)

 [32mâœ“[39m src/canvas-host/server.test.ts [2m([22m[2m7 tests[22m[2m)[22m[33m 790[2mms[22m[39m
     [33m[2mâœ“[22m[39m serves HTML with injection and broadcasts reload on file changes [33m 396[2mms[22m[39m
 [32mâœ“[39m src/browser/pw-tools-core.screenshots-element-selector.test.ts [2m([22m[2m5 tests[22m[2m)[22m[33m 1909[2mms[22m[39m
     [33m[2mâœ“[22m[39m screenshots an element selector [33m 1864[2mms[22m[39m
[90mstderr[2m | src/agents/tool-images.test.ts[2m > [22m[2mtool image sanitizing[2m > [22m[2mshrinks oversized images to <=5MB
[22m[39m[33m[agents/tool-images][39m [33mImage exceeds limits; resizing[39m

[90mstdout[2m | src/agents/tool-images.test.ts[2m > [22m[2mtool image sanitizing[2m > [22m[2mshrinks oversized images to <=5MB
[22m[39m[33m[agents/tool-images][39m [36mImage resized[39m

[90mstderr[2m | src/agents/tool-images.test.ts[2m > [22m[2mtool image sanitizing[2m > [22m[2msanitizes image arrays and reports drops
[22m[39m[33m[agents/tool-images][39m [33mImage exceeds limits; resizing[39m

[90mstdout[2m | src/agents/tool-images.test.ts[2m > [22m[2mtool image sanitizing[2m > [22m[2msanitizes image arrays and reports drops
[22m[39m[33m[agents/tool-images][39m [36mImage resized[39m

[90mstderr[2m | src/agents/tool-images.test.ts[2m > [22m[2mtool image sanitizing[2m > [22m[2mshrinks images that exceed max dimension even if size is small
[22m[39m[33m[agents/tool-images][39m [33mImage exceeds limits; resizing[39m

[90mstdout[2m | src/agents/tool-images.test.ts[2m > [22m[2mtool image sanitizing[2m > [22m[2mshrinks images that exceed max dimension even if size is small
[22m[39m[33m[agents/tool-images][39m [36mImage resized[39m

 [32mâœ“[39m src/agents/tool-images.test.ts [2m([22m[2m4 tests[22m[2m)[22m[33m 1790[2mms[22m[39m
     [33m[2mâœ“[22m[39m shrinks oversized images to <=5MB [33m 1301[2mms[22m[39m
[90mstdout[2m | src/web/auto-reply.web-auto-reply.falls-back-text-media-send-fails.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mfalls back to text when media send fails
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.falls-back-text-media-send-fails.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mfalls back to text when media send fails
[22m[39m[35m[whatsapp][39m [36mInbound message +1 -> +2 (undefined, 19 chars)[39m

[90mstderr[2m | src/web/auto-reply.web-auto-reply.falls-back-text-media-send-fails.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mfalls back to text when media send fails
[22m[39m[35m[whatsapp][39m [31mFailed sending web media to +1: boom[39m
[35m[whatsapp][39m [33mMedia skipped; sent text-only to +1[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.falls-back-text-media-send-fails.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mfalls back to text when media send fails
[22m[39m[35m[whatsapp][39m [36mAuto-replied to +1 (media)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.falls-back-text-media-send-fails.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mreturns a warning when remote media fetch 404s
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.falls-back-text-media-send-fails.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mreturns a warning when remote media fetch 404s
[22m[39m[35m[whatsapp][39m [36mInbound message +1 -> +2 (undefined, 19 chars)[39m

[90mstderr[2m | src/web/auto-reply.web-auto-reply.falls-back-text-media-send-fails.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mreturns a warning when remote media fetch 404s
[22m[39m[35m[whatsapp][39m [31mFailed sending web media to +1: Failed to fetch media from https://example.com/missing.jpg: HTTP 404; empty response body[39m
[35m[whatsapp][39m [33mMedia skipped; sent text-only to +1[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.falls-back-text-media-send-fails.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mreturns a warning when remote media fetch 404s
[22m[39m[35m[whatsapp][39m [36mAuto-replied to +1 (media)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.falls-back-text-media-send-fails.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mcompresses media over 5MB and still sends it
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.falls-back-text-media-send-fails.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mcompresses media over 5MB and still sends it
[22m[39m[35m[whatsapp][39m [36mInbound message +1 -> +2 (undefined, 19 chars)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.falls-back-text-media-send-fails.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mcompresses media over 5MB and still sends it
[22m[39m[35m[whatsapp][39m [36mSent media reply to +1 (0.01MB)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.falls-back-text-media-send-fails.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mcompresses media over 5MB and still sends it
[22m[39m[35m[whatsapp][39m [36mAuto-replied to +1 (media)[39m

 [32mâœ“[39m src/web/auto-reply.web-auto-reply.falls-back-text-media-send-fails.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 1881[2mms[22m[39m
     [33m[2mâœ“[22m[39m falls back to text when media send fails [33m 301[2mms[22m[39m
     [33m[2mâœ“[22m[39m compresses media over 5MB and still sends it [33m 1516[2mms[22m[39m
[90mstderr[2m | src/memory/manager.batch.test.ts[2m > [22m[2mmemory indexing with OpenAI batches[2m > [22m[2mfalls back to non-batch on failure and resets failures after success
[22m[39m[31m[memory][39m [33membeddings: openai batch failed (1/2); keeping batch enabled; falling back to non-batch embeddings: openai batch create failed: 500 batch failed[39m

[90mstderr[2m | src/memory/manager.batch.test.ts[2m > [22m[2mmemory indexing with OpenAI batches[2m > [22m[2mdisables batch after repeated failures and skips batch thereafter
[22m[39m[31m[memory][39m [33membeddings: openai batch failed (1/2); keeping batch enabled; falling back to non-batch embeddings: openai batch create failed: 500 batch failed[39m

[90mstderr[2m | src/memory/manager.batch.test.ts[2m > [22m[2mmemory indexing with OpenAI batches[2m > [22m[2mdisables batch after repeated failures and skips batch thereafter
[22m[39m[31m[memory][39m [33membeddings: openai batch failed (2/2); disabling batch; falling back to non-batch embeddings: openai batch create failed: 500 batch failed[39m

 [32mâœ“[39m src/memory/manager.batch.test.ts [2m([22m[2m4 tests[22m[2m)[22m[33m 1301[2mms[22m[39m
     [33m[2mâœ“[22m[39m uses OpenAI batch uploads when enabled [33m 360[2mms[22m[39m
     [33m[2mâœ“[22m[39m disables batch after repeated failures and skips batch thereafter [33m 429[2mms[22m[39m
 [32mâœ“[39m src/auto-reply/reply.queue.test.ts [2m([22m[2m2 tests[22m[2m)[22m[33m 1386[2mms[22m[39m
     [33m[2mâœ“[22m[39m collects queued messages and drains after run completes [33m 753[2mms[22m[39m
     [33m[2mâœ“[22m[39m summarizes dropped followups when cap is exceeded [33m 620[2mms[22m[39m
 [32mâœ“[39m src/tui/theme/theme.test.ts [2m([22m[2m10 tests[22m[2m)[22m[33m 2091[2mms[22m[39m
       [33m[2mâœ“[22m[39m should handle unknown languages gracefully [33m 1774[2mms[22m[39m
 [32mâœ“[39m src/config/config.broadcast.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 1823[2mms[22m[39m
     [33m[2mâœ“[22m[39m accepts a broadcast peer map with strategy [33m 532[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects invalid broadcast strategy [33m 698[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects non-array broadcast entries [33m 585[2mms[22m[39m
[90mstdout[2m | src/agents/skills.build-workspace-skills-prompt.syncs-merged-skills-into-target-workspace.test.ts[2m > [22m[2mbuildWorkspaceSkillsPrompt[2m > [22m[2mapplies skill filters, including empty lists
[22m[39m[skills] Applying skill filter: alpha
[skills] After filter: alpha
[skills] Applying skill filter: (none)
[skills] After filter: 

 [32mâœ“[39m src/agents/skills.build-workspace-skills-prompt.syncs-merged-skills-into-target-workspace.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 1538[2mms[22m[39m
     [33m[2mâœ“[22m[39m filters skills based on env/config gates [33m 787[2mms[22m[39m
     [33m[2mâœ“[22m[39m applies skill filters, including empty lists [33m 579[2mms[22m[39m
 [32mâœ“[39m src/agents/skills.test.ts [2m([22m[2m9 tests[22m[2m)[22m[33m 1844[2mms[22m[39m
     [33m[2mâœ“[22m[39m includes tool-dispatch metadata from frontmatter [33m 481[2mms[22m[39m
     [33m[2mâœ“[22m[39m loads skills from workspace skills/ [33m 367[2mms[22m[39m
     [33m[2mâœ“[22m[39m applies env overrides from snapshots [33m 346[2mms[22m[39m
 [32mâœ“[39m src/browser/pw-tools-core.last-file-chooser-arm-wins.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 1401[2mms[22m[39m
     [33m[2mâœ“[22m[39m last file-chooser arm wins [33m 1381[2mms[22m[39m
 [32mâœ“[39m src/browser/pw-tools-core.waits-next-download-saves-it.test.ts [2m([22m[2m5 tests[22m[2m)[22m[33m 1698[2mms[22m[39m
     [33m[2mâœ“[22m[39m waits for the next download and saves it [33m 1668[2mms[22m[39m
 [32mâœ“[39m src/browser/pw-tools-core.clamps-timeoutms-scrollintoview.test.ts [2m([22m[2m6 tests[22m[2m)[22m[33m 1461[2mms[22m[39m
     [33m[2mâœ“[22m[39m clamps timeoutMs for scrollIntoView [33m 1450[2mms[22m[39m
 [32mâœ“[39m src/infra/gateway-lock.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 441[2mms[22m[39m
 [32mâœ“[39m src/agents/models-config.falls-back-default-baseurl-token-exchange-fails.test.ts [2m([22m[2m2 tests[22m[2m)[22m[33m 1067[2mms[22m[39m
     [33m[2mâœ“[22m[39m falls back to default baseUrl when token exchange fails [33m 471[2mms[22m[39m
     [33m[2mâœ“[22m[39m uses agentDir override auth profiles for copilot injection [33m 594[2mms[22m[39m
[90mstdout[2m | src/web/auto-reply.partial-reply-gating.test.ts[2m > [22m[2mpartial reply gating[2m > [22m[2mdoes not send partial replies for WhatsApp provider
[22m[39m[35m[whatsapp][39m [36mInbound message +1000 -> +2000 (direct, 43 chars)[39m

[90mstdout[2m | src/web/auto-reply.partial-reply-gating.test.ts[2m > [22m[2mpartial reply gating[2m > [22m[2mdoes not send partial replies for WhatsApp provider
[22m[39m[35m[whatsapp][39m [36mAuto-replied to +1000[39m

[90mstdout[2m | src/web/auto-reply.partial-reply-gating.test.ts[2m > [22m[2mpartial reply gating[2m > [22m[2mdoes not send partial replies for WhatsApp provider
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/web/auto-reply.partial-reply-gating.test.ts[2m > [22m[2mpartial reply gating[2m > [22m[2mfalls back from empty senderJid to senderE164 for SenderId
[22m[39m[35m[whatsapp][39m [36mInbound message +1000 -> +2000 (direct, 43 chars)[39m

[90mstdout[2m | src/web/auto-reply.partial-reply-gating.test.ts[2m > [22m[2mpartial reply gating[2m > [22m[2mfalls back from empty senderJid to senderE164 for SenderId
[22m[39m[35m[whatsapp][39m [36mAuto-replied to +1000[39m

[90mstdout[2m | src/web/auto-reply.partial-reply-gating.test.ts[2m > [22m[2mpartial reply gating[2m > [22m[2mfalls back from empty senderJid to senderE164 for SenderId
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/web/auto-reply.partial-reply-gating.test.ts[2m > [22m[2mpartial reply gating[2m > [22m[2mupdates last-route for direct chats without senderE164
[22m[39m[35m[whatsapp][39m [36mInbound message +1000 -> +2000 (direct, 47 chars)[39m

[90mstdout[2m | src/web/auto-reply.partial-reply-gating.test.ts[2m > [22m[2mpartial reply gating[2m > [22m[2mupdates last-route for direct chats without senderE164
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/web/auto-reply.partial-reply-gating.test.ts[2m > [22m[2mpartial reply gating[2m > [22m[2mupdates last-route for group chats with account id
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

 [32mâœ“[39m src/web/auto-reply.partial-reply-gating.test.ts [2m([22m[2m5 tests[22m[2m)[22m[33m 1000[2mms[22m[39m
     [33m[2mâœ“[22m[39m defaults to self-only when no config is present [33m 543[2mms[22m[39m
 [32mâœ“[39m src/agents/skills.buildworkspaceskillstatus.test.ts [2m([22m[2m4 tests[22m[2m)[22m[33m 975[2mms[22m[39m
     [33m[2mâœ“[22m[39m reports missing requirements and install options [33m 516[2mms[22m[39m
[90mstdout[2m | src/telegram/bot.create-telegram-bot.dedupes-duplicate-callback-query-updates-by-update.test.ts[2m > [22m[2mcreateTelegramBot[2m > [22m[2mdedupes duplicate callback_query updates by update_id
[22m[39m[34m[telegram][39m [36mautoSelectFamily=false (default-node22)[39m

 [32mâœ“[39m src/telegram/bot.create-telegram-bot.dedupes-duplicate-callback-query-updates-by-update.test.ts [2m([22m[2m2 tests[22m[2m)[22m[33m 952[2mms[22m[39m
     [33m[2mâœ“[22m[39m dedupes duplicate callback_query updates by update_id [33m 618[2mms[22m[39m
     [33m[2mâœ“[22m[39m allows distinct callback_query ids without update_id [33m 322[2mms[22m[39m
 [32mâœ“[39m src/process/child-process-bridge.test.ts [2m([22m[2m1 test[22m[2m)[22m[33m 489[2mms[22m[39m
     [33m[2mâœ“[22m[39m forwards SIGTERM to the wrapped child [33m 486[2mms[22m[39m
 [32mâœ“[39m src/config/config.compaction-settings.test.ts [2m([22m[2m2 tests[22m[2m)[22m[33m 1120[2mms[22m[39m
     [33m[2mâœ“[22m[39m preserves memory flush config values [33m 467[2mms[22m[39m
     [33m[2mâœ“[22m[39m defaults compaction mode to safeguard [33m 647[2mms[22m[39m
 [32mâœ“[39m src/daemon/launchd.test.ts [2m([22m[2m14 tests[22m[2m)[22m[33m 1153[2mms[22m[39m
     [33m[2mâœ“[22m[39m enables service before bootstrap (clears persisted disabled state) [33m 550[2mms[22m[39m
[90mstdout[2m | src/browser/server.covers-additional-endpoint-branches.test.ts[2m > [22m[2mbrowser control server[2m > [22m[2mcovers additional endpoint branches
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:46801/[39m

[90mstdout[2m | src/browser/server.covers-additional-endpoint-branches.test.ts[2m > [22m[2mbackward compatibility (profile parameter)[2m > [22m[2mGET / without profile uses default profile
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:44637/[39m

[90mstdout[2m | src/browser/server.covers-additional-endpoint-branches.test.ts[2m > [22m[2mbackward compatibility (profile parameter)[2m > [22m[2mPOST /start without profile uses default profile
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:37685/[39m

[90mstdout[2m | src/browser/server.covers-additional-endpoint-branches.test.ts[2m > [22m[2mbackward compatibility (profile parameter)[2m > [22m[2mPOST /stop without profile uses default profile
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:34727/[39m

[90mstdout[2m | src/browser/server.covers-additional-endpoint-branches.test.ts[2m > [22m[2mbackward compatibility (profile parameter)[2m > [22m[2mGET /tabs without profile uses default profile
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:34373/[39m

[90mstdout[2m | src/browser/server.covers-additional-endpoint-branches.test.ts[2m > [22m[2mbackward compatibility (profile parameter)[2m > [22m[2mPOST /tabs/open without profile uses default profile
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:37867/[39m

[90mstdout[2m | src/browser/server.covers-additional-endpoint-branches.test.ts[2m > [22m[2mbackward compatibility (profile parameter)[2m > [22m[2mGET /profiles returns list of profiles
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:34075/[39m

[90mstdout[2m | src/browser/server.covers-additional-endpoint-branches.test.ts[2m > [22m[2mbackward compatibility (profile parameter)[2m > [22m[2mGET /tabs?profile=openclaw returns tabs for specified profile
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:34093/[39m

[90mstdout[2m | src/browser/server.covers-additional-endpoint-branches.test.ts[2m > [22m[2mbackward compatibility (profile parameter)[2m > [22m[2mPOST /tabs/open?profile=openclaw opens tab in specified profile
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:44525/[39m

[90mstdout[2m | src/browser/server.covers-additional-endpoint-branches.test.ts[2m > [22m[2mbackward compatibility (profile parameter)[2m > [22m[2mGET /tabs?profile=unknown returns 404
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:39123/[39m

 [32mâœ“[39m src/browser/server.covers-additional-endpoint-branches.test.ts [2m([22m[2m10 tests[22m[2m)[22m[33m 960[2mms[22m[39m
     [33m[2mâœ“[22m[39m covers additional endpoint branches [33m 550[2mms[22m[39m
 [32mâœ“[39m src/config/config.multi-agent-agentdir-validation.test.ts [2m([22m[2m2 tests[22m[2m)[22m[33m 1000[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects shared agents.list agentDir [33m 435[2mms[22m[39m
     [33m[2mâœ“[22m[39m throws on shared agentDir during loadConfig() [33m 560[2mms[22m[39m
 [32mâœ“[39m src/cli/program/register.subclis.test.ts [2m([22m[2m4 tests[22m[2m)[22m[33m 1126[2mms[22m[39m
     [33m[2mâœ“[22m[39m replaces placeholder when registering a subcommand by name [33m 1059[2mms[22m[39m
 [32mâœ“[39m src/agents/skills.build-workspace-skills-prompt.prefers-workspace-skills-managed-skills.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 1095[2mms[22m[39m
     [33m[2mâœ“[22m[39m gates by bins, config, and always [33m 831[2mms[22m[39m
[90mstdout[2m | src/browser/server.serves-status-starts-browser-requested.test.ts[2m > [22m[2mbrowser control server[2m > [22m[2mserves status + starts browser when requested
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:44619/[39m

[90mstdout[2m | src/browser/server.serves-status-starts-browser-requested.test.ts[2m > [22m[2mbrowser control server[2m > [22m[2mhandles tabs: list, open, focus conflict on ambiguous prefix
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:44421/[39m

 [32mâœ“[39m src/browser/server.serves-status-starts-browser-requested.test.ts [2m([22m[2m2 tests[22m[2m)[22m[33m 1035[2mms[22m[39m
     [33m[2mâœ“[22m[39m serves status + starts browser when requested [33m 898[2mms[22m[39m
 [32mâœ“[39m src/config/config.talk-api-key-fallback.test.ts [2m([22m[2m2 tests[22m[2m)[22m[33m 934[2mms[22m[39m
     [33m[2mâœ“[22m[39m injects talk.apiKey from profile when config is missing [33m 387[2mms[22m[39m
     [33m[2mâœ“[22m[39m prefers ELEVENLABS_API_KEY env over profile [33m 542[2mms[22m[39m
 [32mâœ“[39m src/cron/isolated-agent.delivers-response-has-heartbeat-ok-but-includes.test.ts [2m([22m[2m2 tests[22m[2m)[22m[33m 1071[2mms[22m[39m
     [33m[2mâœ“[22m[39m delivers when response has HEARTBEAT_OK but includes media [33m 682[2mms[22m[39m
     [33m[2mâœ“[22m[39m delivers when heartbeat ack padding exceeds configured limit [33m 386[2mms[22m[39m
[90mstderr[2m | src/plugins/loader.test.ts[2m > [22m[2mloadOpenClawPlugins[2m > [22m[2mfails fast on invalid plugin config
[22m[39m[35m[plugins][39m [31mconfigurable invalid config: <root>: must be object[39m

 [32mâœ“[39m src/plugins/loader.test.ts [2m([22m[2m14 tests[22m[2m)[22m[33m 1116[2mms[22m[39m
     [33m[2mâœ“[22m[39m disables bundled plugins by default [33m 660[2mms[22m[39m
 [32mâœ“[39m src/config/config.msteams.test.ts [2m([22m[2m2 tests[22m[2m)[22m[33m 923[2mms[22m[39m
     [33m[2mâœ“[22m[39m accepts replyStyle at global/team/channel levels [33m 370[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects invalid replyStyle [33m 549[2mms[22m[39m
 [32mâœ“[39m src/cli/exec-approvals-cli.test.ts [2m([22m[2m4 tests[22m[2m)[22m[33m 796[2mms[22m[39m
     [33m[2mâœ“[22m[39m loads local approvals by default [33m 771[2mms[22m[39m
 [32mâœ“[39m src/agents/models-config.auto-injects-github-copilot-provider-token-is.test.ts [2m([22m[2m2 tests[22m[2m)[22m[33m 710[2mms[22m[39m
     [33m[2mâœ“[22m[39m auto-injects github-copilot provider when token is present [33m 339[2mms[22m[39m
     [33m[2mâœ“[22m[39m prefers COPILOT_GITHUB_TOKEN over GH_TOKEN and GITHUB_TOKEN [33m 369[2mms[22m[39m
 [32mâœ“[39m src/agents/models-config.uses-first-github-copilot-profile-env-tokens.test.ts [2m([22m[2m2 tests[22m[2m)[22m[33m 886[2mms[22m[39m
     [33m[2mâœ“[22m[39m uses the first github-copilot profile when env tokens are missing [33m 472[2mms[22m[39m
     [33m[2mâœ“[22m[39m does not override explicit github-copilot provider config [33m 412[2mms[22m[39m
[90mstdout[2m | src/browser/server.skips-default-maxchars-explicitly-set-zero.test.ts[2m > [22m[2mbrowser control server[2m > [22m[2mskips default maxChars when explicitly set to zero
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:36413/[39m

[90mstdout[2m | src/browser/server.skips-default-maxchars-explicitly-set-zero.test.ts[2m > [22m[2mbrowser control server[2m > [22m[2mvalidates agent inputs (agent routes)
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:46799/[39m

[90mstdout[2m | src/browser/server.skips-default-maxchars-explicitly-set-zero.test.ts[2m > [22m[2mbrowser control server[2m > [22m[2mcovers common error branches
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:41993/[39m

[90mstdout[2m | src/browser/server.skips-default-maxchars-explicitly-set-zero.test.ts[2m > [22m[2mbrowser control server[2m > [22m[2mopens tabs via CDP createTarget path
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:39723/[39m

 [32mâœ“[39m src/browser/server.skips-default-maxchars-explicitly-set-zero.test.ts [2m([22m[2m5 tests[22m[2m)[22m[33m 738[2mms[22m[39m
 [32mâœ“[39m src/agents/models-config.fills-missing-provider-apikey-from-env-var.test.ts [2m([22m[2m2 tests[22m[2m)[22m[33m 905[2mms[22m[39m
     [33m[2mâœ“[22m[39m fills missing provider.apiKey from env var name when models exist [33m 476[2mms[22m[39m
     [33m[2mâœ“[22m[39m merges providers by default [33m 427[2mms[22m[39m
 [32mâœ“[39m src/auto-reply/skill-commands.test.ts [2m([22m[2m5 tests[22m[2m)[22m[33m 729[2mms[22m[39m
     [33m[2mâœ“[22m[39m merges command names across agents and de-duplicates [33m 715[2mms[22m[39m
 [32mâœ“[39m src/config/config.gateway-remote-transport.test.ts [2m([22m[2m2 tests[22m[2m)[22m[33m 1006[2mms[22m[39m
     [33m[2mâœ“[22m[39m accepts direct transport [33m 554[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects unknown transport [33m 446[2mms[22m[39m
 [32mâœ“[39m src/auto-reply/reply.heartbeat-typing.test.ts [2m([22m[2m2 tests[22m[2m)[22m[33m 875[2mms[22m[39m
     [33m[2mâœ“[22m[39m starts typing for normal runs [33m 637[2mms[22m[39m
 [32mâœ“[39m src/cli/skills-cli.test.ts [2m([22m[2m13 tests[22m[2m)[22m[33m 890[2mms[22m[39m
       [33m[2mâœ“[22m[39m loads bundled skills and formats them [33m 573[2mms[22m[39m
 [32mâœ“[39m src/cli/cron-cli.test.ts [2m([22m[2m12 tests[22m[2m)[22m[33m 769[2mms[22m[39m
     [33m[2mâœ“[22m[39m trims model and thinking on cron add [33m 723[2mms[22m[39m
 [32mâœ“[39m src/config/config.preservation-on-validation-failure.test.ts [2m([22m[2m2 tests[22m[2m)[22m[33m 1078[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects unknown fields [33m 435[2mms[22m[39m
     [33m[2mâœ“[22m[39m flags legacy config entries without auto-migrating [33m 640[2mms[22m[39m
[90mstderr[2m | src/agents/bash-tools.exec.pty-fallback.test.ts[2m > [22m[2mexec falls back when PTY spawn fails
[22m[39m[32m[exec][39m [33mPTY spawn failed (Error: spawn EBADF); retrying without PTY for "printf ok".[39m

 [32mâœ“[39m src/agents/bash-tools.exec.pty-fallback.test.ts [2m([22m[2m1 test[22m[2m)[22m[33m 741[2mms[22m[39m
   [33m[2mâœ“[22m[39m exec falls back when PTY spawn fails [33m 738[2mms[22m[39m
 [32mâœ“[39m src/config/config.talk-voicealiases.test.ts [2m([22m[2m2 tests[22m[2m)[22m[33m 984[2mms[22m[39m
     [33m[2mâœ“[22m[39m accepts a string map of voice aliases [33m 434[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects non-string voice alias values [33m 548[2mms[22m[39m
 [32mâœ“[39m src/cli/logs-cli.test.ts [2m([22m[2m2 tests[22m[2m)[22m[33m 638[2mms[22m[39m
     [33m[2mâœ“[22m[39m writes output directly to stdout/stderr [33m 628[2mms[22m[39m
[90mstderr[2m | src/plugins/tools.optional.test.ts[2m > [22m[2mresolvePluginTools optional tools[2m > [22m[2mrejects plugin id collisions with core tool names
[22m[39m[35m[plugins][39m [31mplugin id conflicts with core tool name (message)[39m

[90mstderr[2m | src/plugins/tools.optional.test.ts[2m > [22m[2mresolvePluginTools optional tools[2m > [22m[2mskips conflicting tool names but keeps other tools
[22m[39m[35m[plugins][39m [31mplugin tool name conflict (multi): message[39m

 [32mâœ“[39m src/plugins/tools.optional.test.ts [2m([22m[2m5 tests[22m[2m)[22m[33m 754[2mms[22m[39m
     [33m[2mâœ“[22m[39m skips optional tools without explicit allowlist [33m 592[2mms[22m[39m
 [32mâœ“[39m src/config/config.sandbox-docker.test.ts [2m([22m[2m2 tests[22m[2m)[22m[33m 796[2mms[22m[39m
     [33m[2mâœ“[22m[39m accepts binds array in sandbox.docker config [33m 310[2mms[22m[39m
     [33m[2mâœ“[22m[39m rejects non-string values in binds array [33m 477[2mms[22m[39m
 [32mâœ“[39m src/agents/bash-tools.exec.path.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 718[2mms[22m[39m
     [33m[2mâœ“[22m[39m merges login-shell PATH for host=gateway [33m 706[2mms[22m[39m
[90mstdout[2m | src/browser/server.agent-contract-form-layout-act-commands.test.ts[2m > [22m[2mbrowser control server[2m > [22m[2magent contract: form + layout act commands
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:35149/[39m

[90mstdout[2m | src/browser/server.agent-contract-form-layout-act-commands.test.ts[2m > [22m[2mbrowser control server[2m > [22m[2mblocks act:evaluate when browser.evaluateEnabled=false
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:38973/[39m

[90mstdout[2m | src/browser/server.agent-contract-form-layout-act-commands.test.ts[2m > [22m[2mbrowser control server[2m > [22m[2magent contract: hooks + response + downloads + screenshot
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:45135/[39m

[90mstdout[2m | src/browser/server.agent-contract-form-layout-act-commands.test.ts[2m > [22m[2mbrowser control server[2m > [22m[2magent contract: stop endpoint
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:37897/[39m

 [32mâœ“[39m src/browser/server.agent-contract-form-layout-act-commands.test.ts [2m([22m[2m4 tests[22m[2m)[22m[33m 645[2mms[22m[39m
     [33m[2mâœ“[22m[39m agent contract: form + layout act commands [33m 430[2mms[22m[39m
[90mstdout[2m | src/browser/server.post-tabs-open-profile-unknown-returns-404.test.ts[2m > [22m[2mbrowser control server[2m > [22m[2mPOST /tabs/open?profile=unknown returns 404
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:42531/[39m

[90mstdout[2m | src/web/auto-reply.broadcast-groups.broadcasts-sequentially-configured-order.test.ts[2m > [22m[2mbroadcast groups[2m > [22m[2mbroadcasts sequentially in configured order
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/browser/server.post-tabs-open-profile-unknown-returns-404.test.ts[2m > [22m[2mprofile CRUD endpoints[2m > [22m[2mPOST /profiles/create returns 400 for missing name
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:40827/[39m

[90mstdout[2m | src/browser/server.post-tabs-open-profile-unknown-returns-404.test.ts[2m > [22m[2mprofile CRUD endpoints[2m > [22m[2mPOST /profiles/create returns 400 for invalid name format
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:33629/[39m

[90mstdout[2m | src/web/auto-reply.broadcast-groups.broadcasts-sequentially-configured-order.test.ts[2m > [22m[2mbroadcast groups[2m > [22m[2mbroadcasts sequentially in configured order
[22m[39m[35m[whatsapp][39m [36mBroadcasting message to 2 agents (sequential)[39m
[35m[whatsapp][39m [36mInbound message +1000 -> +2000 (direct, 43 chars)[39m

[90mstdout[2m | src/browser/server.post-tabs-open-profile-unknown-returns-404.test.ts[2m > [22m[2mprofile CRUD endpoints[2m > [22m[2mPOST /profiles/create returns 409 for duplicate name
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:42939/[39m

[90mstdout[2m | src/browser/server.post-tabs-open-profile-unknown-returns-404.test.ts[2m > [22m[2mprofile CRUD endpoints[2m > [22m[2mPOST /profiles/create accepts cdpUrl for remote profiles
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:46039/[39m

[90mstdout[2m | src/web/auto-reply.broadcast-groups.broadcasts-sequentially-configured-order.test.ts[2m > [22m[2mbroadcast groups[2m > [22m[2mbroadcasts sequentially in configured order
[22m[39m[35m[whatsapp][39m [36mAuto-replied to +1000[39m

[90mstdout[2m | src/web/auto-reply.broadcast-groups.broadcasts-sequentially-configured-order.test.ts[2m > [22m[2mbroadcast groups[2m > [22m[2mbroadcasts sequentially in configured order
[22m[39m[35m[whatsapp][39m [36mInbound message +1000 -> +2000 (direct, 43 chars)[39m

[90mstdout[2m | src/web/auto-reply.broadcast-groups.broadcasts-sequentially-configured-order.test.ts[2m > [22m[2mbroadcast groups[2m > [22m[2mbroadcasts sequentially in configured order
[22m[39m[35m[whatsapp][39m [36mAuto-replied to +1000[39m

[90mstdout[2m | src/browser/server.post-tabs-open-profile-unknown-returns-404.test.ts[2m > [22m[2mprofile CRUD endpoints[2m > [22m[2mPOST /profiles/create returns 400 for invalid cdpUrl
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:39039/[39m

[90mstdout[2m | src/web/auto-reply.broadcast-groups.broadcasts-sequentially-configured-order.test.ts[2m > [22m[2mbroadcast groups[2m > [22m[2mshares group history across broadcast agents and clears after replying
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/browser/server.post-tabs-open-profile-unknown-returns-404.test.ts[2m > [22m[2mprofile CRUD endpoints[2m > [22m[2mDELETE /profiles/:name returns 404 for non-existent profile
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:46333/[39m

[90mstdout[2m | src/browser/server.post-tabs-open-profile-unknown-returns-404.test.ts[2m > [22m[2mprofile CRUD endpoints[2m > [22m[2mDELETE /profiles/:name returns 400 for default profile deletion
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:45295/[39m

[90mstdout[2m | src/web/auto-reply.broadcast-groups.broadcasts-sequentially-configured-order.test.ts[2m > [22m[2mbroadcast groups[2m > [22m[2mshares group history across broadcast agents and clears after replying
[22m[39m[35m[whatsapp][39m [36mBroadcasting message to 2 agents (sequential)[39m
[35m[whatsapp][39m [36mInbound message 123@g.us -> +2 (group, 193 chars)[39m

[90mstdout[2m | src/web/auto-reply.broadcast-groups.broadcasts-sequentially-configured-order.test.ts[2m > [22m[2mbroadcast groups[2m > [22m[2mshares group history across broadcast agents and clears after replying
[22m[39m[35m[whatsapp][39m [36mAuto-replied to 123@g.us[39m

[90mstdout[2m | src/web/auto-reply.broadcast-groups.broadcasts-sequentially-configured-order.test.ts[2m > [22m[2mbroadcast groups[2m > [22m[2mshares group history across broadcast agents and clears after replying
[22m[39m[35m[whatsapp][39m [36mInbound message 123@g.us -> +2 (group, 193 chars)[39m

[90mstdout[2m | src/browser/server.post-tabs-open-profile-unknown-returns-404.test.ts[2m > [22m[2mprofile CRUD endpoints[2m > [22m[2mDELETE /profiles/:name returns 400 for invalid name format
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:35397/[39m

[90mstdout[2m | src/web/auto-reply.broadcast-groups.broadcasts-sequentially-configured-order.test.ts[2m > [22m[2mbroadcast groups[2m > [22m[2mshares group history across broadcast agents and clears after replying
[22m[39m[35m[whatsapp][39m [36mAuto-replied to 123@g.us[39m

[90mstdout[2m | src/web/auto-reply.broadcast-groups.broadcasts-sequentially-configured-order.test.ts[2m > [22m[2mbroadcast groups[2m > [22m[2mshares group history across broadcast agents and clears after replying
[22m[39m[35m[whatsapp][39m [36mBroadcasting message to 2 agents (sequential)[39m
[35m[whatsapp][39m [36mInbound message 123@g.us -> +2 (group, 45 chars)[39m

[90mstdout[2m | src/web/auto-reply.broadcast-groups.broadcasts-sequentially-configured-order.test.ts[2m > [22m[2mbroadcast groups[2m > [22m[2mshares group history across broadcast agents and clears after replying
[22m[39m[35m[whatsapp][39m [36mAuto-replied to 123@g.us[39m

[90mstdout[2m | src/web/auto-reply.broadcast-groups.broadcasts-sequentially-configured-order.test.ts[2m > [22m[2mbroadcast groups[2m > [22m[2mshares group history across broadcast agents and clears after replying
[22m[39m[35m[whatsapp][39m [36mInbound message 123@g.us -> +2 (group, 45 chars)[39m

 [32mâœ“[39m src/browser/server.post-tabs-open-profile-unknown-returns-404.test.ts [2m([22m[2m9 tests[22m[2m)[22m[33m 654[2mms[22m[39m
     [33m[2mâœ“[22m[39m POST /tabs/open?profile=unknown returns 404 [33m 446[2mms[22m[39m
[90mstdout[2m | src/web/auto-reply.broadcast-groups.broadcasts-sequentially-configured-order.test.ts[2m > [22m[2mbroadcast groups[2m > [22m[2mshares group history across broadcast agents and clears after replying
[22m[39m[35m[whatsapp][39m [36mAuto-replied to 123@g.us[39m

[90mstdout[2m | src/web/auto-reply.broadcast-groups.broadcasts-sequentially-configured-order.test.ts[2m > [22m[2mbroadcast groups[2m > [22m[2mbroadcasts in parallel by default
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/web/auto-reply.broadcast-groups.broadcasts-sequentially-configured-order.test.ts[2m > [22m[2mbroadcast groups[2m > [22m[2mbroadcasts in parallel by default
[22m[39m[35m[whatsapp][39m [36mBroadcasting message to 2 agents (parallel)[39m
[35m[whatsapp][39m [36mInbound message +1000 -> +2000 (direct, 43 chars)[39m
[35m[whatsapp][39m [36mInbound message +1000 -> +2000 (direct, 43 chars)[39m

[90mstdout[2m | src/web/auto-reply.broadcast-groups.broadcasts-sequentially-configured-order.test.ts[2m > [22m[2mbroadcast groups[2m > [22m[2mbroadcasts in parallel by default
[22m[39m[35m[whatsapp][39m [36mAuto-replied to +1000[39m
[35m[whatsapp][39m [36mAuto-replied to +1000[39m

 [32mâœ“[39m src/web/auto-reply.broadcast-groups.broadcasts-sequentially-configured-order.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 355[2mms[22m[39m
 [32mâœ“[39m src/web/logout.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 781[2mms[22m[39m
     [33m[2mâœ“[22m[39m deletes cached credentials when present [33m 762[2mms[22m[39m
 [32mâœ“[39m src/auto-reply/status.test.ts [2m([22m[2m19 tests[22m[2m)[22m[33m 574[2mms[22m[39m
     [33m[2mâœ“[22m[39m prefers cached prompt tokens from the session log [33m 513[2mms[22m[39m
 [32mâœ“[39m src/cli/program.nodes-media.test.ts [2m([22m[2m7 tests[22m[2m)[22m[33m 478[2mms[22m[39m
     [33m[2mâœ“[22m[39m runs nodes camera snap and prints two MEDIA paths [33m 320[2mms[22m[39m
 [32mâœ“[39m src/agents/session-tool-result-guard.tool-result-persist-hook.test.ts [2m([22m[2m2 tests[22m[2m)[22m[33m 624[2mms[22m[39m
     [33m[2mâœ“[22m[39m composes transforms in priority order and allows stripping toolResult.details [33m 609[2mms[22m[39m
[90mstdout[2m | src/browser/server.agent-contract-snapshot-endpoints.test.ts[2m > [22m[2mbrowser control server[2m > [22m[2magent contract: snapshot endpoints
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:33611/[39m

[90mstdout[2m | src/browser/server.agent-contract-snapshot-endpoints.test.ts[2m > [22m[2mbrowser control server[2m > [22m[2magent contract: navigation + common act commands
[22m[39m[36m[browser/server][39m [36mBrowser control listening on http://127.0.0.1:38103/[39m

 [32mâœ“[39m src/browser/server.agent-contract-snapshot-endpoints.test.ts [2m([22m[2m2 tests[22m[2m)[22m[33m 609[2mms[22m[39m
     [33m[2mâœ“[22m[39m agent contract: snapshot endpoints [33m 466[2mms[22m[39m
 [32mâœ“[39m src/config/config.agent-concurrency-defaults.test.ts [2m([22m[2m4 tests[22m[2m)[22m[33m 522[2mms[22m[39m
     [33m[2mâœ“[22m[39m injects defaults on load [33m 504[2mms[22m[39m
 [32mâœ“[39m src/commands/models/list.status.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 294[2mms[22m[39m
 [32mâœ“[39m src/cli/update-cli.test.ts [2m([22m[2m20 tests[22m[2m)[22m[33m 579[2mms[22m[39m
     [33m[2mâœ“[22m[39m exports updateCommand and registerUpdateCli [33m 343[2mms[22m[39m
 [32mâœ“[39m src/config/sessions.test.ts [2m([22m[2m26 tests[22m[2m)[22m[32m 290[2mms[22m[39m
 [32mâœ“[39m src/config/config.discord.test.ts [2m([22m[2m1 test[22m[2m)[22m[33m 709[2mms[22m[39m
     [33m[2mâœ“[22m[39m loads discord guild map + dm group settings [33m 706[2mms[22m[39m
 [32mâœ“[39m src/imessage/send.test.ts [2m([22m[2m4 tests[22m[2m)[22m[33m 583[2mms[22m[39m
     [33m[2mâœ“[22m[39m sends to chat_id targets [33m 471[2mms[22m[39m
 [32mâœ“[39m src/agents/models-config.normalizes-gemini-3-ids-preview-google-providers.test.ts [2m([22m[2m1 test[22m[2m)[22m[33m 562[2mms[22m[39m
     [33m[2mâœ“[22m[39m normalizes gemini 3 ids to preview for google providers [33m 553[2mms[22m[39m
 [32mâœ“[39m src/slack/monitor/media.test.ts [2m([22m[2m12 tests[22m[2m)[22m[33m 418[2mms[22m[39m
 [32mâœ“[39m src/hooks/install.test.ts [2m([22m[2m5 tests[22m[2m)[22m[33m 371[2mms[22m[39m
 [32mâœ“[39m src/agents/pi-embedded-runner.sanitize-session-history.test.ts [2m([22m[2m9 tests[22m[2m)[22m[33m 311[2mms[22m[39m
 [32mâœ“[39m src/agents/tools/image-tool.test.ts [2m([22m[2m14 tests[22m[2m)[22m[33m 521[2mms[22m[39m
 [32mâœ“[39m src/media/server.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 286[2mms[22m[39m
 [32mâœ“[39m src/line/bot-handlers.test.ts [2m([22m[2m4 tests[22m[2m)[22m[33m 380[2mms[22m[39m
[90mstdout[2m | src/web/auto-reply.web-auto-reply.supports-always-group-activation-silent-token-preserves.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2msupports always-on group activation with silent token and clears pending history
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.supports-always-group-activation-silent-token-preserves.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2msupports always-on group activation with silent token and clears pending history
[22m[39m[35m[whatsapp][39m [36mInbound message 123@g.us -> +2 (group, 50 chars)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.supports-always-group-activation-silent-token-preserves.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2msupports always-on group activation with silent token and clears pending history
[22m[39m[35m[whatsapp][39m [36mInbound message 123@g.us -> +2 (group, 49 chars)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.supports-always-group-activation-silent-token-preserves.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2msupports always-on group activation with silent token and clears pending history
[22m[39m[35m[whatsapp][39m [36mAuto-replied to 123@g.us[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.supports-always-group-activation-silent-token-preserves.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mignores JID mentions in self-chat mode (group chats)
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.supports-always-group-activation-silent-token-preserves.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mignores JID mentions in self-chat mode (group chats)
[22m[39m[35m[whatsapp][39m [36mInbound message 123@g.us -> +2 (group, 203 chars)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.supports-always-group-activation-silent-token-preserves.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mignores JID mentions in self-chat mode (group chats)
[22m[39m[35m[whatsapp][39m [36mAuto-replied to 123@g.us[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.supports-always-group-activation-silent-token-preserves.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2memits heartbeat logs with connection metadata
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.supports-always-group-activation-silent-token-preserves.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mlogs outbound replies to file
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.supports-always-group-activation-silent-token-preserves.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mlogs outbound replies to file
[22m[39m[35m[whatsapp][39m [36mInbound message +1 -> +2 (undefined, 19 chars)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.supports-always-group-activation-silent-token-preserves.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mlogs outbound replies to file
[22m[39m[35m[whatsapp][39m [36mAuto-replied to +1[39m

 [32mâœ“[39m src/web/auto-reply.web-auto-reply.supports-always-group-activation-silent-token-preserves.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 280[2mms[22m[39m
[90mstderr[2m | src/memory/search-manager.test.ts[2m > [22m[2mgetMemorySearchManager[2m > [22m[2mhandles QMD configuration errors gracefully
[22m[39m[31m[memory][39m [33mqmd collection add failed for memory-root: spawn qmd ENOENT[39m

[90mstderr[2m | src/memory/search-manager.test.ts[2m > [22m[2mgetMemorySearchManager[2m > [22m[2mhandles QMD configuration errors gracefully
[22m[39m[31m[memory][39m [33mqmd collection add failed for memory-alt: spawn qmd ENOENT[39m

[90mstderr[2m | src/memory/search-manager.test.ts[2m > [22m[2mgetMemorySearchManager[2m > [22m[2mhandles QMD configuration errors gracefully
[22m[39m[31m[memory][39m [33mqmd collection add failed for memory-dir: spawn qmd ENOENT[39m

[90mstderr[2m | src/memory/search-manager.test.ts[2m > [22m[2mgetMemorySearchManager[2m > [22m[2mhandles QMD configuration errors gracefully
[22m[39m[31m[memory][39m [33mqmd memory unavailable; falling back to builtin: spawn qmd ENOENT[39m

[90mstderr[2m | src/memory/search-manager.test.ts[2m > [22m[2mmemory manager integration[2m > [22m[2mhandles QMD unavailability gracefully
[22m[39m[31m[memory][39m [33mqmd collection add failed for memory-root: spawn qmd ENOENT[39m

[90mstderr[2m | src/memory/search-manager.test.ts[2m > [22m[2mmemory manager integration[2m > [22m[2mhandles QMD unavailability gracefully
[22m[39m[31m[memory][39m [33mqmd collection add failed for memory-alt: spawn qmd ENOENT[39m

[90mstderr[2m | src/memory/search-manager.test.ts[2m > [22m[2mmemory manager integration[2m > [22m[2mhandles QMD unavailability gracefully
[22m[39m[31m[memory][39m [33mqmd collection add failed for memory-dir: spawn qmd ENOENT[39m

[90mstderr[2m | src/memory/search-manager.test.ts[2m > [22m[2mmemory manager integration[2m > [22m[2mhandles QMD unavailability gracefully
[22m[39m[31m[memory][39m [33mqmd memory unavailable; falling back to builtin: spawn qmd ENOENT[39m

 [32mâœ“[39m src/memory/search-manager.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 344[2mms[22m[39m
[90mstdout[2m | src/web/auto-reply.web-auto-reply.requires-mention-group-chats-injects-history-replying.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mrequires mention in group chats and injects history when replying
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.requires-mention-group-chats-injects-history-replying.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mrequires mention in group chats and injects history when replying
[22m[39m[35m[whatsapp][39m [36mInbound message 123@g.us -> +2 (group, 193 chars)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.requires-mention-group-chats-injects-history-replying.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mrequires mention in group chats and injects history when replying
[22m[39m[35m[whatsapp][39m [36mAuto-replied to 123@g.us[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.requires-mention-group-chats-injects-history-replying.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mbypasses mention gating for owner /new in group chats
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.requires-mention-group-chats-injects-history-replying.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mbypasses mention gating for owner /new in group chats
[22m[39m[35m[whatsapp][39m [36mInbound message 123@g.us -> +2 (group, 38 chars)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.requires-mention-group-chats-injects-history-replying.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mbypasses mention gating for owner /new in group chats
[22m[39m[35m[whatsapp][39m [36mAuto-replied to 123@g.us[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.requires-mention-group-chats-injects-history-replying.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mdoes not bypass mention gating for non-owner /new in group chats
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

 [32mâœ“[39m src/agents/bash-tools.process.send-keys.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 278[2mms[22m[39m
[90mstdout[2m | src/web/auto-reply.web-auto-reply.requires-mention-group-chats-injects-history-replying.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mbypasses mention gating for owner /status in group chats
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.requires-mention-group-chats-injects-history-replying.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mbypasses mention gating for owner /status in group chats
[22m[39m[35m[whatsapp][39m [36mInbound message 123@g.us -> +2 (group, 41 chars)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.requires-mention-group-chats-injects-history-replying.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mbypasses mention gating for owner /status in group chats
[22m[39m[35m[whatsapp][39m [36mAuto-replied to 123@g.us[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.requires-mention-group-chats-injects-history-replying.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mpasses conversation id through as From for group replies
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.requires-mention-group-chats-injects-history-replying.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mpasses conversation id through as From for group replies
[22m[39m[35m[whatsapp][39m [36mInbound message 123@g.us -> +2 (group, 41 chars)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.requires-mention-group-chats-injects-history-replying.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mpasses conversation id through as From for group replies
[22m[39m[35m[whatsapp][39m [36mAuto-replied to 123@g.us[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.requires-mention-group-chats-injects-history-replying.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mdetects LID mentions using authDir mapping
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.requires-mention-group-chats-injects-history-replying.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mdetects LID mentions using authDir mapping
[22m[39m[35m[whatsapp][39m [36mInbound message 123@g.us -> +2 (group, 193 chars)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.requires-mention-group-chats-injects-history-replying.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mdetects LID mentions using authDir mapping
[22m[39m[35m[whatsapp][39m [36mAuto-replied to 123@g.us[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.requires-mention-group-chats-injects-history-replying.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mderives self E.164 from LID selfJid for mention gating
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.requires-mention-group-chats-injects-history-replying.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mderives self E.164 from LID selfJid for mention gating
[22m[39m[35m[whatsapp][39m [36mInbound message 123@g.us -> +2 (group, 42 chars)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.requires-mention-group-chats-injects-history-replying.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mderives self E.164 from LID selfJid for mention gating
[22m[39m[35m[whatsapp][39m [36mAuto-replied to 123@g.us[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.requires-mention-group-chats-injects-history-replying.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2msets OriginatingTo to the sender for queued routing
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.requires-mention-group-chats-injects-history-replying.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2msets OriginatingTo to the sender for queued routing
[22m[39m[35m[whatsapp][39m [36mInbound message +15551234567 -> +19998887777 (undefined, 29 chars)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.requires-mention-group-chats-injects-history-replying.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2msets OriginatingTo to the sender for queued routing
[22m[39m[35m[whatsapp][39m [36mAuto-replied to +15551234567[39m

 [32mâœ“[39m src/web/auto-reply.web-auto-reply.requires-mention-group-chats-injects-history-replying.test.ts [2m([22m[2m8 tests[22m[2m)[22m[33m 542[2mms[22m[39m
 [32mâœ“[39m src/channels/plugins/actions/discord.test.ts [2m([22m[2m6 tests[22m[2m)[22m[33m 448[2mms[22m[39m
     [33m[2mâœ“[22m[39m lists channel and upload actions by default [33m 421[2mms[22m[39m
 [32mâœ“[39m src/signal/send-reactions.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 386[2mms[22m[39m
     [33m[2mâœ“[22m[39m uses recipients array and targetAuthor for uuid dms [33m 378[2mms[22m[39m
 [32mâœ“[39m src/cli/program.nodes-basic.test.ts [2m([22m[2m8 tests[22m[2m)[22m[33m 309[2mms[22m[39m
 [32mâœ“[39m src/infra/ports.test.ts [2m([22m[2m4 tests[22m[2m)[22m[33m 327[2mms[22m[39m
 [32mâœ“[39m src/agents/tools/web-tools.readability.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 295[2mms[22m[39m
 [32mâœ“[39m src/memory/manager.atomic-reindex.test.ts [2m([22m[2m1 test[22m[2m)[22m[33m 357[2mms[22m[39m
     [33m[2mâœ“[22m[39m keeps the prior index when a full reindex fails [33m 353[2mms[22m[39m
[90mstdout[2m | src/web/auto-reply.web-auto-reply.prefixes-body-same-phone-marker-from.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mprefixes body with same-phone marker when from === to
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.prefixes-body-same-phone-marker-from.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mprefixes body with same-phone marker when from === to
[22m[39m[35m[whatsapp][39m [36mInbound message +1555 -> +1555 (undefined, 35 chars)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.prefixes-body-same-phone-marker-from.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mprefixes body with same-phone marker when from === to
[22m[39m[35m[whatsapp][39m [36mAuto-replied to +1555[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.prefixes-body-same-phone-marker-from.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mdoes not prefix body when from !== to
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.prefixes-body-same-phone-marker-from.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mdoes not prefix body when from !== to
[22m[39m[35m[whatsapp][39m [36mInbound message +1555 -> +2666 (undefined, 22 chars)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.prefixes-body-same-phone-marker-from.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mdoes not prefix body when from !== to
[22m[39m[35m[whatsapp][39m [36mAuto-replied to +1555[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.prefixes-body-same-phone-marker-from.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mforwards reply-to context to resolver
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.prefixes-body-same-phone-marker-from.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mforwards reply-to context to resolver
[22m[39m[35m[whatsapp][39m [36mInbound message +1555 -> +2666 (undefined, 70 chars)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.prefixes-body-same-phone-marker-from.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mforwards reply-to context to resolver
[22m[39m[35m[whatsapp][39m [36mAuto-replied to +1555[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.prefixes-body-same-phone-marker-from.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mapplies responsePrefix to regular replies
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.prefixes-body-same-phone-marker-from.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mapplies responsePrefix to regular replies
[22m[39m[35m[whatsapp][39m [36mInbound message +1555 -> +2666 (undefined, 19 chars)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.prefixes-body-same-phone-marker-from.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mapplies responsePrefix to regular replies
[22m[39m[35m[whatsapp][39m [36mAuto-replied to +1555[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.prefixes-body-same-phone-marker-from.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mdefaults responsePrefix for self-chat replies when unset
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.prefixes-body-same-phone-marker-from.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mdefaults responsePrefix for self-chat replies when unset
[22m[39m[35m[whatsapp][39m [36mInbound message +1555 -> +1555 (direct, 19 chars)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.prefixes-body-same-phone-marker-from.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mdefaults responsePrefix for self-chat replies when unset
[22m[39m[35m[whatsapp][39m [36mAuto-replied to +1555[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.prefixes-body-same-phone-marker-from.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mdoes not deliver HEARTBEAT_OK responses
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.prefixes-body-same-phone-marker-from.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mdoes not deliver HEARTBEAT_OK responses
[22m[39m[35m[whatsapp][39m [36mInbound message +1555 -> +2666 (undefined, 21 chars)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.prefixes-body-same-phone-marker-from.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mdoes not double-prefix if responsePrefix already present
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.prefixes-body-same-phone-marker-from.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mdoes not double-prefix if responsePrefix already present
[22m[39m[35m[whatsapp][39m [36mInbound message +1555 -> +2666 (undefined, 21 chars)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.prefixes-body-same-phone-marker-from.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mdoes not double-prefix if responsePrefix already present
[22m[39m[35m[whatsapp][39m [36mAuto-replied to +1555[39m

 [32mâœ“[39m src/web/auto-reply.web-auto-reply.prefixes-body-same-phone-marker-from.test.ts [2m([22m[2m7 tests[22m[2m)[22m[33m 418[2mms[22m[39m
 [32mâœ“[39m src/agents/tools/web-tools.fetch.test.ts [2m([22m[2m10 tests[22m[2m)[22m[33m 344[2mms[22m[39m
 [32mâœ“[39m src/security/fix.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 282[2mms[22m[39m
 [32mâœ“[39m src/security/audit.test.ts [2m([22m[2m40 tests[22m[2m)[22m[32m 300[2mms[22m[39m
 [32mâœ“[39m src/agents/model-auth.test.ts [2m([22m[2m9 tests[22m[2m)[22m[33m 353[2mms[22m[39m
[90mstdout[2m | src/infra/heartbeat-runner.respects-ackmaxchars-heartbeat-acks.test.ts[2m > [22m[2mresolveHeartbeatIntervalMs[2m > [22m[2mskips WhatsApp delivery when not linked or running
[22m[39m[36m[heartbeat][39m [36mchannel not ready[39m

 [32mâœ“[39m src/infra/heartbeat-runner.respects-ackmaxchars-heartbeat-acks.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 240[2mms[22m[39m
[90mstdout[2m | src/web/auto-reply.typing-controller-idle.test.ts[2m > [22m[2mtyping controller idle[2m > [22m[2mmarks dispatch idle after replies flush
[22m[39m[35m[whatsapp][39m [36mInbound message +1000 -> +2000 (direct, 43 chars)[39m

[90mstdout[2m | src/web/auto-reply.typing-controller-idle.test.ts[2m > [22m[2mtyping controller idle[2m > [22m[2mmarks dispatch idle after replies flush
[22m[39m[35m[whatsapp][39m [36mAuto-replied to +1000[39m

[90mstdout[2m | src/web/auto-reply.typing-controller-idle.test.ts[2m > [22m[2mtyping controller idle[2m > [22m[2mmarks dispatch idle after replies flush
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

 [32mâœ“[39m src/web/auto-reply.typing-controller-idle.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 216[2mms[22m[39m
 [32mâœ“[39m src/process/command-queue.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 107[2mms[22m[39m
[90mstdout[2m | src/agents/bash-tools.exec.approval-id.test.ts[2m > [22m[2mexec approvals[2m > [22m[2mhonors ask=off for elevated gateway exec without prompting
[22m[39m[32m[exec][39m [36melevated command echo ok[39m

[90mstdout[2m | src/agents/bash-tools.exec.approval-id.test.ts[2m > [22m[2mexec approvals[2m > [22m[2mrequires approval for elevated ask when allowlist misses
[22m[39m[32m[exec][39m [36melevated command echo ok[39m

 [32mâœ“[39m src/agents/bash-tools.exec.approval-id.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 230[2mms[22m[39m
 [32mâœ“[39m src/slack/monitor/message-handler/prepare.inbound-contract.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 168[2mms[22m[39m
[90mstdout[2m | src/slack/monitor.tool-result.sends-tool-summaries-responseprefix.test.ts[2m > [22m[2mmonitorSlackProvider tool results[2m > [22m[2mskips tool summaries with responsePrefix
[22m[39mslack socket mode connected

[90mstdout[2m | src/slack/monitor.tool-result.sends-tool-summaries-responseprefix.test.ts[2m > [22m[2mmonitorSlackProvider tool results[2m > [22m[2mskips tool summaries with responsePrefix
[22m[39mdelivered reply to user:U1

[90mstdout[2m | src/slack/monitor.tool-result.sends-tool-summaries-responseprefix.test.ts[2m > [22m[2mmonitorSlackProvider tool results[2m > [22m[2mdrops events with mismatched api_app_id
[22m[39mslack socket mode connected

[90mstdout[2m | src/slack/monitor.tool-result.sends-tool-summaries-responseprefix.test.ts[2m > [22m[2mmonitorSlackProvider tool results[2m > [22m[2mdoes not derive responsePrefix from routed agent identity when unset
[22m[39mslack: groupPolicy defaults to "open" when channels.slack is missing; set channels.slack.groupPolicy (or channels.defaults.groupPolicy) or add channels.slack.channels to restrict access.

[90mstdout[2m | src/slack/monitor.tool-result.sends-tool-summaries-responseprefix.test.ts[2m > [22m[2mmonitorSlackProvider tool results[2m > [22m[2mdoes not derive responsePrefix from routed agent identity when unset
[22m[39mslack socket mode connected

[90mstdout[2m | src/slack/monitor.tool-result.sends-tool-summaries-responseprefix.test.ts[2m > [22m[2mmonitorSlackProvider tool results[2m > [22m[2mdoes not derive responsePrefix from routed agent identity when unset
[22m[39mdelivered reply to user:U1

[90mstdout[2m | src/slack/monitor.tool-result.sends-tool-summaries-responseprefix.test.ts[2m > [22m[2mmonitorSlackProvider tool results[2m > [22m[2mpreserves RawBody without injecting processed room history
[22m[39mslack socket mode connected

[90mstdout[2m | src/slack/monitor.tool-result.sends-tool-summaries-responseprefix.test.ts[2m > [22m[2mmonitorSlackProvider tool results[2m > [22m[2mscopes thread history to the thread by default
[22m[39mslack channels unresolved: C1
slack socket mode connected

[90mstdout[2m | src/slack/monitor.tool-result.sends-tool-summaries-responseprefix.test.ts[2m > [22m[2mmonitorSlackProvider tool results[2m > [22m[2mupdates assistant thread status when replies start
[22m[39mslack socket mode connected

[90mstdout[2m | src/slack/monitor.tool-result.sends-tool-summaries-responseprefix.test.ts[2m > [22m[2mmonitorSlackProvider tool results[2m > [22m[2mupdates assistant thread status when replies start
[22m[39mdelivered reply to user:U1

[90mstdout[2m | src/slack/monitor.tool-result.sends-tool-summaries-responseprefix.test.ts[2m > [22m[2mmonitorSlackProvider tool results[2m > [22m[2maccepts channel messages when mentionPatterns match
[22m[39mslack channels unresolved: C1
slack socket mode connected

[90mstdout[2m | src/slack/monitor.tool-result.sends-tool-summaries-responseprefix.test.ts[2m > [22m[2mmonitorSlackProvider tool results[2m > [22m[2maccepts channel messages when mentionPatterns match
[22m[39mdelivered reply to channel:C1

[90mstdout[2m | src/slack/monitor.tool-result.sends-tool-summaries-responseprefix.test.ts[2m > [22m[2mmonitorSlackProvider tool results[2m > [22m[2maccepts channel messages when mentionPatterns match even if another user is mentioned
[22m[39mslack channels unresolved: C1
slack socket mode connected

[90mstdout[2m | src/slack/monitor.tool-result.sends-tool-summaries-responseprefix.test.ts[2m > [22m[2mmonitorSlackProvider tool results[2m > [22m[2maccepts channel messages when mentionPatterns match even if another user is mentioned
[22m[39mdelivered reply to channel:C1

[90mstdout[2m | src/slack/monitor.tool-result.sends-tool-summaries-responseprefix.test.ts[2m > [22m[2mmonitorSlackProvider tool results[2m > [22m[2mtreats replies to bot threads as implicit mentions
[22m[39mslack channels unresolved: C1
slack socket mode connected

[90mstdout[2m | src/slack/monitor.tool-result.sends-tool-summaries-responseprefix.test.ts[2m > [22m[2mmonitorSlackProvider tool results[2m > [22m[2mtreats replies to bot threads as implicit mentions
[22m[39mdelivered reply to channel:C1

[90mstdout[2m | src/slack/monitor.tool-result.sends-tool-summaries-responseprefix.test.ts[2m > [22m[2mmonitorSlackProvider tool results[2m > [22m[2maccepts channel messages without mention when channels.slack.requireMention is false
[22m[39mslack socket mode connected

[90mstdout[2m | src/slack/monitor.tool-result.sends-tool-summaries-responseprefix.test.ts[2m > [22m[2mmonitorSlackProvider tool results[2m > [22m[2maccepts channel messages without mention when channels.slack.requireMention is false
[22m[39mdelivered reply to channel:C1

[90mstdout[2m | src/slack/monitor.tool-result.sends-tool-summaries-responseprefix.test.ts[2m > [22m[2mmonitorSlackProvider tool results[2m > [22m[2mtreats control commands as mentions for group bypass
[22m[39mslack socket mode connected

[90mstdout[2m | src/slack/monitor.tool-result.sends-tool-summaries-responseprefix.test.ts[2m > [22m[2mmonitorSlackProvider tool results[2m > [22m[2mtreats control commands as mentions for group bypass
[22m[39mdelivered reply to channel:C1

[90mstdout[2m | src/slack/monitor.tool-result.sends-tool-summaries-responseprefix.test.ts[2m > [22m[2mmonitorSlackProvider tool results[2m > [22m[2mthreads replies when incoming message is in a thread
[22m[39mslack: groupPolicy defaults to "open" when channels.slack is missing; set channels.slack.groupPolicy (or channels.defaults.groupPolicy) or add channels.slack.channels to restrict access.

[90mstdout[2m | src/slack/monitor.tool-result.sends-tool-summaries-responseprefix.test.ts[2m > [22m[2mmonitorSlackProvider tool results[2m > [22m[2mthreads replies when incoming message is in a thread
[22m[39mslack socket mode connected

[90mstdout[2m | src/slack/monitor.tool-result.sends-tool-summaries-responseprefix.test.ts[2m > [22m[2mmonitorSlackProvider tool results[2m > [22m[2mthreads replies when incoming message is in a thread
[22m[39mdelivered reply to user:U1

 [32mâœ“[39m src/slack/monitor.tool-result.sends-tool-summaries-responseprefix.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 263[2mms[22m[39m
 [32mâœ“[39m src/memory/manager.async-search.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 187[2mms[22m[39m
 [32mâœ“[39m src/infra/tailscale.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 231[2mms[22m[39m
[90mstdout[2m | src/telegram/send.returns-undefined-empty-input.test.ts[2m > [22m[2msendMessageTelegram[2m > [22m[2mpasses timeoutSeconds to grammY client when configured
[22m[39m[34m[telegram][39m [36mautoSelectFamily=false (default-node22)[39m

[90mstderr[2m | src/telegram/send.returns-undefined-empty-input.test.ts[2m > [22m[2msendMessageTelegram[2m > [22m[2mfalls back to plain text when Telegram rejects HTML
[22m[39m[34m[telegram][39m [31mmessage failed: 400: Bad Request: can't parse entities: Can't find end of the entity starting at byte offset 9[39m

[90mstderr[2m | src/telegram/send.returns-undefined-empty-input.test.ts[2m > [22m[2msendMessageTelegram[2m > [22m[2mfalls back to plain text when Telegram rejects HTML
[22m[39mtelegram HTML parse failed, retrying as plain text: 400: Bad Request: can't parse entities: Can't find end of the entity starting at byte offset 9

[90mstderr[2m | src/telegram/send.returns-undefined-empty-input.test.ts[2m > [22m[2msendMessageTelegram[2m > [22m[2mkeeps link_preview_options on plain-text fallback when disabled
[22m[39m[34m[telegram][39m [31mmessage failed: 400: Bad Request: can't parse entities: Can't find end of the entity starting at byte offset 9[39m

[90mstderr[2m | src/telegram/send.returns-undefined-empty-input.test.ts[2m > [22m[2msendMessageTelegram[2m > [22m[2mwraps chat-not-found with actionable context
[22m[39m[34m[telegram][39m [31mmessage failed: 400: Bad Request: chat not found[39m

[90mstderr[2m | src/telegram/send.returns-undefined-empty-input.test.ts[2m > [22m[2msendMessageTelegram[2m > [22m[2mwraps chat-not-found with actionable context
[22m[39m[34m[telegram][39m [31mmessage failed: 400: Bad Request: chat not found[39m

[90mstderr[2m | src/telegram/send.returns-undefined-empty-input.test.ts[2m > [22m[2msendMessageTelegram[2m > [22m[2mdoes not retry on non-transient errors
[22m[39m[34m[telegram][39m [31mmessage failed: 400: Bad Request[39m

 [32mâœ“[39m src/telegram/send.returns-undefined-empty-input.test.ts [2m([22m[2m31 tests[22m[2m)[22m[32m 248[2mms[22m[39m
 [32mâœ“[39m src/infra/heartbeat-runner.returns-default-unset.test.ts [2m([22m[2m29 tests[22m[2m)[22m[32m 125[2mms[22m[39m
[90mstderr[2m | src/memory/manager.sync-errors-do-not-crash.test.ts[2m > [22m[2mmemory manager sync failures[2m > [22m[2mdoes not raise unhandledRejection when watch-triggered sync fails
[22m[39m[31m[memory][39m [33msync failed (watch): Error: openai embeddings failed: 400 bad request[39m

 [32mâœ“[39m src/memory/manager.sync-errors-do-not-crash.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 179[2mms[22m[39m
 [32mâœ“[39m src/process/exec.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 257[2mms[22m[39m
 [32mâœ“[39m src/agents/pi-tools.create-openclaw-coding-tools.adds-claude-style-aliases-schemas-without-dropping-d.test.ts [2m([22m[2m5 tests[22m[2m)[22m[33m 310[2mms[22m[39m
[90mstdout[2m | src/web/outbound.test.ts[2m > [22m[2mweb outbound[2m > [22m[2msends message via active listener
[22m[39m[35m[whatsapp][39m [36mSending message -> 1555@s.whatsapp.net[39m

[90mstdout[2m | src/web/outbound.test.ts[2m > [22m[2mweb outbound[2m > [22m[2msends message via active listener
[22m[39m[35m[whatsapp][39m [36mSent message msg123 -> 1555@s.whatsapp.net (75ms)[39m

[90mstdout[2m | src/web/outbound.test.ts[2m > [22m[2mweb outbound[2m > [22m[2mmaps audio to PTT with opus mime when ogg
[22m[39m[35m[whatsapp][39m [36mSending message -> 1555@s.whatsapp.net (media)[39m

[90mstdout[2m | src/web/outbound.test.ts[2m > [22m[2mweb outbound[2m > [22m[2mmaps audio to PTT with opus mime when ogg
[22m[39m[35m[whatsapp][39m [36mSent message msg123 -> 1555@s.whatsapp.net (media) (9ms)[39m

[90mstdout[2m | src/web/outbound.test.ts[2m > [22m[2mweb outbound[2m > [22m[2mmaps video with caption
[22m[39m[35m[whatsapp][39m [36mSending message -> 1555@s.whatsapp.net (media)[39m

[90mstdout[2m | src/web/outbound.test.ts[2m > [22m[2mweb outbound[2m > [22m[2mmaps video with caption
[22m[39m[35m[whatsapp][39m [36mSent message msg123 -> 1555@s.whatsapp.net (media) (9ms)[39m

[90mstdout[2m | src/web/outbound.test.ts[2m > [22m[2mweb outbound[2m > [22m[2mmarks gif playback for video when requested
[22m[39m[35m[whatsapp][39m [36mSending message -> 1555@s.whatsapp.net (media)[39m

[90mstdout[2m | src/web/outbound.test.ts[2m > [22m[2mweb outbound[2m > [22m[2mmarks gif playback for video when requested
[22m[39m[35m[whatsapp][39m [36mSent message msg123 -> 1555@s.whatsapp.net (media) (3ms)[39m

[90mstdout[2m | src/web/outbound.test.ts[2m > [22m[2mweb outbound[2m > [22m[2mmaps image with caption
[22m[39m[35m[whatsapp][39m [36mSending message -> 1555@s.whatsapp.net (media)[39m

[90mstdout[2m | src/web/outbound.test.ts[2m > [22m[2mweb outbound[2m > [22m[2mmaps image with caption
[22m[39m[35m[whatsapp][39m [36mSent message msg123 -> 1555@s.whatsapp.net (media) (15ms)[39m

[90mstdout[2m | src/web/outbound.test.ts[2m > [22m[2mweb outbound[2m > [22m[2mmaps other kinds to document with filename
[22m[39m[35m[whatsapp][39m [36mSending message -> 1555@s.whatsapp.net (media)[39m

[90mstdout[2m | src/web/outbound.test.ts[2m > [22m[2mweb outbound[2m > [22m[2mmaps other kinds to document with filename
[22m[39m[35m[whatsapp][39m [36mSent message msg123 -> 1555@s.whatsapp.net (media) (3ms)[39m

[90mstdout[2m | src/web/outbound.test.ts[2m > [22m[2mweb outbound[2m > [22m[2msends polls via active listener
[22m[39m[35m[whatsapp][39m [36mSending poll -> 1555@s.whatsapp.net: "Lunch?"[39m

[90mstdout[2m | src/web/outbound.test.ts[2m > [22m[2mweb outbound[2m > [22m[2msends polls via active listener
[22m[39m[35m[whatsapp][39m [36mSent poll poll123 -> 1555@s.whatsapp.net (2ms)[39m

[90mstdout[2m | src/web/outbound.test.ts[2m > [22m[2mweb outbound[2m > [22m[2msends reactions via active listener
[22m[39m[35m[whatsapp][39m [36mSending reaction "âœ…" -> message msg123[39m

[90mstdout[2m | src/web/outbound.test.ts[2m > [22m[2mweb outbound[2m > [22m[2msends reactions via active listener
[22m[39m[35m[whatsapp][39m [36mSent reaction "âœ…" -> message msg123[39m

 [32mâœ“[39m src/web/outbound.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 181[2mms[22m[39m
[90mstdout[2m | src/agents/cli-credentials.test.ts[2m > [22m[2mcli credentials[2m > [22m[2mupdates the Claude Code keychain item in place
[22m[39m[33m[agents/auth-profiles][39m [36mwrote refreshed credentials to claude cli keychain[39m

[90mstdout[2m | src/agents/cli-credentials.test.ts[2m > [22m[2mcli credentials[2m > [22m[2mfalls back to the file store when the keychain update fails
[22m[39m[33m[agents/auth-profiles][39m [36mwrote refreshed credentials to claude cli file[39m

[90mstdout[2m | src/agents/cli-credentials.test.ts[2m > [22m[2mcli credentials[2m > [22m[2mcaches Claude Code CLI credentials within the TTL window
[22m[39m[33m[agents/auth-profiles][39m [36mread anthropic credentials from claude cli keychain[39m

[90mstdout[2m | src/agents/cli-credentials.test.ts[2m > [22m[2mcli credentials[2m > [22m[2mrefreshes Claude Code CLI credentials after the TTL window
[22m[39m[33m[agents/auth-profiles][39m [36mread anthropic credentials from claude cli keychain[39m
[33m[agents/auth-profiles][39m [36mread anthropic credentials from claude cli keychain[39m

[90mstdout[2m | src/agents/cli-credentials.test.ts[2m > [22m[2mcli credentials[2m > [22m[2mreads Codex credentials from keychain when available
[22m[39m[33m[agents/auth-profiles][39m [36mread codex credentials from keychain[39m

 [32mâœ“[39m src/agents/cli-credentials.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 238[2mms[22m[39m
[90mstdout[2m | src/web/auto-reply.web-auto-reply.uses-per-agent-mention-patterns-group-gating.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2muses per-agent mention patterns for group gating
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.uses-per-agent-mention-patterns-group-gating.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2muses per-agent mention patterns for group gating
[22m[39m[35m[whatsapp][39m [36mInbound message 123@g.us -> +2 (group, 198 chars)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.uses-per-agent-mention-patterns-group-gating.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2muses per-agent mention patterns for group gating
[22m[39m[35m[whatsapp][39m [36mAuto-replied to 123@g.us[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.uses-per-agent-mention-patterns-group-gating.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mallows group messages when whatsapp groups default disables mention gating
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.uses-per-agent-mention-patterns-group-gating.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mallows group messages when whatsapp groups default disables mention gating
[22m[39m[35m[whatsapp][39m [36mInbound message 123@g.us -> +2 (group, 45 chars)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.uses-per-agent-mention-patterns-group-gating.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mallows group messages when whatsapp groups default disables mention gating
[22m[39m[35m[whatsapp][39m [36mAuto-replied to 123@g.us[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.uses-per-agent-mention-patterns-group-gating.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mblocks group messages when whatsapp groups is set without a wildcard
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.uses-per-agent-mention-patterns-group-gating.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mhonors per-group mention overrides when conversationId uses session key
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.uses-per-agent-mention-patterns-group-gating.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mhonors per-group mention overrides when conversationId uses session key
[22m[39m[35m[whatsapp][39m [36mInbound message whatsapp:group:123@g.us -> +2 (group, 60 chars)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.uses-per-agent-mention-patterns-group-gating.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mhonors per-group mention overrides when conversationId uses session key
[22m[39m[35m[whatsapp][39m [36mAuto-replied to whatsapp:group:123@g.us[39m

 [32mâœ“[39m src/web/auto-reply.web-auto-reply.uses-per-agent-mention-patterns-group-gating.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 218[2mms[22m[39m
[90mstderr[2m | src/agents/pi-tools-agent-config.test.ts[2m > [22m[2mAgent-specific tool filtering[2m > [22m[2mshould apply provider-specific tool profile overrides
[22m[39m[34m[tools][39m [33mtools.profile (coding) allowlist contains unknown entries (group:memory). These entries won't match any tool unless the plugin is enabled.[39m

 [32mâœ“[39m src/agents/pi-tools-agent-config.test.ts [2m([22m[2m15 tests[22m[2m)[22m[32m 167[2mms[22m[39m
 [32mâœ“[39m src/infra/session-cost-usage.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 87[2mms[22m[39m
[90mstdout[2m | src/imessage/monitor.skips-group-messages-without-mention-by-default.test.ts[2m > [22m[2mmonitorIMessageProvider[2m > [22m[2mallows group messages when imessage groups default disables mention gating
[22m[39mimessage: delivered reply to chat_id:123

[90mstdout[2m | src/imessage/monitor.skips-group-messages-without-mention-by-default.test.ts[2m > [22m[2mmonitorIMessageProvider[2m > [22m[2mallows group messages when requireMention is true but no mentionPatterns exist
[22m[39mimessage: delivered reply to chat_id:777

[90mstdout[2m | src/imessage/monitor.skips-group-messages-without-mention-by-default.test.ts[2m > [22m[2mmonitorIMessageProvider[2m > [22m[2mtreats configured chat_id as a group session even when is_group is false
[22m[39mimessage: delivered reply to chat_id:2

[90mstdout[2m | src/imessage/monitor.skips-group-messages-without-mention-by-default.test.ts[2m > [22m[2mmonitorIMessageProvider[2m > [22m[2mprefixes final replies with responsePrefix
[22m[39mimessage: delivered reply to imessage:+15550001111

[90mstdout[2m | src/imessage/monitor.skips-group-messages-without-mention-by-default.test.ts[2m > [22m[2mmonitorIMessageProvider[2m > [22m[2mdelivers group replies when mentioned
[22m[39mimessage: delivered reply to chat_id:42

[90mstdout[2m | src/imessage/monitor.skips-group-messages-without-mention-by-default.test.ts[2m > [22m[2mmonitorIMessageProvider[2m > [22m[2mprefixes group message bodies with sender
[22m[39mimessage: delivered reply to chat_id:99

[90mstdout[2m | src/imessage/monitor.skips-group-messages-without-mention-by-default.test.ts[2m > [22m[2mmonitorIMessageProvider[2m > [22m[2mincludes reply context when imessage reply metadata is present
[22m[39mimessage: delivered reply to imessage:+15550001111

 [32mâœ“[39m src/imessage/monitor.skips-group-messages-without-mention-by-default.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 185[2mms[22m[39m
 [32mâœ“[39m src/browser/extension-relay.test.ts [2m([22m[2m4 tests[22m[2m)[22m[33m 325[2mms[22m[39m
[90mstdout[2m | src/slack/monitor.tool-result.threads-top-level-replies-replytomode-is-all.test.ts[2m > [22m[2mmonitorSlackProvider tool results[2m > [22m[2mthreads top-level replies when replyToMode is all
[22m[39mslack: groupPolicy defaults to "open" when channels.slack is missing; set channels.slack.groupPolicy (or channels.defaults.groupPolicy) or add channels.slack.channels to restrict access.

[90mstdout[2m | src/slack/monitor.tool-result.threads-top-level-replies-replytomode-is-all.test.ts[2m > [22m[2mmonitorSlackProvider tool results[2m > [22m[2mthreads top-level replies when replyToMode is all
[22m[39mslack socket mode connected

[90mstdout[2m | src/slack/monitor.tool-result.threads-top-level-replies-replytomode-is-all.test.ts[2m > [22m[2mmonitorSlackProvider tool results[2m > [22m[2mthreads top-level replies when replyToMode is all
[22m[39mdelivered reply to user:U1

[90mstdout[2m | src/slack/monitor.tool-result.threads-top-level-replies-replytomode-is-all.test.ts[2m > [22m[2mmonitorSlackProvider tool results[2m > [22m[2mtreats parent_user_id as a thread reply even when thread_ts matches ts
[22m[39mslack socket mode connected

[90mstdout[2m | src/slack/monitor.tool-result.threads-top-level-replies-replytomode-is-all.test.ts[2m > [22m[2mmonitorSlackProvider tool results[2m > [22m[2mtreats parent_user_id as a thread reply even when thread_ts matches ts
[22m[39mdelivered reply to user:U1

[90mstdout[2m | src/slack/monitor.tool-result.threads-top-level-replies-replytomode-is-all.test.ts[2m > [22m[2mmonitorSlackProvider tool results[2m > [22m[2mkeeps thread parent inheritance opt-in
[22m[39mslack channels unresolved: C1
slack socket mode connected

[90mstdout[2m | src/slack/monitor.tool-result.threads-top-level-replies-replytomode-is-all.test.ts[2m > [22m[2mmonitorSlackProvider tool results[2m > [22m[2mkeeps thread parent inheritance opt-in
[22m[39mdelivered reply to channel:C1

[90mstdout[2m | src/slack/monitor.tool-result.threads-top-level-replies-replytomode-is-all.test.ts[2m > [22m[2mmonitorSlackProvider tool results[2m > [22m[2minjects starter context for thread replies
[22m[39mslack channels unresolved: C1
slack socket mode connected

[90mstdout[2m | src/slack/monitor.tool-result.threads-top-level-replies-replytomode-is-all.test.ts[2m > [22m[2mmonitorSlackProvider tool results[2m > [22m[2minjects starter context for thread replies
[22m[39mdelivered reply to channel:C1

[90mstdout[2m | src/slack/monitor.tool-result.threads-top-level-replies-replytomode-is-all.test.ts[2m > [22m[2mmonitorSlackProvider tool results[2m > [22m[2mscopes thread session keys to the routed agent
[22m[39mslack channels unresolved: C1
slack socket mode connected

[90mstdout[2m | src/slack/monitor.tool-result.threads-top-level-replies-replytomode-is-all.test.ts[2m > [22m[2mmonitorSlackProvider tool results[2m > [22m[2mscopes thread session keys to the routed agent
[22m[39mdelivered reply to channel:C1

[90mstdout[2m | src/slack/monitor.tool-result.threads-top-level-replies-replytomode-is-all.test.ts[2m > [22m[2mmonitorSlackProvider tool results[2m > [22m[2mkeeps replies in channel root when message is not threaded (replyToMode off)
[22m[39mslack: groupPolicy defaults to "open" when channels.slack is missing; set channels.slack.groupPolicy (or channels.defaults.groupPolicy) or add channels.slack.channels to restrict access.

[90mstdout[2m | src/slack/monitor.tool-result.threads-top-level-replies-replytomode-is-all.test.ts[2m > [22m[2mmonitorSlackProvider tool results[2m > [22m[2mkeeps replies in channel root when message is not threaded (replyToMode off)
[22m[39mslack socket mode connected

[90mstdout[2m | src/slack/monitor.tool-result.threads-top-level-replies-replytomode-is-all.test.ts[2m > [22m[2mmonitorSlackProvider tool results[2m > [22m[2mkeeps replies in channel root when message is not threaded (replyToMode off)
[22m[39mdelivered reply to user:U1

[90mstdout[2m | src/slack/monitor.tool-result.threads-top-level-replies-replytomode-is-all.test.ts[2m > [22m[2mmonitorSlackProvider tool results[2m > [22m[2mthreads first reply when replyToMode is first and message is not threaded
[22m[39mslack: groupPolicy defaults to "open" when channels.slack is missing; set channels.slack.groupPolicy (or channels.defaults.groupPolicy) or add channels.slack.channels to restrict access.

[90mstdout[2m | src/slack/monitor.tool-result.threads-top-level-replies-replytomode-is-all.test.ts[2m > [22m[2mmonitorSlackProvider tool results[2m > [22m[2mthreads first reply when replyToMode is first and message is not threaded
[22m[39mslack socket mode connected

[90mstdout[2m | src/slack/monitor.tool-result.threads-top-level-replies-replytomode-is-all.test.ts[2m > [22m[2mmonitorSlackProvider tool results[2m > [22m[2mthreads first reply when replyToMode is first and message is not threaded
[22m[39mdelivered reply to user:U1

 [32mâœ“[39m src/slack/monitor.tool-result.threads-top-level-replies-replytomode-is-all.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 233[2mms[22m[39m
 [32mâœ“[39m src/docker-setup.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 243[2mms[22m[39m
 [32mâœ“[39m src/wizard/onboarding.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 282[2mms[22m[39m
 [32mâœ“[39m src/browser/pw-ai.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 171[2mms[22m[39m
 [32mâœ“[39m src/infra/outbound/message-action-runner.test.ts [2m([22m[2m18 tests[22m[2m)[22m[32m 161[2mms[22m[39m
 [32mâœ“[39m src/config/config.backup-rotation.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 145[2mms[22m[39m
 [32mâœ“[39m src/auto-reply/reply/queue.collect-routing.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 91[2mms[22m[39m
 [32mâœ“[39m src/memory/embeddings.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 238[2mms[22m[39m
[90mstdout[2m | src/web/auto-reply.web-auto-reply.sends-tool-summaries-immediately-responseprefix.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mskips tool summaries and sends final reply with responsePrefix
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.sends-tool-summaries-immediately-responseprefix.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mskips tool summaries and sends final reply with responsePrefix
[22m[39m[35m[whatsapp][39m [36mInbound message +1555 -> +2666 (undefined, 19 chars)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.sends-tool-summaries-immediately-responseprefix.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mskips tool summaries and sends final reply with responsePrefix
[22m[39m[35m[whatsapp][39m [36mAuto-replied to +1555[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.sends-tool-summaries-immediately-responseprefix.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2muses identity.name for messagePrefix when set
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.sends-tool-summaries-immediately-responseprefix.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2muses identity.name for messagePrefix when set
[22m[39m[35m[whatsapp][39m [36mInbound message +1555 -> +2666 (undefined, 29 chars)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.sends-tool-summaries-immediately-responseprefix.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2muses identity.name for messagePrefix when set
[22m[39m[35m[whatsapp][39m [36mAuto-replied to +1555[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.sends-tool-summaries-immediately-responseprefix.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mdoes not derive responsePrefix from identity.name when unset
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.sends-tool-summaries-immediately-responseprefix.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mdoes not derive responsePrefix from identity.name when unset
[22m[39m[35m[whatsapp][39m [36mInbound message +1555 -> +2666 (undefined, 29 chars)[39m

[90mstdout[2m | src/web/auto-reply.web-auto-reply.sends-tool-summaries-immediately-responseprefix.test.ts[2m > [22m[2mweb auto-reply[2m > [22m[2mdoes not derive responsePrefix from identity.name when unset
[22m[39m[35m[whatsapp][39m [36mAuto-replied to +1555[39m

 [32mâœ“[39m src/web/auto-reply.web-auto-reply.sends-tool-summaries-immediately-responseprefix.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 133[2mms[22m[39m
 [32mâœ“[39m src/browser/server-context.remote-tab-ops.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 144[2mms[22m[39m
 [32mâœ“[39m src/telegram/bot-message-context.dm-threads.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 173[2mms[22m[39m
[90mstdout[2m | src/web/auto-reply.broadcast-groups.skips-unknown-broadcast-agent-ids-agents-list.test.ts[2m > [22m[2mbroadcast groups[2m > [22m[2mskips unknown broadcast agent ids when agents.list is present
[22m[39m[35m[whatsapp][39m [36mListening for personal WhatsApp inbound messages.[39m

[90mstderr[2m | src/web/auto-reply.broadcast-groups.skips-unknown-broadcast-agent-ids-agents-list.test.ts[2m > [22m[2mbroadcast groups[2m > [22m[2mskips unknown broadcast agent ids when agents.list is present
[22m[39m[35m[whatsapp][39m [33mBroadcast agent missing not found in agents.list; skipping[39m

[90mstdout[2m | src/web/auto-reply.broadcast-groups.skips-unknown-broadcast-agent-ids-agents-list.test.ts[2m > [22m[2mbroadcast groups[2m > [22m[2mskips unknown broadcast agent ids when agents.list is present
[22m[39m[35m[whatsapp][39m [36mBroadcasting message to 2 agents (parallel)[39m
[35m[whatsapp][39m [36mInbound message +1000 -> +2000 (direct, 43 chars)[39m

[90mstdout[2m | src/web/auto-reply.broadcast-groups.skips-unknown-broadcast-agent-ids-agents-list.test.ts[2m > [22m[2mbroadcast groups[2m > [22m[2mskips unknown broadcast agent ids when agents.list is present
[22m[39m[35m[whatsapp][39m [36mAuto-replied to +1000[39m

 [32mâœ“[39m src/web/auto-reply.broadcast-groups.skips-unknown-broadcast-agent-ids-agents-list.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 235[2mms[22m[39m
 [32mâœ“[39m src/cron/service.runs-one-shot-main-job-disables-it.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 93[2mms[22m[39m
 [32mâœ“[39m src/config/io.compat.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 324[2mms[22m[39m
     [33m[2mâœ“[22m[39m uses ~/.openclaw/openclaw.json when config exists [33m 301[2mms[22m[39m
[90mstdout[2m | src/telegram/send.caption-split.test.ts[2m > [22m[2msendMessageTelegram caption splitting[2m > [22m[2msplits long captions into media + text messages when text exceeds 1024 chars
[22m[39m[34m[telegram][39m [36mautoSelectFamily=false (default-node22)[39m

[90mstderr[2m | src/telegram/send.caption-split.test.ts[2m > [22m[2msendMessageTelegram caption splitting[2m > [22m[2mwraps chat-not-found errors from follow-up message
[22m[39m[34m[telegram][39m [31mmessage failed: 400: Bad Request: chat not found[39m

 [32mâœ“[39m src/telegram/send.caption-split.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 159[2mms[22m[39m
 [32mâœ“[39m src/auto-reply/reply/session.test.ts [2m([22m[2m14 tests[22m[2m)[22m[32m 232[2mms[22m[39m
 [32mâœ“[39m src/memory/manager.vector-dedupe.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 158[2mms[22m[39m
 [32mâœ“[39m src/agents/bash-tools.exec.pty.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 135[2mms[22m[39m
 [31mâ¯[39m src/process/spawn-utils.test.ts [2m([22m[2m17 tests[22m[2m | [22m[31m8 failed[39m[2m)[22m[33m 840705[2mms[22m[39m
     [32mâœ“[39m returns pipe for stdin when hasInput is true[32m 31[2mms[22m[39m
     [32mâœ“[39m returns inherit for stdin when hasInput is false and preferInherit is true[32m 1[2mms[22m[39m
     [32mâœ“[39m returns pipe for stdin when hasInput is false and preferInherit is false[32m 0[2mms[22m[39m
     [32mâœ“[39m formats basic error message[32m 1[2mms[22m[39m
     [32mâœ“[39m includes error code[32m 25[2mms[22m[39m
     [32mâœ“[39m includes syscall information[32m 0[2mms[22m[39m
     [32mâœ“[39m includes errno[32m 1[2mms[22m[39m
     [32mâœ“[39m handles non-Error objects[32m 0[2mms[22m[39m
     [32mâœ“[39m handles empty error[32m 1[2mms[22m[39m
[31m     [31mÃ—[31m spawns process successfully with primary options[39m[33m 120030[2mms[22m[39m
[31m     [31mÃ—[31m uses fallback when primary spawn fails[39m[33m 120105[2mms[22m[39m
[31m     [31mÃ—[31m throws error when no fallback can handle the error[39m[33m 120101[2mms[22m[39m
[31m     [31mÃ—[31m throws error when all fallbacks fail[39m[33m 120103[2mms[22m[39m
[31m     [31mÃ—[31m handles multiple fallbacks[39m[33m 120104[2mms[22m[39m
[31m     [31mÃ—[31m uses custom retry codes[39m[33m 120100[2mms[22m[39m
[31m     [31mÃ—[31m handles child with existing PID[39m[33m 120100[2mms[22m[39m
[31m     [31mÃ—[31m uses default spawn implementation when not provided[39m[32m 1[2mms[22m[39m
[90mstdout[2m | src/hooks/loader.test.ts[2m > [22m[2mloader[2m > [22m[2mloadInternalHooks[2m > [22m[2mshould load a handler from a module
[22m[39mRegistered hook (legacy): command:new -> /tmp/openclaw-test-1770577276863/test-handler.js

[90mstdout[2m | src/hooks/loader.test.ts[2m > [22m[2mloader[2m > [22m[2mloadInternalHooks[2m > [22m[2mshould load multiple handlers
[22m[39mRegistered hook (legacy): command:new -> /tmp/openclaw-test-1770577276891/handler1.js

[90mstdout[2m | src/hooks/loader.test.ts[2m > [22m[2mloader[2m > [22m[2mloadInternalHooks[2m > [22m[2mshould load multiple handlers
[22m[39mRegistered hook (legacy): command:stop -> /tmp/openclaw-test-1770577276891/handler2.js

[90mstdout[2m | src/hooks/loader.test.ts[2m > [22m[2mloader[2m > [22m[2mloadInternalHooks[2m > [22m[2mshould support named exports
[22m[39mRegistered hook (legacy): command:new -> /tmp/openclaw-test-1770577276906/named-export.js#myHandler

[90mstdout[2m | src/hooks/loader.test.ts[2m > [22m[2mloader[2m > [22m[2mloadInternalHooks[2m > [22m[2mshould handle relative paths
[22m[39mRegistered hook (legacy): command:new -> /tmp/openclaw-test-1770577276973/relative-handler.js

[90mstdout[2m | src/hooks/loader.test.ts[2m > [22m[2mloader[2m > [22m[2mloadInternalHooks[2m > [22m[2mshould actually call the loaded handler
[22m[39mRegistered hook (legacy): command:new -> /tmp/openclaw-test-1770577276982/callable-handler.js

 [32mâœ“[39m src/hooks/loader.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 164[2mms[22m[39m
 [32mâœ“[39m src/browser/cdp.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 181[2mms[22m[39m
 [32mâœ“[39m src/commands/doctor-state-migrations.test.ts [2m([22m[2m14 tests[22m[2m)[22m[32m 156[2mms[22m[39m
 [32mâœ“[39m src/cli/nodes-cli.coverage.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 154[2mms[22m[39m
 [32mâœ“[39m src/auto-reply/reply.media-note.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 189[2mms[22m[39m
[90mstdout[2m | src/cli/memory-cli.test.ts[2m > [22m[2mmemory cli[2m > [22m[2menables verbose logging with --verbose
[22m[39mMemory Search (main)
Provider: openai (requested: openai)
Model: text-embedding-3-small
Indexed: 0/0 files Â· 0 chunks
Dirty: no
Store: /tmp/memory.sqlite
Workspace: /tmp/openclaw
Vector: ready
Issues:
  memory directory missing (/tmp/openclaw/memory)


[90mstdout[2m | src/cli/memory-cli.test.ts[2m > [22m[2mmemory cli[2m > [22m[2mlogs close failure after status
[22m[39mMemory Search (main)
Provider: openai (requested: openai)
Model: text-embedding-3-small
Indexed: 1/0 files Â· 1 chunks
Dirty: no
Store: /tmp/memory.sqlite
Workspace: /tmp/openclaw
Issues:
  memory directory missing (/tmp/openclaw/memory)


[90mstdout[2m | src/cli/memory-cli.test.ts[2m > [22m[2mmemory cli[2m > [22m[2mlogs close failures without failing the command
[22m[39mMemory index updated (main).

[90mstdout[2m | src/cli/memory-cli.test.ts[2m > [22m[2mmemory cli[2m > [22m[2mlogs close failure after search
[22m[39m0.500 memory/2026-01-12.md:1-2
Hello

 [32mâœ“[39m src/cli/memory-cli.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 136[2mms[22m[39m
 [32mâœ“[39m src/infra/provider-usage.fetch.antigravity.test.ts [2m([22m[2m18 tests[22m[2m)[22m[32m 125[2mms[22m[39m
 [32mâœ“[39m src/config/schema.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 149[2mms[22m[39m
 [32mâœ“[39m src/discord/monitor/message-handler.inbound-contract.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 79[2mms[22m[39m
 [32mâœ“[39m src/auto-reply/reply/commands.test.ts [2m([22m[2m21 tests[22m[2m)[22m[32m 139[2mms[22m[39m
 [32mâœ“[39m src/commands/gateway-status.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 214[2mms[22m[39m
 [32mâœ“[39m src/discord/send.creates-thread.test.ts [2m([22m[2m16 tests[22m[2m)[22m[32m 171[2mms[22m[39m
 [32mâœ“[39m src/discord/monitor.tool-result.sends-status-replies-responseprefix.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 153[2mms[22m[39m
[90mstdout[2m | src/signal/monitor.tool-result.sends-tool-summaries-responseprefix.test.ts[2m > [22m[2mmonitorSignalProvider tool results[2m > [22m[2mskips tool summaries with responsePrefix
[22m[39mdelivered reply to signal:+15550001111

[90mstdout[2m | src/signal/monitor.tool-result.sends-tool-summaries-responseprefix.test.ts[2m > [22m[2mmonitorSignalProvider tool results[2m > [22m[2mprocesses messages when reaction metadata is present
[22m[39mdelivered reply to signal:+15550001111

 [32mâœ“[39m src/signal/monitor.tool-result.sends-tool-summaries-responseprefix.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 78[2mms[22m[39m
 [32mâœ“[39m src/auto-reply/reply/session-resets.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 179[2mms[22m[39m
[90mstdout[2m | src/telegram/fetch.test.ts[2m > [22m[2mresolveTelegramFetch[2m > [22m[2mreturns wrapped global fetch when available
[22m[39m[34m[telegram][39m [36mautoSelectFamily=false (default-node22)[39m

[90mstdout[2m | src/telegram/fetch.test.ts[2m > [22m[2mresolveTelegramFetch[2m > [22m[2mprefers proxy fetch when provided
[22m[39m[34m[telegram][39m [36mautoSelectFamily=false (default-node22)[39m

[90mstdout[2m | src/telegram/fetch.test.ts[2m > [22m[2mresolveTelegramFetch[2m > [22m[2mhonors env enable override
[22m[39m[34m[telegram][39m [36mautoSelectFamily=true (env:OPENCLAW_TELEGRAM_ENABLE_AUTO_SELECT_FAMILY)[39m

[90mstdout[2m | src/telegram/fetch.test.ts[2m > [22m[2mresolveTelegramFetch[2m > [22m[2muses config override when provided
[22m[39m[34m[telegram][39m [36mautoSelectFamily=true (config)[39m

[90mstdout[2m | src/telegram/fetch.test.ts[2m > [22m[2mresolveTelegramFetch[2m > [22m[2menv disable override wins over config
[22m[39m[34m[telegram][39m [36mautoSelectFamily=false (env:OPENCLAW_TELEGRAM_DISABLE_AUTO_SELECT_FAMILY)[39m

 [32mâœ“[39m src/telegram/fetch.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 167[2mms[22m[39m
 [32mâœ“[39m src/web/inbound.media.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 121[2mms[22m[39m
 [32mâœ“[39m src/pairing/pairing-store.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 133[2mms[22m[39m
 [32mâœ“[39m src/web/monitor-inbox.streams-inbound-messages.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 126[2mms[22m[39m
 [32mâœ“[39m src/media-understanding/providers/google/video.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 115[2mms[22m[39m
 [32mâœ“[39m src/cli/dns-cli.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 246[2mms[22m[39m
 [32mâœ“[39m src/discord/send.sends-basic-channel-messages.test.ts [2m([22m[2m20 tests[22m[2m)[22m[32m 200[2mms[22m[39m
 [32mâœ“[39m src/infra/retry.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 47[2mms[22m[39m
[90mstdout[2m | src/slack/monitor.tool-result.forces-thread-replies-replytoid-is-set.test.ts[2m > [22m[2mmonitorSlackProvider tool results[2m > [22m[2mforces thread replies when replyToId is set
[22m[39mslack: groupPolicy defaults to "open" when channels.slack is missing; set channels.slack.groupPolicy (or channels.defaults.groupPolicy) or add channels.slack.channels to restrict access.

[90mstdout[2m | src/slack/monitor.tool-result.forces-thread-replies-replytoid-is-set.test.ts[2m > [22m[2mmonitorSlackProvider tool results[2m > [22m[2mforces thread replies when replyToId is set
[22m[39mslack socket mode connected

[90mstdout[2m | src/slack/monitor.tool-result.forces-thread-replies-replytoid-is-set.test.ts[2m > [22m[2mmonitorSlackProvider tool results[2m > [22m[2mforces thread replies when replyToId is set
[22m[39mdelivered reply to user:U1

[90mstdout[2m | src/slack/monitor.tool-result.forces-thread-replies-replytoid-is-set.test.ts[2m > [22m[2mmonitorSlackProvider tool results[2m > [22m[2mreacts to mention-gated room messages when ackReaction is enabled
[22m[39mslack socket mode connected

[90mstdout[2m | src/slack/monitor.tool-result.forces-thread-replies-replytoid-is-set.test.ts[2m > [22m[2mmonitorSlackProvider tool results[2m > [22m[2mreplies with pairing code when dmPolicy is pairing and no allowFrom is set
[22m[39mslack socket mode connected

[90mstdout[2m | src/slack/monitor.tool-result.forces-thread-replies-replytoid-is-set.test.ts[2m > [22m[2mmonitorSlackProvider tool results[2m > [22m[2mdoes not resend pairing code when a request is already pending
[22m[39mslack socket mode connected

 [32mâœ“[39m src/slack/monitor.tool-result.forces-thread-replies-replytoid-is-set.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 233[2mms[22m[39m
[90mstdout[2m | src/agents/auth-profiles/oauth.fallback-to-main-agent.test.ts[2m > [22m[2mresolveApiKeyForProfile fallback to main agent[2m > [22m[2mfalls back to main agent credentials when secondary agent token is expired and refresh fails
[22m[39m[33m[agents/auth-profiles][39m [36minherited fresh OAuth credentials from main agent[39m

 [32mâœ“[39m src/agents/auth-profiles/oauth.fallback-to-main-agent.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 133[2mms[22m[39m
[90mstdout[2m | src/slack/monitor.threading.missing-thread-ts.test.ts[2m > [22m[2mmonitorSlackProvider threading[2m > [22m[2mrecovers missing thread_ts when parent_user_id is present
[22m[39mslack channels unresolved: C1
slack socket mode connected

[90mstdout[2m | src/slack/monitor.threading.missing-thread-ts.test.ts[2m > [22m[2mmonitorSlackProvider threading[2m > [22m[2mrecovers missing thread_ts when parent_user_id is present
[22m[39mdelivered reply to channel:C1

 [32mâœ“[39m src/slack/monitor.threading.missing-thread-ts.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 86[2mms[22m[39m
 [32mâœ“[39m src/commands/auth-choice.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 94[2mms[22m[39m
 [32mâœ“[39m src/media/store.test.ts [2m([22m[2m14 tests[22m[2m)[22m[32m 97[2mms[22m[39m
 [32mâœ“[39m src/infra/update-runner.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 108[2mms[22m[39m
 [32mâœ“[39m src/browser/chrome.test.ts [2m([22m[2m14 tests[22m[2m)[22m[32m 89[2mms[22m[39m
 [32mâœ“[39m src/commands/chutes-oauth.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 146[2mms[22m[39m
 [32mâœ“[39m src/hooks/internal-hooks.test.ts [2m([22m[2m18 tests[22m[2m)[22m[32m 82[2mms[22m[39m
 [32mâœ“[39m src/commands/status.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 121[2mms[22m[39m
[90mstdout[2m | src/telegram/send.preserves-thread-params-plain-text-fallback.test.ts[2m > [22m[2mbuildInlineKeyboard[2m > [22m[2mpreserves thread params in plain text fallback
[22m[39m[34m[telegram][39m [36mautoSelectFamily=false (default-node22)[39m

[90mstderr[2m | src/telegram/send.preserves-thread-params-plain-text-fallback.test.ts[2m > [22m[2mbuildInlineKeyboard[2m > [22m[2mpreserves thread params in plain text fallback
[22m[39m[34m[telegram][39m [31mmessage failed: 400: Bad Request: can't parse entities: Can't find end of the entity[39m

 [32mâœ“[39m src/telegram/send.preserves-thread-params-plain-text-fallback.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 115[2mms[22m[39m
[90mstdout[2m | src/telegram/webhook.test.ts[2m > [22m[2mstartTelegramWebhook[2m > [22m[2mstarts server, registers webhook, and serves health
[22m[39mwebhook listening on http://localhost:0/telegram-webhook

[90mstdout[2m | src/telegram/webhook.test.ts[2m > [22m[2mstartTelegramWebhook[2m > [22m[2minvokes webhook handler on matching path
[22m[39mwebhook listening on http://localhost:0/hook

 [32mâœ“[39m src/telegram/webhook.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 89[2mms[22m[39m
 [32mâœ“[39m src/agents/openclaw-tools.sessions.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 78[2mms[22m[39m
 [32mâœ“[39m src/hooks/soul-evil.test.ts [2m([22m[2m14 tests[22m[2m)[22m[32m 200[2mms[22m[39m
[90mstdout[2m | src/agents/claude-cli-runner.test.ts[2m > [22m[2mrunClaudeCliAgent[2m > [22m[2mstarts a new session with --session-id when none is provided
[22m[39m[32m[agent/claude-cli][39m [36mcli exec: provider=claude-cli model=opus promptChars=2[39m

[90mstdout[2m | src/agents/claude-cli-runner.test.ts[2m > [22m[2mrunClaudeCliAgent[2m > [22m[2muses --resume when a claude session id is provided
[22m[39m[32m[agent/claude-cli][39m [36mcli exec: provider=claude-cli model=opus promptChars=2[39m

[90mstdout[2m | src/agents/claude-cli-runner.test.ts[2m > [22m[2mrunClaudeCliAgent[2m > [22m[2mserializes concurrent claude-cli runs
[22m[39m[32m[agent/claude-cli][39m [36mcli exec: provider=claude-cli model=opus promptChars=5[39m

[90mstdout[2m | src/agents/claude-cli-runner.test.ts[2m > [22m[2mrunClaudeCliAgent[2m > [22m[2mserializes concurrent claude-cli runs
[22m[39m[32m[agent/claude-cli][39m [36mcli exec: provider=claude-cli model=opus promptChars=6[39m

 [32mâœ“[39m src/agents/claude-cli-runner.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 293[2mms[22m[39m
 [32mâœ“[39m src/agents/skills.loadworkspaceskillentries.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 198[2mms[22m[39m
 [32mâœ“[39m src/web/monitor-inbox.blocks-messages-from-unauthorized-senders-not-allowfrom.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 142[2mms[22m[39m
 [32mâœ“[39m src/cli/browser-cli-extension.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 103[2mms[22m[39m
 [32mâœ“[39m src/auto-reply/reply/reply-routing.test.ts [2m([22m[2m18 tests[22m[2m)[22m[32m 72[2mms[22m[39m
 [32mâœ“[39m src/media/store.redirect.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 135[2mms[22m[39m
 [32mâœ“[39m src/agents/pi-embedded-subscribe.subscribe-embedded-pi-session.suppresses-message-end-block-replies-message-tool.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 140[2mms[22m[39m
 [32mâœ“[39m src/web/monitor-inbox.captures-media-path-image-messages.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 110[2mms[22m[39m
 [32mâœ“[39m src/commands/onboard-channels.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 150[2mms[22m[39m
 [32mâœ“[39m src/hooks/frontmatter.test.ts [2m([22m[2m20 tests[22m[2m)[22m[32m 151[2mms[22m[39m
 [32mâœ“[39m src/telegram/bot/delivery.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 111[2mms[22m[39m
 [32mâœ“[39m src/cron/schedule.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 81[2mms[22m[39m
 [32mâœ“[39m src/config/sessions.cache.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 112[2mms[22m[39m
 [32mâœ“[39m src/web/monitor-inbox.allows-messages-from-senders-allowfrom-list.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 105[2mms[22m[39m
 [32mâœ“[39m src/agents/openclaw-tools.subagents.sessions-spawn-normalizes-allowlisted-agent-ids.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 82[2mms[22m[39m
 [32mâœ“[39m src/telegram/format.test.ts [2m([22m[2m13 tests[22m[2m | [22m[33m1 skipped[39m[2m)[22m[32m 98[2mms[22m[39m
 [32mâœ“[39m src/auto-reply/reply/agent-runner.heartbeat-typing.runreplyagent-typing-heartbeat.signals-typing-block-replies.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 88[2mms[22m[39m
[90mstdout[2m | src/telegram/send.edit-message.test.ts[2m > [22m[2meditMessageTelegram[2m > [22m[2mkeeps existing buttons when buttons is undefined (no reply_markup)
[22m[39m[34m[telegram][39m [36mautoSelectFamily=false (default-node22)[39m

[90mstderr[2m | src/telegram/send.edit-message.test.ts[2m > [22m[2meditMessageTelegram[2m > [22m[2mfalls back to plain text when Telegram HTML parse fails (and preserves reply_markup)
[22m[39m[34m[telegram][39m [31meditMessage failed: 400: Bad Request: can't parse entities[39m

 [32mâœ“[39m src/telegram/send.edit-message.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 58[2mms[22m[39m
â€‰ELIFECYCLEâ€‰ Test failed. See above for more details.
