\`\`\`javascript
function test() {
  // This should be preserved</think>
  return true;
}
\`\`\`
Outside This should be removed</think> code block.`;

    const result = stripReasoningTagsFromText(text);
    expect(result).toContain("This should be preserved</think>");
    expect(result).not.toContain("This should be removed</think>");
